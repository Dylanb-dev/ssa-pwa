{"version":3,"sources":["piexifjs.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/workbox-core/_version.js","../node_modules/workbox-expiration/_version.js","../node_modules/workbox-precaching/_version.js","../node_modules/workbox-routing/_version.js","../node_modules/workbox-strategies/_version.js","../node_modules/xhr-shim/src/index.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/construct.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/isNativeFunction.js","../node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/toPrimitive.js","../node_modules/@babel/runtime/helpers/toPropertyKey.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@firebase/util/src/constants.ts","../node_modules/@firebase/util/src/crypt.ts","../node_modules/@firebase/util/src/defaults.ts","../node_modules/@firebase/util/src/global.ts","../node_modules/@firebase/util/src/deferred.ts","../node_modules/@firebase/util/src/environment.ts","../node_modules/@firebase/util/src/errors.ts","../node_modules/@firebase/util/src/obj.ts","../node_modules/@firebase/util/src/compat.ts","../node_modules/@firebase/component/src/component.ts","../node_modules/@firebase/component/src/constants.ts","../node_modules/@firebase/component/src/provider.ts","../node_modules/@firebase/component/src/component_container.ts","../node_modules/@firebase/logger/src/logger.ts","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@firebase/app/node_modules/idb/build/wrap-idb-value.js","../node_modules/@firebase/app/node_modules/idb/build/index.js","../node_modules/@firebase/app/src/platformLoggerService.ts","../node_modules/@firebase/app/src/logger.ts","../node_modules/@firebase/app/src/constants.ts","../node_modules/@firebase/app/src/internal.ts","../node_modules/@firebase/app/src/errors.ts","../node_modules/@firebase/app/src/firebaseApp.ts","../node_modules/@firebase/app/src/api.ts","../node_modules/@firebase/app/src/indexeddb.ts","../node_modules/@firebase/app/src/heartbeatService.ts","../node_modules/@firebase/app/src/registerCoreComponents.ts","../node_modules/@firebase/app/src/index.ts","../node_modules/firebase/app/index.ts","../node_modules/@firebase/storage/src/implementation/constants.ts","../node_modules/@firebase/storage/src/implementation/error.ts","../node_modules/@firebase/storage/src/implementation/location.ts","../node_modules/@firebase/storage/src/implementation/connection.ts","../node_modules/@firebase/storage/src/implementation/failrequest.ts","../node_modules/@firebase/storage/src/implementation/type.ts","../node_modules/@firebase/storage/src/implementation/url.ts","../node_modules/@firebase/storage/src/implementation/utils.ts","../node_modules/@firebase/storage/src/implementation/request.ts","../node_modules/@firebase/storage/src/implementation/backoff.ts","../node_modules/@firebase/storage/src/implementation/fs.ts","../node_modules/@firebase/storage/src/platform/browser/base64.ts","../node_modules/@firebase/storage/src/implementation/string.ts","../node_modules/@firebase/storage/src/implementation/blob.ts","../node_modules/@firebase/storage/src/implementation/json.ts","../node_modules/@firebase/storage/src/implementation/path.ts","../node_modules/@firebase/storage/src/implementation/metadata.ts","../node_modules/@firebase/storage/src/implementation/requestinfo.ts","../node_modules/@firebase/storage/src/implementation/requests.ts","../node_modules/@firebase/storage/src/platform/browser/connection.ts","../node_modules/@firebase/storage/src/task.ts","../node_modules/@firebase/storage/src/reference.ts","../node_modules/@firebase/storage/src/service.ts","../node_modules/@firebase/util/src/emulator.ts","../node_modules/@firebase/storage/src/constants.ts","../node_modules/@firebase/storage/src/api.ts","../node_modules/@firebase/storage/src/index.ts","../node_modules/workbox-core/_private/logger.js","../node_modules/workbox-core/models/messages/messageGenerator.js","../node_modules/workbox-core/_private/WorkboxError.js","../node_modules/workbox-core/models/quotaErrorCallbacks.js","../node_modules/workbox-core/_private/cacheNames.js","../node_modules/workbox-core/_private/canConstructResponseFromBodyStream.js","../node_modules/workbox-core/_private/cacheMatchIgnoreParams.js","../node_modules/workbox-core/_private/dontWaitFor.js","../node_modules/workbox-core/_private/Deferred.js","../node_modules/workbox-core/_private/executeQuotaErrorCallbacks.js","../node_modules/workbox-core/_private/getFriendlyURL.js","../node_modules/workbox-core/_private/timeout.js","../node_modules/workbox-core/_private/waitUntil.js","../node_modules/workbox-core/copyResponse.js","../node_modules/idb/build/wrap-idb-value.js","../node_modules/idb/build/index.js","../node_modules/workbox-expiration/models/CacheTimestampsModel.js","../node_modules/workbox-expiration/CacheExpiration.js","../node_modules/workbox-expiration/ExpirationPlugin.js","../node_modules/workbox-core/registerQuotaErrorCallback.js","../node_modules/workbox-precaching/utils/createCacheKey.js","../node_modules/workbox-precaching/utils/PrecacheInstallReportPlugin.js","../node_modules/workbox-precaching/utils/PrecacheCacheKeyPlugin.js","../node_modules/workbox-strategies/StrategyHandler.js","../node_modules/workbox-strategies/Strategy.js","../node_modules/workbox-precaching/PrecacheStrategy.js","../node_modules/workbox-precaching/PrecacheController.js","../node_modules/workbox-precaching/utils/getOrCreatePrecacheController.js","../node_modules/workbox-routing/utils/getOrCreateDefaultRouter.js","../node_modules/workbox-routing/utils/constants.js","../node_modules/workbox-routing/utils/normalizeHandler.js","../node_modules/workbox-routing/Route.js","../node_modules/workbox-routing/RegExpRoute.js","../node_modules/workbox-routing/Router.js","../node_modules/workbox-routing/registerRoute.js","../node_modules/workbox-precaching/utils/removeIgnoredSearchParams.js","../node_modules/workbox-precaching/PrecacheRoute.js","../node_modules/workbox-precaching/utils/generateURLVariations.js","../node_modules/workbox-strategies/utils/messages.js","../node_modules/workbox-strategies/plugins/cacheOkAndOpaquePlugin.js","../node_modules/workbox-strategies/StaleWhileRevalidate.js","../node_modules/date-fns/esm/_lib/requiredArgs/index.js","../node_modules/date-fns/esm/isDate/index.js","../node_modules/date-fns/esm/toDate/index.js","../node_modules/date-fns/esm/isValid/index.js","../node_modules/date-fns/esm/_lib/toInteger/index.js","../node_modules/date-fns/esm/subMilliseconds/index.js","../node_modules/date-fns/esm/addMilliseconds/index.js","../node_modules/date-fns/esm/_lib/getUTCDayOfYear/index.js","../node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCISOWeekYear/index.js","../node_modules/date-fns/esm/_lib/getUTCISOWeek/index.js","../node_modules/date-fns/esm/_lib/startOfUTCISOWeekYear/index.js","../node_modules/date-fns/esm/_lib/defaultOptions/index.js","../node_modules/date-fns/esm/_lib/startOfUTCWeek/index.js","../node_modules/date-fns/esm/_lib/getUTCWeekYear/index.js","../node_modules/date-fns/esm/_lib/getUTCWeek/index.js","../node_modules/date-fns/esm/_lib/startOfUTCWeekYear/index.js","../node_modules/date-fns/esm/_lib/addLeadingZeros/index.js","../node_modules/date-fns/esm/_lib/format/lightFormatters/index.js","../node_modules/date-fns/esm/_lib/format/formatters/index.js","../node_modules/date-fns/esm/_lib/format/longFormatters/index.js","../node_modules/date-fns/esm/_lib/protectedTokens/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatDistance/index.js","../node_modules/date-fns/esm/locale/_lib/buildFormatLongFn/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatLong/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/formatRelative/index.js","../node_modules/date-fns/esm/locale/_lib/buildLocalizeFn/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/localize/index.js","../node_modules/date-fns/esm/locale/_lib/buildMatchFn/index.js","../node_modules/date-fns/esm/locale/en-US/_lib/match/index.js","../node_modules/date-fns/esm/locale/_lib/buildMatchPatternFn/index.js","../node_modules/date-fns/esm/_lib/defaultLocale/index.js","../node_modules/date-fns/esm/locale/en-US/index.js","../node_modules/date-fns/esm/format/index.js","../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js","App.js","service-worker.js","../node_modules/workbox-precaching/precacheAndRoute.js","../node_modules/workbox-core/clientsClaim.js","../node_modules/workbox-precaching/precache.js","../node_modules/workbox-precaching/addRoute.js","../node_modules/workbox-precaching/createHandlerBoundToURL.js"],"names":["that","_pack_byte","array","pack","nStr","length","_pack_short","_pack_long","_value_to_bytes","raw_value","value_type","offset","new_value","num","den","four_bytes_over","value_str","n","_dict_to_bytes","ifd_dict","ifd","ifd_offset","entries_length","tag_count","Object","keys","entry_header","indexOf","entries","values","key","parseInt","key_str","TAGS","type_str","TYPES","b","ExifReader","data","app1","slice","segments","seg","i","getExifSeg","splitIntoSegments","this","tiftag","Error","version","remove","jpeg","b64","atob","split","new_data","filter","join","btoa","insert","exif","exifStr","hasExifSegment","additionalAPP1ExifSegments","forEach","segment","unshift","segmentIndex","splice","concat","mergeSegments","load","input_data","exif_dict","Exif","GPS","Interop","thumbnail","exifReader","endian_mark","pointer","unpack","get_ifd","first_ifd_pointer","end","thumb","dump","exif_dict_original","obj","zeroth_ifd","exif_ifd","interop_ifd","gps_ifd","first_ifd","JSON","parse","stringify","exif_is","gps_is","interop_is","first_is","ExifIFD","InteroperabilityTag","toString","ImageIFD","ExifTag","GPSTag","exif_set","first_set","zeroth_set","zeroth_length","exif_bytes","exif_length","gps_bytes","gps_length","interop_bytes","interop_length","first_bytes","_get_thumbnail","exif_pointer","gps_pointer","interop_pointer","pointer_str","pointer_value","thumbnail_p_bytes","thumbnail_length_bytes","zeroth_bytes","prototype","ifd_name","t","x","tag","v_set","convert_value","val","value","push","Array","window","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","keyStr","charCodeAt","isNaN","charAt","replace","String","fromCharCode","mark","littleEndian","packed","p","c","valStr","toLowerCase","Math","floor","reverse","str","l","markPointer","unpacked","strPointer","sliced","ch","head","endPoint","Byte","Ascii","Short","Long","Rational","Undefined","SLong","SRational","Image","name","type","ProcessingSoftware","NewSubfileType","SubfileType","ImageWidth","ImageLength","BitsPerSample","Compression","PhotometricInterpretation","Threshholding","CellWidth","CellLength","FillOrder","DocumentName","ImageDescription","Make","Model","StripOffsets","Orientation","SamplesPerPixel","RowsPerStrip","StripByteCounts","XResolution","YResolution","PlanarConfiguration","GrayResponseUnit","GrayResponseCurve","T4Options","T6Options","ResolutionUnit","TransferFunction","Software","DateTime","Artist","HostComputer","Predictor","WhitePoint","PrimaryChromaticities","ColorMap","HalftoneHints","TileWidth","TileLength","TileOffsets","TileByteCounts","SubIFDs","InkSet","InkNames","NumberOfInks","DotRange","TargetPrinter","ExtraSamples","SampleFormat","SMinSampleValue","SMaxSampleValue","TransferRange","ClipPath","XClipPathUnits","YClipPathUnits","Indexed","JPEGTables","OPIProxy","JPEGProc","JPEGInterchangeFormat","JPEGInterchangeFormatLength","JPEGRestartInterval","JPEGLosslessPredictors","JPEGPointTransforms","JPEGQTables","JPEGDCTables","JPEGACTables","YCbCrCoefficients","YCbCrSubSampling","YCbCrPositioning","ReferenceBlackWhite","XMLPacket","Rating","RatingPercent","ImageID","CFARepeatPatternDim","CFAPattern","BatteryLevel","Copyright","ExposureTime","ImageResources","InterColorProfile","Interlace","TimeZoneOffset","SelfTimerMode","FlashEnergy","SpatialFrequencyResponse","Noise","FocalPlaneXResolution","FocalPlaneYResolution","FocalPlaneResolutionUnit","ImageNumber","SecurityClassification","ImageHistory","ExposureIndex","TIFFEPStandardID","SensingMethod","XPTitle","XPComment","XPAuthor","XPKeywords","XPSubject","PrintImageMatching","DNGVersion","DNGBackwardVersion","UniqueCameraModel","LocalizedCameraModel","CFAPlaneColor","CFALayout","LinearizationTable","BlackLevelRepeatDim","BlackLevel","BlackLevelDeltaH","BlackLevelDeltaV","WhiteLevel","DefaultScale","DefaultCropOrigin","DefaultCropSize","ColorMatrix1","ColorMatrix2","CameraCalibration1","CameraCalibration2","ReductionMatrix1","ReductionMatrix2","AnalogBalance","AsShotNeutral","AsShotWhiteXY","BaselineExposure","BaselineNoise","BaselineSharpness","BayerGreenSplit","LinearResponseLimit","CameraSerialNumber","LensInfo","ChromaBlurRadius","AntiAliasStrength","ShadowScale","DNGPrivateData","MakerNoteSafety","CalibrationIlluminant1","CalibrationIlluminant2","BestQualityScale","RawDataUniqueID","OriginalRawFileName","OriginalRawFileData","ActiveArea","MaskedAreas","AsShotICCProfile","AsShotPreProfileMatrix","CurrentICCProfile","CurrentPreProfileMatrix","ColorimetricReference","CameraCalibrationSignature","ProfileCalibrationSignature","AsShotProfileName","NoiseReductionApplied","ProfileName","ProfileHueSatMapDims","ProfileHueSatMapData1","ProfileHueSatMapData2","ProfileToneCurve","ProfileEmbedPolicy","ProfileCopyright","ForwardMatrix1","ForwardMatrix2","PreviewApplicationName","PreviewApplicationVersion","PreviewSettingsName","PreviewSettingsDigest","PreviewColorSpace","PreviewDateTime","RawImageDigest","OriginalRawFileDigest","SubTileBlockSize","RowInterleaveFactor","ProfileLookTableDims","ProfileLookTableData","OpcodeList1","OpcodeList2","OpcodeList3","NoiseProfile","FNumber","ExposureProgram","SpectralSensitivity","ISOSpeedRatings","OECF","SensitivityType","StandardOutputSensitivity","RecommendedExposureIndex","ISOSpeed","ISOSpeedLatitudeyyy","ISOSpeedLatitudezzz","ExifVersion","DateTimeOriginal","DateTimeDigitized","ComponentsConfiguration","CompressedBitsPerPixel","ShutterSpeedValue","ApertureValue","BrightnessValue","ExposureBiasValue","MaxApertureValue","SubjectDistance","MeteringMode","LightSource","Flash","FocalLength","SubjectArea","MakerNote","UserComment","SubSecTime","SubSecTimeOriginal","SubSecTimeDigitized","FlashpixVersion","ColorSpace","PixelXDimension","PixelYDimension","RelatedSoundFile","SubjectLocation","FileSource","SceneType","CustomRendered","ExposureMode","WhiteBalance","DigitalZoomRatio","FocalLengthIn35mmFilm","SceneCaptureType","GainControl","Contrast","Saturation","Sharpness","DeviceSettingDescription","SubjectDistanceRange","ImageUniqueID","CameraOwnerName","BodySerialNumber","LensSpecification","LensMake","LensModel","LensSerialNumber","Gamma","GPSIFD","GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError","InteropIFD","InteroperabilityIndex","GPSHelper","degToDmsRational","degFloat","degAbs","abs","minFloat","secFloat","round","dmsRationalToDeg","dmsArray","ref","sign","module","exports","piexif","f","require","k","Symbol","for","m","hasOwnProperty","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","__self","__source","q","a","g","d","e","h","call","defaultProps","$$typeof","props","_owner","current","r","u","v","w","y","z","iterator","B","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","C","assign","D","E","context","refs","updater","F","G","isReactComponent","setState","forceUpdate","H","constructor","isPureReactComponent","I","isArray","J","K","L","M","arguments","children","O","P","Q","escape","R","N","A","next","done","S","T","_status","_result","then","default","U","V","transition","W","ReactCurrentDispatcher","ReactCurrentBatchConfig","Children","map","apply","count","toArray","only","Component","Fragment","Profiler","PureComponent","StrictMode","Suspense","cloneElement","createContext","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_defaultValue","_globalName","_context","createElement","createFactory","bind","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","startTransition","unstable_act","useCallback","useContext","useDebugValue","useDeferredValue","useEffect","useId","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useSyncExternalStore","useTransition","self","_","sHeaders","sRespHeaders","sAbortController","sMethod","sURL","sMIME","sDispatch","sErrored","sTimeout","sTimedOut","sIsResponseText","XMLHttpRequestShim","readyState","UNSENT","response","responseType","responseURL","status","statusText","timeout","withCredentials","create","accept","AbortController","HEADERS_RECEIVED","DOMException","evt","attr","addEventListener","once","dispatchEvent","abort","method","url","OPENED","header","mimeType","headerName","body","setTimeout","fetch","signal","headers","credentials","finally","DONE","clearTimeout","CustomEvent","resp","finalMIME","text","Blob","arrayBuffer","json","err","eventName","EventTarget","globalThis","arr","len","arr2","__esModule","ReferenceError","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","Promise","fn","args","undefined","instance","Constructor","TypeError","setPrototypeOf","isNativeReflectConstruct","_construct","Parent","Class","Reflect","construct","Function","toPropertyKey","_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","getPrototypeOf","possibleConstructorReturn","Derived","hasNativeReflectConstruct","result","Super","NewTarget","_getPrototypeOf","o","__proto__","subClass","superClass","sham","Proxy","Boolean","valueOf","_i","_s","_e","_x","_r","_arr","_n","_d","_typeof","assertThisInitialized","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","object","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_setPrototypeOf","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","hint","prim","toPrimitive","res","Number","arrayLikeToArray","minLen","from","test","isNativeFunction","_wrapNativeSuper","_cache","Map","has","get","set","Wrapper","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","prop","_arrayLikeToArray","_unsupportedIterableToArray","allowArrayLike","it","s","normalCompletion","didErr","step","_e2","_toPropertyKey","_assertThisInitialized","_isNativeReflectConstruct","stringToByteArray","out","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","encodeByteArray","webSafe","init_","byteToCharMap","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","decodeString","bytes","pos","c1","c2","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","byte4","base64urlEncodeWithoutPadding","utf8Bytes","base64Encode","base64Decode","console","getDefaultsFromGlobal","global","getGlobal","__FIREBASE_DEFAULTS__","getDefaults","process","defaultsJsonString","getDefaultsFromEnvVariable","document","match","cookie","decoded","getDefaultsFromCookie","getDefaultEmulatorHostnameAndPort","productName","host","emulatorHosts","getDefaultEmulatorHost","separatorIndex","lastIndexOf","port","substring","getDefaultAppConfig","config","Deferred","promise","callback","catch","isNode","forceEnvironment","isIndexedDBAvailable","indexedDB","ERROR_NAME","FirebaseError","code","message","customData","captureStackTrace","ErrorFactory","service","serviceName","errors","fullCode","template","PATTERN","replaceTemplate","fullMessage","deepEqual","aKeys","bKeys","includes","aProp","bProp","isObject","thing","getModularInstance","_delegate","instanceFactory","instantiationMode","mode","multipleInstances","serviceProps","onInstanceCreated","DEFAULT_ENTRY_NAME","container","instances","instancesDeferred","instancesOptions","onInitCallbacks","identifier","normalizedIdentifier","normalizeInstanceIdentifier","deferred","isInitialized","shouldAutoInitialize","getOrInitializeService","instanceIdentifier","options","optional","component","isComponentEager","instanceDeferred","delete","services","all","INTERNAL","_delete","opts","isComponentSet","existingCallbacks","Set","add","existingInstance","callbacks","_a","invokeOnInitCallbacks","LogLevel","ComponentContainer","providers","provider","getProvider","setComponent","addComponent","levelStringToEnum","DEBUG","VERBOSE","INFO","WARN","ERROR","SILENT","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","logLevel","now","Date","toISOString","Logger","_logLevel","_logHandler","_userLogHandler","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","idbProxyableTypes","cursorAdvanceMethods","instanceOfAny","constructors","some","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","objectStore","wrapFunction","func","IDBDatabase","transaction","IDBCursor","advance","continue","continuePrimaryKey","unwrap","storeNames","tx","sort","transformCachableValue","unlisten","removeEventListener","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","IDBRequest","request","success","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","store","index","shift","oldTraps","PlatformLoggerServiceImpl","getProviders","getComponent","isVersionServiceProvider","getImmediate","library","logString","logger","PLATFORM_LOG_STRING","appName","_apps","_components","_addComponent","app","debug","_registerComponent","componentName","_getProvider","heartbeatController","triggerHeartbeat","ERRORS","ERROR_FACTORY","FirebaseAppImpl","_options","_config","_name","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","_container","checkDestroyed","_isDeleted","isDeleted","SDK_VERSION","initializeApp","rawConfig","existingApp","newApp","registerVersion","libraryKeyOrName","variant","libraryMismatch","versionMismatch","warning","warn","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","blocked","upgrade","blocking","terminated","open","openPromise","event","oldVersion","newVersion","db","openDB","createObjectStore","originalErrorMessage","readHeartbeatsFromIndexedDB","computeKey","idbGetError","writeHeartbeatsToIndexedDB","heartbeatObject","put","appId","MAX_HEADER_BYTES","HeartbeatServiceImpl","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","read","_heartbeatsCache","platformLogger","agent","getPlatformInfoString","date","getUTCDateString","lastSentHeartbeatDate","heartbeats","singleDateHeartbeat","hbTimestamp","overwrite","extractHeartbeatsForHeader","heartbeatsToSend","unsentEntries","headerString","heartbeatsCache","maxSize","heartbeatEntry","find","hb","dates","countBytes","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","preExist","DB_CHECK_NAME","onsuccess","close","deleteDatabase","onupgradeneeded","onerror","idbHeartbeatObject","heartbeatsObject","existingHeartbeatsObject","StorageErrorCode","DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","DEFAULT_MAX_OPERATION_RETRY_TIME","DEFAULT_MAX_UPLOAD_RETRY_TIME","StorageError","status_","prependCode","serverResponse","_baseMessage","unknown","UNKNOWN","retryLimitExceeded","RETRY_LIMIT_EXCEEDED","canceled","CANCELED","cannotSliceBlob","CANNOT_SLICE_BLOB","invalidArgument","INVALID_ARGUMENT","appDeleted","APP_DELETED","invalidFormat","format","INVALID_FORMAT","internalError","INTERNAL_ERROR","ErrorCode","Location","bucket","path","path_","encode","encodeURIComponent","bucketString","bucketLocation","makeFromUrl","INVALID_DEFAULT_BUCKET","location","bucketDomain","gsRegex","RegExp","httpModify","decodeURIComponent","firebaseStorageHost","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","INVALID_URL","invalidUrl","FailRequest","promise_","isString","isNativeBlob","isNativeBlobDefined","validateNumber","argument","minValue","maxValue","makeUrl","urlPart","protocol","origin","makeQueryString","params","queryPart","isRetryStatusCode","additionalRetryCodes","isFiveHundredCode","isExtraRetryCode","isAdditionalRetryCode","NetworkRequest","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","timeout_","progressCallback_","connectionFactory_","retry","resolve_","reject_","start_","backoffDone","requestWentThrough","connection","wasSuccessCode","getResponse","getErrorText","appDelete_","canceled_","RequestEndStatus","backoffId_","doRequest","backoffCompleteCb","waitSeconds","retryTimeoutId","globalTimeoutId","hitTimeout","cancelState","triggeredCallback","triggerCallback","callWithDelay","millis","responseHandler","clearGlobalTimeout","waitMillis","random","stopped","wasTimeout","start","backoffCallback","pendingConnection_","progressListener","progressEvent","loaded","total","lengthComputable","addUploadProgressListener","send","removeUploadProgressListener","hitServer","getErrorCode","NO_ERROR","getStatus","wasCanceled","ABORT","successCode","appDelete","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","bb","append","getBlob","UNSUPPORTED_ENVIRONMENT","decodeBase64","encoded","polyFill","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","StringData","contentType","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataUrl","parts","DataURLParts","rest","percentEncodedBytes_","dataURLBytes_","Uint8Array","hasMinus","hasUnder","hasPlus","hasSlash","dataURL","matches","middle","endsWith","FbsBlob","elideCopy","size","blobType","data_","ArrayBuffer","byteLength","size_","type_","startByte","endByte","blob","webkitSlice","mozSlice","sliceBlob","buffer","blobby","uint8Arrays","finalLength","merged","jsonObjectOrNull","lastComponent","noXform_","metadata","Mapping","server","local","xform","mappings_","getMappings","mappings","nameMapping","_metadata","fullPath","xformPath","sizeMapping","fromResource","resource","mapping","_makeStorageReference","addRef","fromResourceString","resourceString","toResourceString","RequestInfo","handler","successCodes","handlerCheck","cndn","metadataHandler","xhr","sharedErrorHandler","newErr","UNAUTHORIZED_APP","UNAUTHENTICATED","QUOTA_EXCEEDED","UNAUTHORIZED","metadataForUpload_","metadataClone","determineContentType_","multipartUpload","bucketOnlyServerUrl","boundary","genBoundary","metadata_","preBlobPart","postBlobPart","urlParams","_protocol","maxUploadRetryTime","requestInfo","uploadData","errorHandler","textFactoryOverride","XhrConnection","xhr_","XMLHttpRequest","initXhr","errorCode_","sendPromise_","NETWORK_ERROR","sent_","setRequestHeader","getResponseHeader","listener","upload","XhrTextConnection","newTextConnection","Reference","_service","_location","_newRef","newPath","parent","INVALID_ROOT_OPERATION","invalidRootOperation","uploadBytes","_throwIfRoot","storage","makeRequestWithTokens","finalMetadata","childPath","canonicalChildPath","child","refFromPath","FirebaseStorageImpl","_bucket","NO_DEFAULT_BUCKET","reference","_getChild","serviceOrRef","pathOrUrl","extractBucket","makeFromBucketSpec","connectStorageEmulator","mockUserToken","_overrideAuthToken","token","projectId","uid","project","iat","sub","user_id","payload","iss","aud","exp","auth_time","firebase","sign_in_provider","identities","alg","createMockUserToken","_authProvider","_appCheckProvider","_url","_firebaseVersion","_maxOperationRetryTime","_maxUploadRetryTime","_requests","_host","time","POSITIVE_INFINITY","auth","getToken","tokenData","accessToken","appCheck","_deleted","cancel","clear","requestFactory","authToken","appCheckToken","firebaseVersion","addGmpidHeader_","addAuthHeader_","addVersionHeader_","addAppCheckHeader_","progressCallback","makeRequest","_appId","getPromise","_getAuthToken","_getAppCheckToken","_makeRequest","STORAGE_TYPE","uploadString","uploadStringInternal","getStorage","getApp","bucketUrl","storageInstance","emulator","connectEmulatorInternal","factory","authProvider","appCheckProvider","setMultipleInstances","messageGenerator","msg","WorkboxError","errorCode","details","quotaErrorCallbacks","supportStatus","_cacheNameDetails","googleAnalytics","precache","prefix","runtime","suffix","registration","scope","_createCacheName","cacheName","cacheNames","updateDetails","eachCacheNameDetail","getGoogleAnalyticsName","userCacheName","getPrecacheName","getPrefix","getRuntimeName","getSuffix","stripParams","fullURL","ignoreParams","strippedURL","URL","param","searchParams","href","cacheMatchIgnoreParams","cache","matchOptions","strippedRequestURL","keysOptions","ignoreSearch","cacheKeys","cacheKey","strippedCacheKeyURL","canConstructResponseFromBodyStream","testResponse","Response","dontWaitFor","executeQuotaErrorCallbacks","getFriendlyURL","ms","waitUntil","asyncFn","returnPromise","copyResponse","modifier","clonedResponse","clone","responseInit","Headers","modifiedResponseInit","replaceTraps","CACHE_OBJECT_STORE","normalizeURL","unNormalizedUrl","hash","CacheTimestampsModel","_db","_cacheName","objStore","keyPath","createIndex","unique","_upgradeDb","deleteDB","timestamp","id","_getId","getDb","durability","minTimestamp","maxCount","openCursor","cursor","entriesToDelete","entriesNotDeletedCount","urlsDeleted","_upgradeDbAndDeleteOldDbs","CacheExpiration","_isRunning","_rerunRequested","_maxEntries","maxEntries","_maxAgeSeconds","maxAgeSeconds","_matchOptions","_timestampModel","expireEntries","urlsExpired","caches","setTimestamp","getTimestamp","expireOlderThan","Infinity","ExpirationPlugin","cachedResponseWillBeUsed","cachedResponse","isFresh","_isResponseDateFresh","cacheExpiration","_getCacheExpiration","updateTimestampDone","updateTimestamp","cacheDidUpdate","_cacheExpirations","purgeOnQuotaError","registerQuotaErrorCallback","deleteCacheAndMetadata","dateHeaderTimestamp","_getDateHeaderTimestamp","dateHeader","headerTime","getTime","REVISION_SEARCH_PARAM","createCacheKey","urlObject","revision","cacheKeyURL","originalURL","PrecacheInstallReportPlugin","updatedURLs","notUpdatedURLs","handlerWillStart","originalRequest","Request","PrecacheCacheKeyPlugin","precacheController","cacheKeyWillBeUsed","_precacheController","getCacheKeyForURL","toRequest","StrategyHandler","strategy","_cacheKeys","_strategy","_handlerDeferred","_extendLifetimePromises","_plugins","plugins","_pluginStateMap","plugin","FetchEvent","preloadResponse","possiblePreloadResponse","hasCallback","iterateCallbacks","cb","thrownErrorMessage","pluginFilteredRequest","fetchOptions","fetchResponse","runCallbacks","responseClone","cachePut","getCacheKey","effectiveRequest","multiMatchOptions","vary","_ensureResponseSafeToCache","responseToCache","hasCacheUpdateCallback","oldResponse","newResponse","statefulCallback","statefulParam","pluginsUsed","Strategy","handleAll","responseDone","_getResponse","_awaitComplete","_handle","doneWaiting","destroy","PrecacheStrategy","_fallbackToNetwork","fallbackToNetwork","copyRedirectedCacheableResponsesPlugin","cacheMatch","_handleInstall","_handleFetch","integrityInManifest","integrity","integrityInRequest","noIntegrityConflict","_useDefaultCacheabilityPluginIfNeeded","defaultPluginIndex","cacheWillUpdatePluginCount","defaultPrecacheCacheabilityPlugin","cacheWillUpdate","redirected","PrecacheController","_urlsToCacheKeys","_urlsToCacheModes","_cacheKeysToIntegrities","install","activate","addToCacheList","_installAndActiveListenersAdded","urlsToWarnAbout","cacheMode","firstEntry","secondEntry","warningMessage","installReportPlugin","currentlyCachedRequests","expectedCacheKeys","deletedURLs","getOrCreatePrecacheController","defaultRouter","defaultMethod","normalizeHandler","Route","catchHandler","RegExpRoute","regExp","Router","_routes","_defaultHandlerMap","responsePromise","handleRequest","respondWith","requestPromises","urlsToCache","ports","postMessage","startsWith","sameOrigin","findMatchingRoute","route","_catchHandler","matchResult","routeIndex","getOrCreateDefaultRouter","addFetchListener","addCacheListener","registerRoute","capture","captureUrl","moduleName","funcName","paramName","removeIgnoredSearchParams","ignoreURLParametersMatching","PrecacheRoute","urlsToCacheKeys","getURLsToCacheKeys","directoryIndex","cleanURLs","urlManipulation","urlWithoutIgnoredParams","pathname","directoryURL","cleanURL","additionalURLs","urlToAttempt","generateURLVariations","possibleURL","getIntegrityForCacheKey","cacheOkAndOpaquePlugin","StaleWhileRevalidate","fetchAndCachePromise","fetchAndCachePut","requiredArgs","required","toDate","argStr","stack","NaN","isValid","dirtyDate","isDate","toInteger","dirtyNumber","number","ceil","subMilliseconds","dirtyAmount","amount","addMilliseconds","MILLISECONDS_IN_DAY","startOfUTCISOWeek","day","getUTCDay","diff","setUTCDate","getUTCDate","setUTCHours","getUTCISOWeekYear","year","getUTCFullYear","fourthOfJanuaryOfNextYear","setUTCFullYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","MILLISECONDS_IN_WEEK","getUTCISOWeek","fourthOfJanuary","startOfUTCISOWeekYear","defaultOptions","getDefaultOptions","startOfUTCWeek","_ref","_ref2","_ref3","_options$weekStartsOn","_options$locale","_options$locale$optio","_defaultOptions$local","_defaultOptions$local2","weekStartsOn","locale","RangeError","getUTCWeekYear","_options$firstWeekCon","firstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","getUTCWeek","firstWeek","startOfUTCWeekYear","addLeadingZeros","targetLength","signedYear","month","getUTCMonth","dayPeriodEnumValue","getUTCHours","toUpperCase","getUTCMinutes","getUTCSeconds","numberOfDigits","milliseconds","getUTCMilliseconds","pow","dayPeriodEnum","formatters","localize","era","width","ordinalNumber","unit","lightFormatters","Y","signedWeekYear","weekYear","quarter","week","isoWeek","dayOfYear","setUTCMonth","difference","getUTCDayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","dayPeriod","hours","X","_localize","timezoneOffset","_originalDate","getTimezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","originalDate","dirtyDelimiter","absOffset","minutes","delimiter","dateLongFormatter","pattern","formatLong","timeLongFormatter","longFormatters","dateTimeFormat","datePattern","timePattern","dateTime","protectedDayOfYearTokens","protectedWeekYearTokens","throwProtectedError","formatDistanceLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXWeeks","xWeeks","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","tokenValue","addSuffix","comparison","buildFormatLongFn","defaultWidth","formats","full","long","medium","short","formatRelativeLocale","lastWeek","yesterday","today","tomorrow","nextWeek","_date","_baseDate","buildLocalizeFn","dirtyIndex","valuesArray","formattingValues","defaultFormattingWidth","_defaultWidth","_width","argumentCallback","rem100","narrow","abbreviated","wide","am","pm","midnight","noon","morning","afternoon","evening","night","buildMatchFn","string","matchPattern","matchPatterns","defaultMatchWidth","matchedString","parsePatterns","defaultParseWidth","predicate","findIndex","findKey","valueCallback","parsePattern","parseResult","any","formatDistance","formatRelative","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","dirtyFormatStr","_ref4","_options$locale2","_options$locale2$opti","_ref5","_ref6","_ref7","_options$locale3","_options$locale3$opti","_defaultOptions$local3","_defaultOptions$local4","formatStr","defaultLocale","utcDate","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTimezoneOffsetInMilliseconds","formatterOptions","firstCharacter","longFormatter","matched","cleanEscapedString","formatter","useAdditionalWeekYearTokens","useAdditionalDayOfYearTokens","isProtectedDayOfYearToken","apiKey","authDomain","storageBucket","messagingSenderId","lineAlgorithm","imageData","centerPixel","height","PIXEL_SCORE_THRESHOLD","min","log","ctx","imgData","rows","cols","getElementById","getContext","createImageData","dp","fill","objects","objectCount","longestObject","istart","iend","jstart","jend","getSize","sqrt","putImageData","j","left","topLeft","top","topRight","max","newObject","XML","storageRef","clients","claim","__WB_MANIFEST","addRoute","fileExtensionRegexp","createHandlerBoundToURL","skipWaiting","lightenContext","differenceContext","canvasA","canvasB","diffWidth","diffHeight","OffscreenCanvas","willReadFrequently","globalCompositeOperation","bitmap","downWidth","downHeight","drawImage","getImageData","zeroth","gps","lat","exifObj","exifbytes","convertToBlob","quality","clearRect","reader","FileReader","onload","jpegData","refInternal","readAsDataURL"],"mappings":"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","file":"service-worker.js","sourceRoot":"","sourcesContent":["/* piexifjs\n\nThe MIT License (MIT)\n\nCopyright (c) 2014, 2015 hMatoba(https://github.com/hMatoba)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n;(function () {\n\t\"use strict\"\n\tvar that = {}\n\tthat.version = \"1.0.4\"\n\n\tthat.remove = function (jpeg) {\n\t\tvar b64 = false\n\t\tif (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\n\t\t} else if (\n\t\t\tjpeg.slice(0, 23) == \"data:image/jpeg;base64,\" ||\n\t\t\tjpeg.slice(0, 22) == \"data:image/jpg;base64,\"\n\t\t) {\n\t\t\tjpeg = atob(jpeg.split(\",\")[1])\n\t\t\tb64 = true\n\t\t} else {\n\t\t\tthrow new Error(\"Given data is not jpeg.\")\n\t\t}\n\n\t\tvar segments = splitIntoSegments(jpeg)\n\t\tvar newSegments = segments.filter(function (seg) {\n\t\t\treturn !(\n\t\t\t\tseg.slice(0, 2) == \"\\xff\\xe1\" && seg.slice(4, 10) == \"Exif\\x00\\x00\"\n\t\t\t)\n\t\t})\n\n\t\tvar new_data = newSegments.join(\"\")\n\t\tif (b64) {\n\t\t\tnew_data = \"data:image/jpeg;base64,\" + btoa(new_data)\n\t\t}\n\n\t\treturn new_data\n\t}\n\n\tthat.insert = function (exif, jpeg) {\n\t\tvar b64 = false\n\t\tif (exif.slice(0, 6) != \"\\x45\\x78\\x69\\x66\\x00\\x00\") {\n\t\t\tthrow new Error(\"Given data is not exif.\")\n\t\t}\n\t\tif (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\n\t\t} else if (\n\t\t\tjpeg.slice(0, 23) == \"data:image/jpeg;base64,\" ||\n\t\t\tjpeg.slice(0, 22) == \"data:image/jpg;base64,\"\n\t\t) {\n\t\t\tjpeg = atob(jpeg.split(\",\")[1])\n\t\t\tb64 = true\n\t\t} else {\n\t\t\tthrow new Error(\"Given data is not jpeg.\")\n\t\t}\n\n\t\tvar exifStr = \"\\xff\\xe1\" + pack(\">H\", [exif.length + 2]) + exif\n\t\tvar segments = splitIntoSegments(jpeg)\n\t\tvar new_data = mergeSegments(segments, exifStr)\n\t\tif (b64) {\n\t\t\tnew_data = \"data:image/jpeg;base64,\" + btoa(new_data)\n\t\t}\n\n\t\treturn new_data\n\t}\n\n\tthat.load = function (data) {\n\t\tvar input_data\n\t\tif (typeof data == \"string\") {\n\t\t\tif (data.slice(0, 2) == \"\\xff\\xd8\") {\n\t\t\t\tinput_data = data\n\t\t\t} else if (\n\t\t\t\tdata.slice(0, 23) == \"data:image/jpeg;base64,\" ||\n\t\t\t\tdata.slice(0, 22) == \"data:image/jpg;base64,\"\n\t\t\t) {\n\t\t\t\tinput_data = atob(data.split(\",\")[1])\n\t\t\t} else if (data.slice(0, 4) == \"Exif\") {\n\t\t\t\tinput_data = data.slice(6)\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"'load' recieved invalid file data.\")\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\"'load' recieved invalid type argument.\")\n\t\t}\n\n\t\tvar exifDict = {}\n\t\tvar exif_dict = {\n\t\t\t\"0th\": {},\n\t\t\tExif: {},\n\t\t\tGPS: {},\n\t\t\tInterop: {},\n\t\t\t\"1st\": {},\n\t\t\tthumbnail: null,\n\t\t}\n\t\tvar exifReader = new ExifReader(input_data)\n\t\tif (exifReader.tiftag === null) {\n\t\t\treturn exif_dict\n\t\t}\n\n\t\tif (exifReader.tiftag.slice(0, 2) == \"\\x49\\x49\") {\n\t\t\texifReader.endian_mark = \"<\"\n\t\t} else {\n\t\t\texifReader.endian_mark = \">\"\n\t\t}\n\n\t\tvar pointer = unpack(\n\t\t\texifReader.endian_mark + \"L\",\n\t\t\texifReader.tiftag.slice(4, 8)\n\t\t)[0]\n\t\texif_dict[\"0th\"] = exifReader.get_ifd(pointer, \"0th\")\n\n\t\tvar first_ifd_pointer = exif_dict[\"0th\"][\"first_ifd_pointer\"]\n\t\tdelete exif_dict[\"0th\"][\"first_ifd_pointer\"]\n\n\t\tif (34665 in exif_dict[\"0th\"]) {\n\t\t\tpointer = exif_dict[\"0th\"][34665]\n\t\t\texif_dict[\"Exif\"] = exifReader.get_ifd(pointer, \"Exif\")\n\t\t}\n\t\tif (34853 in exif_dict[\"0th\"]) {\n\t\t\tpointer = exif_dict[\"0th\"][34853]\n\t\t\texif_dict[\"GPS\"] = exifReader.get_ifd(pointer, \"GPS\")\n\t\t}\n\t\tif (40965 in exif_dict[\"Exif\"]) {\n\t\t\tpointer = exif_dict[\"Exif\"][40965]\n\t\t\texif_dict[\"Interop\"] = exifReader.get_ifd(pointer, \"Interop\")\n\t\t}\n\t\tif (first_ifd_pointer != \"\\x00\\x00\\x00\\x00\") {\n\t\t\tpointer = unpack(exifReader.endian_mark + \"L\", first_ifd_pointer)[0]\n\t\t\texif_dict[\"1st\"] = exifReader.get_ifd(pointer, \"1st\")\n\t\t\tif (513 in exif_dict[\"1st\"] && 514 in exif_dict[\"1st\"]) {\n\t\t\t\tvar end = exif_dict[\"1st\"][513] + exif_dict[\"1st\"][514]\n\t\t\t\tvar thumb = exifReader.tiftag.slice(exif_dict[\"1st\"][513], end)\n\t\t\t\texif_dict[\"thumbnail\"] = thumb\n\t\t\t}\n\t\t}\n\n\t\treturn exif_dict\n\t}\n\n\tthat.dump = function (exif_dict_original) {\n\t\tvar TIFF_HEADER_LENGTH = 8\n\n\t\tvar exif_dict = copy(exif_dict_original)\n\t\tvar header = \"Exif\\x00\\x00\\x4d\\x4d\\x00\\x2a\\x00\\x00\\x00\\x08\"\n\t\tvar exif_is = false\n\t\tvar gps_is = false\n\t\tvar interop_is = false\n\t\tvar first_is = false\n\n\t\tvar zeroth_ifd, exif_ifd, interop_ifd, gps_ifd, first_ifd\n\n\t\tif (\"0th\" in exif_dict) {\n\t\t\tzeroth_ifd = exif_dict[\"0th\"]\n\t\t} else {\n\t\t\tzeroth_ifd = {}\n\t\t}\n\n\t\tif (\n\t\t\t(\"Exif\" in exif_dict && Object.keys(exif_dict[\"Exif\"]).length) ||\n\t\t\t(\"Interop\" in exif_dict && Object.keys(exif_dict[\"Interop\"]).length)\n\t\t) {\n\t\t\tzeroth_ifd[34665] = 1\n\t\t\texif_is = true\n\t\t\texif_ifd = exif_dict[\"Exif\"]\n\t\t\tif (\"Interop\" in exif_dict && Object.keys(exif_dict[\"Interop\"]).length) {\n\t\t\t\texif_ifd[40965] = 1\n\t\t\t\tinterop_is = true\n\t\t\t\tinterop_ifd = exif_dict[\"Interop\"]\n\t\t\t} else if (\n\t\t\t\tObject.keys(exif_ifd).indexOf(\n\t\t\t\t\tthat.ExifIFD.InteroperabilityTag.toString()\n\t\t\t\t) > -1\n\t\t\t) {\n\t\t\t\tdelete exif_ifd[40965]\n\t\t\t}\n\t\t} else if (\n\t\t\tObject.keys(zeroth_ifd).indexOf(that.ImageIFD.ExifTag.toString()) > -1\n\t\t) {\n\t\t\tdelete zeroth_ifd[34665]\n\t\t}\n\n\t\tif (\"GPS\" in exif_dict && Object.keys(exif_dict[\"GPS\"]).length) {\n\t\t\tzeroth_ifd[that.ImageIFD.GPSTag] = 1\n\t\t\tgps_is = true\n\t\t\tgps_ifd = exif_dict[\"GPS\"]\n\t\t} else if (\n\t\t\tObject.keys(zeroth_ifd).indexOf(that.ImageIFD.GPSTag.toString()) > -1\n\t\t) {\n\t\t\tdelete zeroth_ifd[that.ImageIFD.GPSTag]\n\t\t}\n\n\t\tif (\n\t\t\t\"1st\" in exif_dict &&\n\t\t\t\"thumbnail\" in exif_dict &&\n\t\t\texif_dict[\"thumbnail\"] != null\n\t\t) {\n\t\t\tfirst_is = true\n\t\t\texif_dict[\"1st\"][513] = 1\n\t\t\texif_dict[\"1st\"][514] = 1\n\t\t\tfirst_ifd = exif_dict[\"1st\"]\n\t\t}\n\n\t\tvar zeroth_set = _dict_to_bytes(zeroth_ifd, \"0th\", 0)\n\t\tvar zeroth_length =\n\t\t\tzeroth_set[0].length +\n\t\t\texif_is * 12 +\n\t\t\tgps_is * 12 +\n\t\t\t4 +\n\t\t\tzeroth_set[1].length\n\n\t\tvar exif_set,\n\t\t\texif_bytes = \"\",\n\t\t\texif_length = 0,\n\t\t\tgps_set,\n\t\t\tgps_bytes = \"\",\n\t\t\tgps_length = 0,\n\t\t\tinterop_set,\n\t\t\tinterop_bytes = \"\",\n\t\t\tinterop_length = 0,\n\t\t\tfirst_set,\n\t\t\tfirst_bytes = \"\",\n\t\t\tthumbnail\n\t\tif (exif_is) {\n\t\t\texif_set = _dict_to_bytes(exif_ifd, \"Exif\", zeroth_length)\n\t\t\texif_length = exif_set[0].length + interop_is * 12 + exif_set[1].length\n\t\t}\n\t\tif (gps_is) {\n\t\t\tgps_set = _dict_to_bytes(gps_ifd, \"GPS\", zeroth_length + exif_length)\n\t\t\tgps_bytes = gps_set.join(\"\")\n\t\t\tgps_length = gps_bytes.length\n\t\t}\n\t\tif (interop_is) {\n\t\t\tvar offset = zeroth_length + exif_length + gps_length\n\t\t\tinterop_set = _dict_to_bytes(interop_ifd, \"Interop\", offset)\n\t\t\tinterop_bytes = interop_set.join(\"\")\n\t\t\tinterop_length = interop_bytes.length\n\t\t}\n\t\tif (first_is) {\n\t\t\tvar offset = zeroth_length + exif_length + gps_length + interop_length\n\t\t\tfirst_set = _dict_to_bytes(first_ifd, \"1st\", offset)\n\t\t\tthumbnail = _get_thumbnail(exif_dict[\"thumbnail\"])\n\t\t\tif (thumbnail.length > 64000) {\n\t\t\t\tthrow new Error(\"Given thumbnail is too large. max 64kB\")\n\t\t\t}\n\t\t}\n\n\t\tvar exif_pointer = \"\",\n\t\t\tgps_pointer = \"\",\n\t\t\tinterop_pointer = \"\",\n\t\t\tfirst_ifd_pointer = \"\\x00\\x00\\x00\\x00\"\n\t\tif (exif_is) {\n\t\t\tvar pointer_value = TIFF_HEADER_LENGTH + zeroth_length\n\t\t\tvar pointer_str = pack(\">L\", [pointer_value])\n\t\t\tvar key = 34665\n\t\t\tvar key_str = pack(\">H\", [key])\n\t\t\tvar type_str = pack(\">H\", [TYPES[\"Long\"]])\n\t\t\tvar length_str = pack(\">L\", [1])\n\t\t\texif_pointer = key_str + type_str + length_str + pointer_str\n\t\t}\n\t\tif (gps_is) {\n\t\t\tvar pointer_value = TIFF_HEADER_LENGTH + zeroth_length + exif_length\n\t\t\tvar pointer_str = pack(\">L\", [pointer_value])\n\t\t\tvar key = 34853\n\t\t\tvar key_str = pack(\">H\", [key])\n\t\t\tvar type_str = pack(\">H\", [TYPES[\"Long\"]])\n\t\t\tvar length_str = pack(\">L\", [1])\n\t\t\tgps_pointer = key_str + type_str + length_str + pointer_str\n\t\t}\n\t\tif (interop_is) {\n\t\t\tvar pointer_value =\n\t\t\t\tTIFF_HEADER_LENGTH + zeroth_length + exif_length + gps_length\n\t\t\tvar pointer_str = pack(\">L\", [pointer_value])\n\t\t\tvar key = 40965\n\t\t\tvar key_str = pack(\">H\", [key])\n\t\t\tvar type_str = pack(\">H\", [TYPES[\"Long\"]])\n\t\t\tvar length_str = pack(\">L\", [1])\n\t\t\tinterop_pointer = key_str + type_str + length_str + pointer_str\n\t\t}\n\t\tif (first_is) {\n\t\t\tvar pointer_value =\n\t\t\t\tTIFF_HEADER_LENGTH +\n\t\t\t\tzeroth_length +\n\t\t\t\texif_length +\n\t\t\t\tgps_length +\n\t\t\t\tinterop_length\n\t\t\tfirst_ifd_pointer = pack(\">L\", [pointer_value])\n\t\t\tvar thumbnail_pointer =\n\t\t\t\tpointer_value + first_set[0].length + 24 + 4 + first_set[1].length\n\t\t\tvar thumbnail_p_bytes =\n\t\t\t\t\"\\x02\\x01\\x00\\x04\\x00\\x00\\x00\\x01\" + pack(\">L\", [thumbnail_pointer])\n\t\t\tvar thumbnail_length_bytes =\n\t\t\t\t\"\\x02\\x02\\x00\\x04\\x00\\x00\\x00\\x01\" + pack(\">L\", [thumbnail.length])\n\t\t\tfirst_bytes =\n\t\t\t\tfirst_set[0] +\n\t\t\t\tthumbnail_p_bytes +\n\t\t\t\tthumbnail_length_bytes +\n\t\t\t\t\"\\x00\\x00\\x00\\x00\" +\n\t\t\t\tfirst_set[1] +\n\t\t\t\tthumbnail\n\t\t}\n\n\t\tvar zeroth_bytes =\n\t\t\tzeroth_set[0] +\n\t\t\texif_pointer +\n\t\t\tgps_pointer +\n\t\t\tfirst_ifd_pointer +\n\t\t\tzeroth_set[1]\n\t\tif (exif_is) {\n\t\t\texif_bytes = exif_set[0] + interop_pointer + exif_set[1]\n\t\t}\n\n\t\treturn (\n\t\t\theader +\n\t\t\tzeroth_bytes +\n\t\t\texif_bytes +\n\t\t\tgps_bytes +\n\t\t\tinterop_bytes +\n\t\t\tfirst_bytes\n\t\t)\n\t}\n\n\tfunction copy(obj) {\n\t\treturn JSON.parse(JSON.stringify(obj))\n\t}\n\n\tfunction _get_thumbnail(jpeg) {\n\t\tvar segments = splitIntoSegments(jpeg)\n\t\twhile (\n\t\t\t\"\\xff\\xe0\" <= segments[1].slice(0, 2) &&\n\t\t\tsegments[1].slice(0, 2) <= \"\\xff\\xef\"\n\t\t) {\n\t\t\tsegments = [segments[0]].concat(segments.slice(2))\n\t\t}\n\t\treturn segments.join(\"\")\n\t}\n\n\tfunction _pack_byte(array) {\n\t\treturn pack(\">\" + nStr(\"B\", array.length), array)\n\t}\n\n\tfunction _pack_short(array) {\n\t\treturn pack(\">\" + nStr(\"H\", array.length), array)\n\t}\n\n\tfunction _pack_long(array) {\n\t\treturn pack(\">\" + nStr(\"L\", array.length), array)\n\t}\n\n\tfunction _value_to_bytes(raw_value, value_type, offset) {\n\t\tvar four_bytes_over = \"\"\n\t\tvar value_str = \"\"\n\t\tvar length, new_value, num, den\n\n\t\tif (value_type == \"Byte\") {\n\t\t\tlength = raw_value.length\n\t\t\tif (length <= 4) {\n\t\t\t\tvalue_str = _pack_byte(raw_value) + nStr(\"\\x00\", 4 - length)\n\t\t\t} else {\n\t\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\t\tfour_bytes_over = _pack_byte(raw_value)\n\t\t\t}\n\t\t} else if (value_type == \"Short\") {\n\t\t\tlength = raw_value.length\n\t\t\tif (length <= 2) {\n\t\t\t\tvalue_str = _pack_short(raw_value) + nStr(\"\\x00\\x00\", 2 - length)\n\t\t\t} else {\n\t\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\t\tfour_bytes_over = _pack_short(raw_value)\n\t\t\t}\n\t\t} else if (value_type == \"Long\") {\n\t\t\tlength = raw_value.length\n\t\t\tif (length <= 1) {\n\t\t\t\tvalue_str = _pack_long(raw_value)\n\t\t\t} else {\n\t\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\t\tfour_bytes_over = _pack_long(raw_value)\n\t\t\t}\n\t\t} else if (value_type == \"Ascii\") {\n\t\t\tnew_value = raw_value + \"\\x00\"\n\t\t\tlength = new_value.length\n\t\t\tif (length > 4) {\n\t\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\t\tfour_bytes_over = new_value\n\t\t\t} else {\n\t\t\t\tvalue_str = new_value + nStr(\"\\x00\", 4 - length)\n\t\t\t}\n\t\t} else if (value_type == \"Rational\") {\n\t\t\tif (typeof raw_value[0] == \"number\") {\n\t\t\t\tlength = 1\n\t\t\t\tnum = raw_value[0]\n\t\t\t\tden = raw_value[1]\n\t\t\t\tnew_value = pack(\">L\", [num]) + pack(\">L\", [den])\n\t\t\t} else {\n\t\t\t\tlength = raw_value.length\n\t\t\t\tnew_value = \"\"\n\t\t\t\tfor (var n = 0; n < length; n++) {\n\t\t\t\t\tnum = raw_value[n][0]\n\t\t\t\t\tden = raw_value[n][1]\n\t\t\t\t\tnew_value += pack(\">L\", [num]) + pack(\">L\", [den])\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\tfour_bytes_over = new_value\n\t\t} else if (value_type == \"SRational\") {\n\t\t\tif (typeof raw_value[0] == \"number\") {\n\t\t\t\tlength = 1\n\t\t\t\tnum = raw_value[0]\n\t\t\t\tden = raw_value[1]\n\t\t\t\tnew_value = pack(\">l\", [num]) + pack(\">l\", [den])\n\t\t\t} else {\n\t\t\t\tlength = raw_value.length\n\t\t\t\tnew_value = \"\"\n\t\t\t\tfor (var n = 0; n < length; n++) {\n\t\t\t\t\tnum = raw_value[n][0]\n\t\t\t\t\tden = raw_value[n][1]\n\t\t\t\t\tnew_value += pack(\">l\", [num]) + pack(\">l\", [den])\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\tfour_bytes_over = new_value\n\t\t} else if (value_type == \"Undefined\") {\n\t\t\tlength = raw_value.length\n\t\t\tif (length > 4) {\n\t\t\t\tvalue_str = pack(\">L\", [offset])\n\t\t\t\tfour_bytes_over = raw_value\n\t\t\t} else {\n\t\t\t\tvalue_str = raw_value + nStr(\"\\x00\", 4 - length)\n\t\t\t}\n\t\t}\n\n\t\tvar length_str = pack(\">L\", [length])\n\n\t\treturn [length_str, value_str, four_bytes_over]\n\t}\n\n\tfunction _dict_to_bytes(ifd_dict, ifd, ifd_offset) {\n\t\tvar TIFF_HEADER_LENGTH = 8\n\t\tvar tag_count = Object.keys(ifd_dict).length\n\t\tvar entry_header = pack(\">H\", [tag_count])\n\t\tvar entries_length\n\t\tif ([\"0th\", \"1st\"].indexOf(ifd) > -1) {\n\t\t\tentries_length = 2 + tag_count * 12 + 4\n\t\t} else {\n\t\t\tentries_length = 2 + tag_count * 12\n\t\t}\n\t\tvar entries = \"\"\n\t\tvar values = \"\"\n\t\tvar key\n\n\t\tfor (var key in ifd_dict) {\n\t\t\tif (typeof key == \"string\") {\n\t\t\t\tkey = parseInt(key)\n\t\t\t}\n\t\t\tif (ifd == \"0th\" && [34665, 34853].indexOf(key) > -1) {\n\t\t\t\tcontinue\n\t\t\t} else if (ifd == \"Exif\" && key == 40965) {\n\t\t\t\tcontinue\n\t\t\t} else if (ifd == \"1st\" && [513, 514].indexOf(key) > -1) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tvar raw_value = ifd_dict[key]\n\t\t\tvar key_str = pack(\">H\", [key])\n\t\t\tvar value_type = TAGS[ifd][key][\"type\"]\n\t\t\tvar type_str = pack(\">H\", [TYPES[value_type]])\n\n\t\t\tif (typeof raw_value == \"number\") {\n\t\t\t\traw_value = [raw_value]\n\t\t\t}\n\t\t\tvar offset =\n\t\t\t\tTIFF_HEADER_LENGTH + entries_length + ifd_offset + values.length\n\t\t\tvar b = _value_to_bytes(raw_value, value_type, offset)\n\t\t\tvar length_str = b[0]\n\t\t\tvar value_str = b[1]\n\t\t\tvar four_bytes_over = b[2]\n\n\t\t\tentries += key_str + type_str + length_str + value_str\n\t\t\tvalues += four_bytes_over\n\t\t}\n\n\t\treturn [entry_header + entries, values]\n\t}\n\n\tfunction ExifReader(data) {\n\t\tvar segments, app1\n\t\tif (data.slice(0, 2) == \"\\xff\\xd8\") {\n\t\t\t// JPEG\n\t\t\tsegments = splitIntoSegments(data)\n\t\t\tapp1 = getExifSeg(segments)\n\t\t\tif (app1) {\n\t\t\t\tthis.tiftag = app1.slice(10)\n\t\t\t} else {\n\t\t\t\tthis.tiftag = null\n\t\t\t}\n\t\t} else if ([\"\\x49\\x49\", \"\\x4d\\x4d\"].indexOf(data.slice(0, 2)) > -1) {\n\t\t\t// TIFF\n\t\t\tthis.tiftag = data\n\t\t} else if (data.slice(0, 4) == \"Exif\") {\n\t\t\t// Exif\n\t\t\tthis.tiftag = data.slice(6)\n\t\t} else {\n\t\t\tthrow new Error(\"Given file is neither JPEG nor TIFF.\")\n\t\t}\n\t}\n\n\tExifReader.prototype = {\n\t\tget_ifd: function (pointer, ifd_name) {\n\t\t\tvar ifd_dict = {}\n\t\t\tvar tag_count = unpack(\n\t\t\t\tthis.endian_mark + \"H\",\n\t\t\t\tthis.tiftag.slice(pointer, pointer + 2)\n\t\t\t)[0]\n\t\t\tvar offset = pointer + 2\n\t\t\tvar t\n\t\t\tif ([\"0th\", \"1st\"].indexOf(ifd_name) > -1) {\n\t\t\t\tt = \"Image\"\n\t\t\t} else {\n\t\t\t\tt = ifd_name\n\t\t\t}\n\n\t\t\tfor (var x = 0; x < tag_count; x++) {\n\t\t\t\tpointer = offset + 12 * x\n\t\t\t\tvar tag = unpack(\n\t\t\t\t\tthis.endian_mark + \"H\",\n\t\t\t\t\tthis.tiftag.slice(pointer, pointer + 2)\n\t\t\t\t)[0]\n\t\t\t\tvar value_type = unpack(\n\t\t\t\t\tthis.endian_mark + \"H\",\n\t\t\t\t\tthis.tiftag.slice(pointer + 2, pointer + 4)\n\t\t\t\t)[0]\n\t\t\t\tvar value_num = unpack(\n\t\t\t\t\tthis.endian_mark + \"L\",\n\t\t\t\t\tthis.tiftag.slice(pointer + 4, pointer + 8)\n\t\t\t\t)[0]\n\t\t\t\tvar value = this.tiftag.slice(pointer + 8, pointer + 12)\n\n\t\t\t\tvar v_set = [value_type, value_num, value]\n\t\t\t\tif (tag in TAGS[t]) {\n\t\t\t\t\tifd_dict[tag] = this.convert_value(v_set)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ifd_name == \"0th\") {\n\t\t\t\tpointer = offset + 12 * tag_count\n\t\t\t\tifd_dict[\"first_ifd_pointer\"] = this.tiftag.slice(pointer, pointer + 4)\n\t\t\t}\n\n\t\t\treturn ifd_dict\n\t\t},\n\n\t\tconvert_value: function (val) {\n\t\t\tvar data = null\n\t\t\tvar t = val[0]\n\t\t\tvar length = val[1]\n\t\t\tvar value = val[2]\n\t\t\tvar pointer\n\n\t\t\tif (t == 1) {\n\t\t\t\t// BYTE\n\t\t\t\tif (length > 4) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"B\", length),\n\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + length)\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"B\", length),\n\t\t\t\t\t\tvalue.slice(0, length)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t} else if (t == 2) {\n\t\t\t\t// ASCII\n\t\t\t\tif (length > 4) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = this.tiftag.slice(pointer, pointer + length - 1)\n\t\t\t\t} else {\n\t\t\t\t\tdata = value.slice(0, length - 1)\n\t\t\t\t}\n\t\t\t} else if (t == 3) {\n\t\t\t\t// SHORT\n\t\t\t\tif (length > 2) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"H\", length),\n\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + length * 2)\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"H\", length),\n\t\t\t\t\t\tvalue.slice(0, length * 2)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t} else if (t == 4) {\n\t\t\t\t// LONG\n\t\t\t\tif (length > 1) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"L\", length),\n\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + length * 4)\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tdata = unpack(this.endian_mark + nStr(\"L\", length), value)\n\t\t\t\t}\n\t\t\t} else if (t == 5) {\n\t\t\t\t// RATIONAL\n\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\tif (length > 1) {\n\t\t\t\t\tdata = []\n\t\t\t\t\tfor (var x = 0; x < length; x++) {\n\t\t\t\t\t\tdata.push([\n\t\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\t\tthis.endian_mark + \"L\",\n\t\t\t\t\t\t\t\tthis.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8)\n\t\t\t\t\t\t\t)[0],\n\t\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\t\tthis.endian_mark + \"L\",\n\t\t\t\t\t\t\t\tthis.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8)\n\t\t\t\t\t\t\t)[0],\n\t\t\t\t\t\t])\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdata = [\n\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\tthis.endian_mark + \"L\",\n\t\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + 4)\n\t\t\t\t\t\t)[0],\n\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\tthis.endian_mark + \"L\",\n\t\t\t\t\t\t\tthis.tiftag.slice(pointer + 4, pointer + 8)\n\t\t\t\t\t\t)[0],\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} else if (t == 7) {\n\t\t\t\t// UNDEFINED BYTES\n\t\t\t\tif (length > 4) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = this.tiftag.slice(pointer, pointer + length)\n\t\t\t\t} else {\n\t\t\t\t\tdata = value.slice(0, length)\n\t\t\t\t}\n\t\t\t} else if (t == 9) {\n\t\t\t\t// SLONG\n\t\t\t\tif (length > 1) {\n\t\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\t\tdata = unpack(\n\t\t\t\t\t\tthis.endian_mark + nStr(\"l\", length),\n\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + length * 4)\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tdata = unpack(this.endian_mark + nStr(\"l\", length), value)\n\t\t\t\t}\n\t\t\t} else if (t == 10) {\n\t\t\t\t// SRATIONAL\n\t\t\t\tpointer = unpack(this.endian_mark + \"L\", value)[0]\n\t\t\t\tif (length > 1) {\n\t\t\t\t\tdata = []\n\t\t\t\t\tfor (var x = 0; x < length; x++) {\n\t\t\t\t\t\tdata.push([\n\t\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\t\tthis.endian_mark + \"l\",\n\t\t\t\t\t\t\t\tthis.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8)\n\t\t\t\t\t\t\t)[0],\n\t\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\t\tthis.endian_mark + \"l\",\n\t\t\t\t\t\t\t\tthis.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8)\n\t\t\t\t\t\t\t)[0],\n\t\t\t\t\t\t])\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdata = [\n\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\tthis.endian_mark + \"l\",\n\t\t\t\t\t\t\tthis.tiftag.slice(pointer, pointer + 4)\n\t\t\t\t\t\t)[0],\n\t\t\t\t\t\tunpack(\n\t\t\t\t\t\t\tthis.endian_mark + \"l\",\n\t\t\t\t\t\t\tthis.tiftag.slice(pointer + 4, pointer + 8)\n\t\t\t\t\t\t)[0],\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"Exif might be wrong. Got incorrect value \" +\n\t\t\t\t\t\t\"type to decode. type:\" +\n\t\t\t\t\t\tt\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (data instanceof Array && data.length == 1) {\n\t\t\t\treturn data[0]\n\t\t\t} else {\n\t\t\t\treturn data\n\t\t\t}\n\t\t},\n\t}\n\n\tif (typeof window !== \"undefined\" && typeof window.btoa === \"function\") {\n\t\tvar btoa = window.btoa\n\t}\n\tif (typeof btoa === \"undefined\") {\n\t\tvar btoa = function (input) {\n\t\t\tvar output = \"\"\n\t\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4\n\t\t\tvar i = 0\n\t\t\tvar keyStr =\n\t\t\t\t\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n\n\t\t\twhile (i < input.length) {\n\t\t\t\tchr1 = input.charCodeAt(i++)\n\t\t\t\tchr2 = input.charCodeAt(i++)\n\t\t\t\tchr3 = input.charCodeAt(i++)\n\n\t\t\t\tenc1 = chr1 >> 2\n\t\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4)\n\t\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6)\n\t\t\t\tenc4 = chr3 & 63\n\n\t\t\t\tif (isNaN(chr2)) {\n\t\t\t\t\tenc3 = enc4 = 64\n\t\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\t\tenc4 = 64\n\t\t\t\t}\n\n\t\t\t\toutput =\n\t\t\t\t\toutput +\n\t\t\t\t\tkeyStr.charAt(enc1) +\n\t\t\t\t\tkeyStr.charAt(enc2) +\n\t\t\t\t\tkeyStr.charAt(enc3) +\n\t\t\t\t\tkeyStr.charAt(enc4)\n\t\t\t}\n\n\t\t\treturn output\n\t\t}\n\t}\n\n\tif (typeof window !== \"undefined\" && typeof window.atob === \"function\") {\n\t\tvar atob = window.atob\n\t}\n\tif (typeof atob === \"undefined\") {\n\t\tvar atob = function (input) {\n\t\t\tvar output = \"\"\n\t\t\tvar chr1, chr2, chr3\n\t\t\tvar enc1, enc2, enc3, enc4\n\t\t\tvar i = 0\n\t\t\tvar keyStr =\n\t\t\t\t\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n\n\t\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\")\n\n\t\t\twhile (i < input.length) {\n\t\t\t\tenc1 = keyStr.indexOf(input.charAt(i++))\n\t\t\t\tenc2 = keyStr.indexOf(input.charAt(i++))\n\t\t\t\tenc3 = keyStr.indexOf(input.charAt(i++))\n\t\t\t\tenc4 = keyStr.indexOf(input.charAt(i++))\n\n\t\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4)\n\t\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2)\n\t\t\t\tchr3 = ((enc3 & 3) << 6) | enc4\n\n\t\t\t\toutput = output + String.fromCharCode(chr1)\n\n\t\t\t\tif (enc3 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr2)\n\t\t\t\t}\n\t\t\t\tif (enc4 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr3)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output\n\t\t}\n\t}\n\n\tfunction getImageSize(imageArray) {\n\t\t// eslint-disable-next-line\n\t\tvar segments = slice2Segments(imageArray)\n\t\tvar seg,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tSOF = [192, 193, 194, 195, 197, 198, 199, 201, 202, 203, 205, 206, 207]\n\n\t\tfor (var x = 0; x < segments.length; x++) {\n\t\t\tseg = segments[x]\n\t\t\tif (SOF.indexOf(seg[1]) >= 0) {\n\t\t\t\theight = seg[5] * 256 + seg[6]\n\t\t\t\twidth = seg[7] * 256 + seg[8]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\treturn [width, height]\n\t}\n\n\tfunction pack(mark, array) {\n\t\tif (!(array instanceof Array)) {\n\t\t\tthrow new Error(\"'pack' error. Got invalid type argument.\")\n\t\t}\n\t\tif (mark.length - 1 != array.length) {\n\t\t\tthrow new Error(\n\t\t\t\t\"'pack' error. \" +\n\t\t\t\t\t(mark.length - 1) +\n\t\t\t\t\t\" marks, \" +\n\t\t\t\t\tarray.length +\n\t\t\t\t\t\" elements.\"\n\t\t\t)\n\t\t}\n\n\t\tvar littleEndian\n\t\tif (mark[0] == \"<\") {\n\t\t\tlittleEndian = true\n\t\t} else if (mark[0] == \">\") {\n\t\t\tlittleEndian = false\n\t\t} else {\n\t\t\tthrow new Error(\"\")\n\t\t}\n\t\tvar packed = \"\"\n\t\tvar p = 1\n\t\tvar val = null\n\t\tvar c = null\n\t\tvar valStr = null\n\n\t\twhile ((c = mark[p])) {\n\t\t\tif (c.toLowerCase() == \"b\") {\n\t\t\t\tval = array[p - 1]\n\t\t\t\tif (c == \"b\" && val < 0) {\n\t\t\t\t\tval += 0x100\n\t\t\t\t}\n\t\t\t\tif (val > 0xff || val < 0) {\n\t\t\t\t\tthrow new Error(\"'pack' error.\")\n\t\t\t\t} else {\n\t\t\t\t\tvalStr = String.fromCharCode(val)\n\t\t\t\t}\n\t\t\t} else if (c == \"H\") {\n\t\t\t\tval = array[p - 1]\n\t\t\t\tif (val > 0xffff || val < 0) {\n\t\t\t\t\tthrow new Error(\"'pack' error.\")\n\t\t\t\t} else {\n\t\t\t\t\tvalStr =\n\t\t\t\t\t\tString.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\n\t\t\t\t\t\tString.fromCharCode(val % 0x100)\n\t\t\t\t\tif (littleEndian) {\n\t\t\t\t\t\tvalStr = valStr.split(\"\").reverse().join(\"\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (c.toLowerCase() == \"l\") {\n\t\t\t\tval = array[p - 1]\n\t\t\t\tif (c == \"l\" && val < 0) {\n\t\t\t\t\tval += 0x100000000\n\t\t\t\t}\n\t\t\t\tif (val > 0xffffffff || val < 0) {\n\t\t\t\t\tthrow new Error(\"'pack' error.\")\n\t\t\t\t} else {\n\t\t\t\t\tvalStr =\n\t\t\t\t\t\tString.fromCharCode(Math.floor(val / 0x1000000)) +\n\t\t\t\t\t\tString.fromCharCode(Math.floor((val % 0x1000000) / 0x10000)) +\n\t\t\t\t\t\tString.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\n\t\t\t\t\t\tString.fromCharCode(val % 0x100)\n\t\t\t\t\tif (littleEndian) {\n\t\t\t\t\t\tvalStr = valStr.split(\"\").reverse().join(\"\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"'pack' error.\")\n\t\t\t}\n\n\t\t\tpacked += valStr\n\t\t\tp += 1\n\t\t}\n\n\t\treturn packed\n\t}\n\n\tfunction unpack(mark, str) {\n\t\tif (typeof str != \"string\") {\n\t\t\tthrow new Error(\"'unpack' error. Got invalid type argument.\")\n\t\t}\n\t\tvar l = 0\n\t\tfor (var markPointer = 1; markPointer < mark.length; markPointer++) {\n\t\t\tif (mark[markPointer].toLowerCase() == \"b\") {\n\t\t\t\tl += 1\n\t\t\t} else if (mark[markPointer].toLowerCase() == \"h\") {\n\t\t\t\tl += 2\n\t\t\t} else if (mark[markPointer].toLowerCase() == \"l\") {\n\t\t\t\tl += 4\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"'unpack' error. Got invalid mark.\")\n\t\t\t}\n\t\t}\n\n\t\tif (l != str.length) {\n\t\t\tthrow new Error(\n\t\t\t\t\"'unpack' error. Mismatch between symbol and string length. \" +\n\t\t\t\t\tl +\n\t\t\t\t\t\":\" +\n\t\t\t\t\tstr.length\n\t\t\t)\n\t\t}\n\n\t\tvar littleEndian\n\t\tif (mark[0] == \"<\") {\n\t\t\tlittleEndian = true\n\t\t} else if (mark[0] == \">\") {\n\t\t\tlittleEndian = false\n\t\t} else {\n\t\t\tthrow new Error(\"'unpack' error.\")\n\t\t}\n\t\tvar unpacked = []\n\t\tvar strPointer = 0\n\t\tvar p = 1\n\t\tvar val = null\n\t\tvar c = null\n\t\tvar length = null\n\t\tvar sliced = \"\"\n\n\t\twhile ((c = mark[p])) {\n\t\t\tif (c.toLowerCase() == \"b\") {\n\t\t\t\tlength = 1\n\t\t\t\tsliced = str.slice(strPointer, strPointer + length)\n\t\t\t\tval = sliced.charCodeAt(0)\n\t\t\t\tif (c == \"b\" && val >= 0x80) {\n\t\t\t\t\tval -= 0x100\n\t\t\t\t}\n\t\t\t} else if (c == \"H\") {\n\t\t\t\tlength = 2\n\t\t\t\tsliced = str.slice(strPointer, strPointer + length)\n\t\t\t\tif (littleEndian) {\n\t\t\t\t\tsliced = sliced.split(\"\").reverse().join(\"\")\n\t\t\t\t}\n\t\t\t\tval = sliced.charCodeAt(0) * 0x100 + sliced.charCodeAt(1)\n\t\t\t} else if (c.toLowerCase() == \"l\") {\n\t\t\t\tlength = 4\n\t\t\t\tsliced = str.slice(strPointer, strPointer + length)\n\t\t\t\tif (littleEndian) {\n\t\t\t\t\tsliced = sliced.split(\"\").reverse().join(\"\")\n\t\t\t\t}\n\t\t\t\tval =\n\t\t\t\t\tsliced.charCodeAt(0) * 0x1000000 +\n\t\t\t\t\tsliced.charCodeAt(1) * 0x10000 +\n\t\t\t\t\tsliced.charCodeAt(2) * 0x100 +\n\t\t\t\t\tsliced.charCodeAt(3)\n\t\t\t\tif (c == \"l\" && val >= 0x80000000) {\n\t\t\t\t\tval -= 0x100000000\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"'unpack' error. \" + c)\n\t\t\t}\n\n\t\t\tunpacked.push(val)\n\t\t\tstrPointer += length\n\t\t\tp += 1\n\t\t}\n\n\t\treturn unpacked\n\t}\n\n\tfunction nStr(ch, num) {\n\t\tvar str = \"\"\n\t\tfor (var i = 0; i < num; i++) {\n\t\t\tstr += ch\n\t\t}\n\t\treturn str\n\t}\n\n\tfunction splitIntoSegments(data) {\n\t\tif (data.slice(0, 2) != \"\\xff\\xd8\") {\n\t\t\tthrow new Error(\"Given data isn't JPEG.\")\n\t\t}\n\n\t\tvar head = 2\n\t\tvar segments = [\"\\xff\\xd8\"]\n\t\twhile (true) {\n\t\t\tif (data.slice(head, head + 2) == \"\\xff\\xda\") {\n\t\t\t\tsegments.push(data.slice(head))\n\t\t\t\tbreak\n\t\t\t} else {\n\t\t\t\tvar length = unpack(\">H\", data.slice(head + 2, head + 4))[0]\n\t\t\t\tvar endPoint = head + length + 2\n\t\t\t\tsegments.push(data.slice(head, endPoint))\n\t\t\t\thead = endPoint\n\t\t\t}\n\n\t\t\tif (head >= data.length) {\n\t\t\t\tthrow new Error(\"Wrong JPEG data.\")\n\t\t\t}\n\t\t}\n\t\treturn segments\n\t}\n\n\tfunction getExifSeg(segments) {\n\t\tvar seg\n\t\tfor (var i = 0; i < segments.length; i++) {\n\t\t\tseg = segments[i]\n\t\t\tif (seg.slice(0, 2) == \"\\xff\\xe1\" && seg.slice(4, 10) == \"Exif\\x00\\x00\") {\n\t\t\t\treturn seg\n\t\t\t}\n\t\t}\n\t\treturn null\n\t}\n\n\tfunction mergeSegments(segments, exif) {\n\t\tvar hasExifSegment = false\n\t\tvar additionalAPP1ExifSegments = []\n\n\t\tsegments.forEach(function (segment, i) {\n\t\t\t// Replace first occurence of APP1:Exif segment\n\t\t\tif (\n\t\t\t\tsegment.slice(0, 2) == \"\\xff\\xe1\" &&\n\t\t\t\tsegment.slice(4, 10) == \"Exif\\x00\\x00\"\n\t\t\t) {\n\t\t\t\tif (!hasExifSegment) {\n\t\t\t\t\tsegments[i] = exif\n\t\t\t\t\thasExifSegment = true\n\t\t\t\t} else {\n\t\t\t\t\tadditionalAPP1ExifSegments.unshift(i)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\t// Remove additional occurences of APP1:Exif segment\n\t\tadditionalAPP1ExifSegments.forEach(function (segmentIndex) {\n\t\t\tsegments.splice(segmentIndex, 1)\n\t\t})\n\n\t\tif (!hasExifSegment && exif) {\n\t\t\tsegments = [segments[0], exif].concat(segments.slice(1))\n\t\t}\n\n\t\treturn segments.join(\"\")\n\t}\n\n\tfunction toHex(str) {\n\t\tvar hexStr = \"\"\n\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\tvar h = str.charCodeAt(i)\n\t\t\tvar hex = (h < 10 ? \"0\" : \"\") + h.toString(16)\n\t\t\thexStr += hex + \" \"\n\t\t}\n\t\treturn hexStr\n\t}\n\n\tvar TYPES = {\n\t\tByte: 1,\n\t\tAscii: 2,\n\t\tShort: 3,\n\t\tLong: 4,\n\t\tRational: 5,\n\t\tUndefined: 7,\n\t\tSLong: 9,\n\t\tSRational: 10,\n\t}\n\n\tvar TAGS = {\n\t\tImage: {\n\t\t\t11: {\n\t\t\t\tname: \"ProcessingSoftware\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t254: {\n\t\t\t\tname: \"NewSubfileType\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t255: {\n\t\t\t\tname: \"SubfileType\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t256: {\n\t\t\t\tname: \"ImageWidth\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t257: {\n\t\t\t\tname: \"ImageLength\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t258: {\n\t\t\t\tname: \"BitsPerSample\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t259: {\n\t\t\t\tname: \"Compression\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t262: {\n\t\t\t\tname: \"PhotometricInterpretation\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t263: {\n\t\t\t\tname: \"Threshholding\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t264: {\n\t\t\t\tname: \"CellWidth\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t265: {\n\t\t\t\tname: \"CellLength\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t266: {\n\t\t\t\tname: \"FillOrder\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t269: {\n\t\t\t\tname: \"DocumentName\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t270: {\n\t\t\t\tname: \"ImageDescription\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t271: {\n\t\t\t\tname: \"Make\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t272: {\n\t\t\t\tname: \"Model\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t273: {\n\t\t\t\tname: \"StripOffsets\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t274: {\n\t\t\t\tname: \"Orientation\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t277: {\n\t\t\t\tname: \"SamplesPerPixel\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t278: {\n\t\t\t\tname: \"RowsPerStrip\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t279: {\n\t\t\t\tname: \"StripByteCounts\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t282: {\n\t\t\t\tname: \"XResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t283: {\n\t\t\t\tname: \"YResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t284: {\n\t\t\t\tname: \"PlanarConfiguration\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t290: {\n\t\t\t\tname: \"GrayResponseUnit\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t291: {\n\t\t\t\tname: \"GrayResponseCurve\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t292: {\n\t\t\t\tname: \"T4Options\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t293: {\n\t\t\t\tname: \"T6Options\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t296: {\n\t\t\t\tname: \"ResolutionUnit\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t301: {\n\t\t\t\tname: \"TransferFunction\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t305: {\n\t\t\t\tname: \"Software\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t306: {\n\t\t\t\tname: \"DateTime\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t315: {\n\t\t\t\tname: \"Artist\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t316: {\n\t\t\t\tname: \"HostComputer\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t317: {\n\t\t\t\tname: \"Predictor\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t318: {\n\t\t\t\tname: \"WhitePoint\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t319: {\n\t\t\t\tname: \"PrimaryChromaticities\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t320: {\n\t\t\t\tname: \"ColorMap\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t321: {\n\t\t\t\tname: \"HalftoneHints\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t322: {\n\t\t\t\tname: \"TileWidth\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t323: {\n\t\t\t\tname: \"TileLength\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t324: {\n\t\t\t\tname: \"TileOffsets\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t325: {\n\t\t\t\tname: \"TileByteCounts\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t330: {\n\t\t\t\tname: \"SubIFDs\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t332: {\n\t\t\t\tname: \"InkSet\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t333: {\n\t\t\t\tname: \"InkNames\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t334: {\n\t\t\t\tname: \"NumberOfInks\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t336: {\n\t\t\t\tname: \"DotRange\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t337: {\n\t\t\t\tname: \"TargetPrinter\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t338: {\n\t\t\t\tname: \"ExtraSamples\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t339: {\n\t\t\t\tname: \"SampleFormat\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t340: {\n\t\t\t\tname: \"SMinSampleValue\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t341: {\n\t\t\t\tname: \"SMaxSampleValue\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t342: {\n\t\t\t\tname: \"TransferRange\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t343: {\n\t\t\t\tname: \"ClipPath\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t344: {\n\t\t\t\tname: \"XClipPathUnits\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t345: {\n\t\t\t\tname: \"YClipPathUnits\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t346: {\n\t\t\t\tname: \"Indexed\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t347: {\n\t\t\t\tname: \"JPEGTables\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t351: {\n\t\t\t\tname: \"OPIProxy\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t512: {\n\t\t\t\tname: \"JPEGProc\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t513: {\n\t\t\t\tname: \"JPEGInterchangeFormat\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t514: {\n\t\t\t\tname: \"JPEGInterchangeFormatLength\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t515: {\n\t\t\t\tname: \"JPEGRestartInterval\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t517: {\n\t\t\t\tname: \"JPEGLosslessPredictors\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t518: {\n\t\t\t\tname: \"JPEGPointTransforms\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t519: {\n\t\t\t\tname: \"JPEGQTables\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t520: {\n\t\t\t\tname: \"JPEGDCTables\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t521: {\n\t\t\t\tname: \"JPEGACTables\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t529: {\n\t\t\t\tname: \"YCbCrCoefficients\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t530: {\n\t\t\t\tname: \"YCbCrSubSampling\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t531: {\n\t\t\t\tname: \"YCbCrPositioning\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t532: {\n\t\t\t\tname: \"ReferenceBlackWhite\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t700: {\n\t\t\t\tname: \"XMLPacket\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t18246: {\n\t\t\t\tname: \"Rating\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t18249: {\n\t\t\t\tname: \"RatingPercent\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t32781: {\n\t\t\t\tname: \"ImageID\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t33421: {\n\t\t\t\tname: \"CFARepeatPatternDim\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t33422: {\n\t\t\t\tname: \"CFAPattern\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t33423: {\n\t\t\t\tname: \"BatteryLevel\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t33432: {\n\t\t\t\tname: \"Copyright\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t33434: {\n\t\t\t\tname: \"ExposureTime\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t34377: {\n\t\t\t\tname: \"ImageResources\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t34665: {\n\t\t\t\tname: \"ExifTag\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34675: {\n\t\t\t\tname: \"InterColorProfile\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t34853: {\n\t\t\t\tname: \"GPSTag\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34857: {\n\t\t\t\tname: \"Interlace\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t34858: {\n\t\t\t\tname: \"TimeZoneOffset\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34859: {\n\t\t\t\tname: \"SelfTimerMode\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37387: {\n\t\t\t\tname: \"FlashEnergy\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37388: {\n\t\t\t\tname: \"SpatialFrequencyResponse\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t37389: {\n\t\t\t\tname: \"Noise\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t37390: {\n\t\t\t\tname: \"FocalPlaneXResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37391: {\n\t\t\t\tname: \"FocalPlaneYResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37392: {\n\t\t\t\tname: \"FocalPlaneResolutionUnit\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37393: {\n\t\t\t\tname: \"ImageNumber\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t37394: {\n\t\t\t\tname: \"SecurityClassification\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37395: {\n\t\t\t\tname: \"ImageHistory\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37397: {\n\t\t\t\tname: \"ExposureIndex\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37398: {\n\t\t\t\tname: \"TIFFEPStandardID\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t37399: {\n\t\t\t\tname: \"SensingMethod\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t40091: {\n\t\t\t\tname: \"XPTitle\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t40092: {\n\t\t\t\tname: \"XPComment\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t40093: {\n\t\t\t\tname: \"XPAuthor\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t40094: {\n\t\t\t\tname: \"XPKeywords\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t40095: {\n\t\t\t\tname: \"XPSubject\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50341: {\n\t\t\t\tname: \"PrintImageMatching\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50706: {\n\t\t\t\tname: \"DNGVersion\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50707: {\n\t\t\t\tname: \"DNGBackwardVersion\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50708: {\n\t\t\t\tname: \"UniqueCameraModel\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t50709: {\n\t\t\t\tname: \"LocalizedCameraModel\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50710: {\n\t\t\t\tname: \"CFAPlaneColor\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50711: {\n\t\t\t\tname: \"CFALayout\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50712: {\n\t\t\t\tname: \"LinearizationTable\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50713: {\n\t\t\t\tname: \"BlackLevelRepeatDim\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50714: {\n\t\t\t\tname: \"BlackLevel\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50715: {\n\t\t\t\tname: \"BlackLevelDeltaH\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50716: {\n\t\t\t\tname: \"BlackLevelDeltaV\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50717: {\n\t\t\t\tname: \"WhiteLevel\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50718: {\n\t\t\t\tname: \"DefaultScale\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50719: {\n\t\t\t\tname: \"DefaultCropOrigin\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50720: {\n\t\t\t\tname: \"DefaultCropSize\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50721: {\n\t\t\t\tname: \"ColorMatrix1\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50722: {\n\t\t\t\tname: \"ColorMatrix2\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50723: {\n\t\t\t\tname: \"CameraCalibration1\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50724: {\n\t\t\t\tname: \"CameraCalibration2\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50725: {\n\t\t\t\tname: \"ReductionMatrix1\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50726: {\n\t\t\t\tname: \"ReductionMatrix2\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50727: {\n\t\t\t\tname: \"AnalogBalance\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50728: {\n\t\t\t\tname: \"AsShotNeutral\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50729: {\n\t\t\t\tname: \"AsShotWhiteXY\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50730: {\n\t\t\t\tname: \"BaselineExposure\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50731: {\n\t\t\t\tname: \"BaselineNoise\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50732: {\n\t\t\t\tname: \"BaselineSharpness\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50733: {\n\t\t\t\tname: \"BayerGreenSplit\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50734: {\n\t\t\t\tname: \"LinearResponseLimit\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50735: {\n\t\t\t\tname: \"CameraSerialNumber\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t50736: {\n\t\t\t\tname: \"LensInfo\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50737: {\n\t\t\t\tname: \"ChromaBlurRadius\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50738: {\n\t\t\t\tname: \"AntiAliasStrength\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50739: {\n\t\t\t\tname: \"ShadowScale\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50740: {\n\t\t\t\tname: \"DNGPrivateData\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50741: {\n\t\t\t\tname: \"MakerNoteSafety\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50778: {\n\t\t\t\tname: \"CalibrationIlluminant1\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50779: {\n\t\t\t\tname: \"CalibrationIlluminant2\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50780: {\n\t\t\t\tname: \"BestQualityScale\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50781: {\n\t\t\t\tname: \"RawDataUniqueID\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50827: {\n\t\t\t\tname: \"OriginalRawFileName\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50828: {\n\t\t\t\tname: \"OriginalRawFileData\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50829: {\n\t\t\t\tname: \"ActiveArea\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50830: {\n\t\t\t\tname: \"MaskedAreas\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50831: {\n\t\t\t\tname: \"AsShotICCProfile\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50832: {\n\t\t\t\tname: \"AsShotPreProfileMatrix\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50833: {\n\t\t\t\tname: \"CurrentICCProfile\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50834: {\n\t\t\t\tname: \"CurrentPreProfileMatrix\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50879: {\n\t\t\t\tname: \"ColorimetricReference\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t50931: {\n\t\t\t\tname: \"CameraCalibrationSignature\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50932: {\n\t\t\t\tname: \"ProfileCalibrationSignature\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50934: {\n\t\t\t\tname: \"AsShotProfileName\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50935: {\n\t\t\t\tname: \"NoiseReductionApplied\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t50936: {\n\t\t\t\tname: \"ProfileName\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50937: {\n\t\t\t\tname: \"ProfileHueSatMapDims\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50938: {\n\t\t\t\tname: \"ProfileHueSatMapData1\",\n\t\t\t\ttype: \"Float\",\n\t\t\t},\n\t\t\t50939: {\n\t\t\t\tname: \"ProfileHueSatMapData2\",\n\t\t\t\ttype: \"Float\",\n\t\t\t},\n\t\t\t50940: {\n\t\t\t\tname: \"ProfileToneCurve\",\n\t\t\t\ttype: \"Float\",\n\t\t\t},\n\t\t\t50941: {\n\t\t\t\tname: \"ProfileEmbedPolicy\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50942: {\n\t\t\t\tname: \"ProfileCopyright\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50964: {\n\t\t\t\tname: \"ForwardMatrix1\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50965: {\n\t\t\t\tname: \"ForwardMatrix2\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t50966: {\n\t\t\t\tname: \"PreviewApplicationName\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50967: {\n\t\t\t\tname: \"PreviewApplicationVersion\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50968: {\n\t\t\t\tname: \"PreviewSettingsName\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50969: {\n\t\t\t\tname: \"PreviewSettingsDigest\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t50970: {\n\t\t\t\tname: \"PreviewColorSpace\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50971: {\n\t\t\t\tname: \"PreviewDateTime\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t50972: {\n\t\t\t\tname: \"RawImageDigest\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50973: {\n\t\t\t\tname: \"OriginalRawFileDigest\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t50974: {\n\t\t\t\tname: \"SubTileBlockSize\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50975: {\n\t\t\t\tname: \"RowInterleaveFactor\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50981: {\n\t\t\t\tname: \"ProfileLookTableDims\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t50982: {\n\t\t\t\tname: \"ProfileLookTableData\",\n\t\t\t\ttype: \"Float\",\n\t\t\t},\n\t\t\t51008: {\n\t\t\t\tname: \"OpcodeList1\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t51009: {\n\t\t\t\tname: \"OpcodeList2\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t51022: {\n\t\t\t\tname: \"OpcodeList3\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t},\n\t\tExif: {\n\t\t\t33434: {\n\t\t\t\tname: \"ExposureTime\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t33437: {\n\t\t\t\tname: \"FNumber\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t34850: {\n\t\t\t\tname: \"ExposureProgram\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t34852: {\n\t\t\t\tname: \"SpectralSensitivity\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t34855: {\n\t\t\t\tname: \"ISOSpeedRatings\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t34856: {\n\t\t\t\tname: \"OECF\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t34864: {\n\t\t\t\tname: \"SensitivityType\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t34865: {\n\t\t\t\tname: \"StandardOutputSensitivity\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34866: {\n\t\t\t\tname: \"RecommendedExposureIndex\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34867: {\n\t\t\t\tname: \"ISOSpeed\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34868: {\n\t\t\t\tname: \"ISOSpeedLatitudeyyy\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t34869: {\n\t\t\t\tname: \"ISOSpeedLatitudezzz\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t36864: {\n\t\t\t\tname: \"ExifVersion\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t36867: {\n\t\t\t\tname: \"DateTimeOriginal\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t36868: {\n\t\t\t\tname: \"DateTimeDigitized\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t36880: {\n\t\t\t\tname: \"OffsetTime\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37121: {\n\t\t\t\tname: \"ComponentsConfiguration\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t37122: {\n\t\t\t\tname: \"CompressedBitsPerPixel\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37377: {\n\t\t\t\tname: \"ShutterSpeedValue\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t37378: {\n\t\t\t\tname: \"ApertureValue\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37379: {\n\t\t\t\tname: \"BrightnessValue\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t37380: {\n\t\t\t\tname: \"ExposureBiasValue\",\n\t\t\t\ttype: \"SRational\",\n\t\t\t},\n\t\t\t37381: {\n\t\t\t\tname: \"MaxApertureValue\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37382: {\n\t\t\t\tname: \"SubjectDistance\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37383: {\n\t\t\t\tname: \"MeteringMode\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37384: {\n\t\t\t\tname: \"LightSource\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37385: {\n\t\t\t\tname: \"Flash\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37386: {\n\t\t\t\tname: \"FocalLength\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t37396: {\n\t\t\t\tname: \"SubjectArea\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t37500: {\n\t\t\t\tname: \"MakerNote\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t37510: {\n\t\t\t\tname: \"UserComment\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37520: {\n\t\t\t\tname: \"SubSecTime\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37521: {\n\t\t\t\tname: \"SubSecTimeOriginal\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t37522: {\n\t\t\t\tname: \"SubSecTimeDigitized\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t40960: {\n\t\t\t\tname: \"FlashpixVersion\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t40961: {\n\t\t\t\tname: \"ColorSpace\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t40962: {\n\t\t\t\tname: \"PixelXDimension\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t40963: {\n\t\t\t\tname: \"PixelYDimension\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t40964: {\n\t\t\t\tname: \"RelatedSoundFile\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t40965: {\n\t\t\t\tname: \"InteroperabilityTag\",\n\t\t\t\ttype: \"Long\",\n\t\t\t},\n\t\t\t41483: {\n\t\t\t\tname: \"FlashEnergy\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t41484: {\n\t\t\t\tname: \"SpatialFrequencyResponse\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t41486: {\n\t\t\t\tname: \"FocalPlaneXResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t41487: {\n\t\t\t\tname: \"FocalPlaneYResolution\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t41488: {\n\t\t\t\tname: \"FocalPlaneResolutionUnit\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41492: {\n\t\t\t\tname: \"SubjectLocation\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41493: {\n\t\t\t\tname: \"ExposureIndex\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t41495: {\n\t\t\t\tname: \"SensingMethod\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41728: {\n\t\t\t\tname: \"FileSource\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t41729: {\n\t\t\t\tname: \"SceneType\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t41730: {\n\t\t\t\tname: \"CFAPattern\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t41985: {\n\t\t\t\tname: \"CustomRendered\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41986: {\n\t\t\t\tname: \"ExposureMode\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41987: {\n\t\t\t\tname: \"WhiteBalance\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41988: {\n\t\t\t\tname: \"DigitalZoomRatio\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t41989: {\n\t\t\t\tname: \"FocalLengthIn35mmFilm\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41990: {\n\t\t\t\tname: \"SceneCaptureType\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41991: {\n\t\t\t\tname: \"GainControl\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41992: {\n\t\t\t\tname: \"Contrast\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41993: {\n\t\t\t\tname: \"Saturation\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41994: {\n\t\t\t\tname: \"Sharpness\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t41995: {\n\t\t\t\tname: \"DeviceSettingDescription\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t41996: {\n\t\t\t\tname: \"SubjectDistanceRange\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t42016: {\n\t\t\t\tname: \"ImageUniqueID\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42032: {\n\t\t\t\tname: \"CameraOwnerName\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42033: {\n\t\t\t\tname: \"BodySerialNumber\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42034: {\n\t\t\t\tname: \"LensSpecification\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t42035: {\n\t\t\t\tname: \"LensMake\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42036: {\n\t\t\t\tname: \"LensModel\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42037: {\n\t\t\t\tname: \"LensSerialNumber\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t42240: {\n\t\t\t\tname: \"Gamma\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t},\n\t\tGPS: {\n\t\t\t0: {\n\t\t\t\tname: \"GPSVersionID\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t1: {\n\t\t\t\tname: \"GPSLatitudeRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t2: {\n\t\t\t\tname: \"GPSLatitude\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t3: {\n\t\t\t\tname: \"GPSLongitudeRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t4: {\n\t\t\t\tname: \"GPSLongitude\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t5: {\n\t\t\t\tname: \"GPSAltitudeRef\",\n\t\t\t\ttype: \"Byte\",\n\t\t\t},\n\t\t\t6: {\n\t\t\t\tname: \"GPSAltitude\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t7: {\n\t\t\t\tname: \"GPSTimeStamp\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t8: {\n\t\t\t\tname: \"GPSSatellites\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t9: {\n\t\t\t\tname: \"GPSStatus\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t10: {\n\t\t\t\tname: \"GPSMeasureMode\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t11: {\n\t\t\t\tname: \"GPSDOP\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t12: {\n\t\t\t\tname: \"GPSSpeedRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t13: {\n\t\t\t\tname: \"GPSSpeed\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t14: {\n\t\t\t\tname: \"GPSTrackRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t15: {\n\t\t\t\tname: \"GPSTrack\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t16: {\n\t\t\t\tname: \"GPSImgDirectionRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t17: {\n\t\t\t\tname: \"GPSImgDirection\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t18: {\n\t\t\t\tname: \"GPSMapDatum\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t19: {\n\t\t\t\tname: \"GPSDestLatitudeRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t20: {\n\t\t\t\tname: \"GPSDestLatitude\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t21: {\n\t\t\t\tname: \"GPSDestLongitudeRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t22: {\n\t\t\t\tname: \"GPSDestLongitude\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t23: {\n\t\t\t\tname: \"GPSDestBearingRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t24: {\n\t\t\t\tname: \"GPSDestBearing\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t25: {\n\t\t\t\tname: \"GPSDestDistanceRef\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t26: {\n\t\t\t\tname: \"GPSDestDistance\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t\t27: {\n\t\t\t\tname: \"GPSProcessingMethod\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t28: {\n\t\t\t\tname: \"GPSAreaInformation\",\n\t\t\t\ttype: \"Undefined\",\n\t\t\t},\n\t\t\t29: {\n\t\t\t\tname: \"GPSDateStamp\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t\t30: {\n\t\t\t\tname: \"GPSDifferential\",\n\t\t\t\ttype: \"Short\",\n\t\t\t},\n\t\t\t31: {\n\t\t\t\tname: \"GPSHPositioningError\",\n\t\t\t\ttype: \"Rational\",\n\t\t\t},\n\t\t},\n\t\tInterop: {\n\t\t\t1: {\n\t\t\t\tname: \"InteroperabilityIndex\",\n\t\t\t\ttype: \"Ascii\",\n\t\t\t},\n\t\t},\n\t}\n\tTAGS[\"0th\"] = TAGS[\"Image\"]\n\tTAGS[\"1st\"] = TAGS[\"Image\"]\n\tthat.TAGS = TAGS\n\n\tthat.ImageIFD = {\n\t\tProcessingSoftware: 11,\n\t\tNewSubfileType: 254,\n\t\tSubfileType: 255,\n\t\tImageWidth: 256,\n\t\tImageLength: 257,\n\t\tBitsPerSample: 258,\n\t\tCompression: 259,\n\t\tPhotometricInterpretation: 262,\n\t\tThreshholding: 263,\n\t\tCellWidth: 264,\n\t\tCellLength: 265,\n\t\tFillOrder: 266,\n\t\tDocumentName: 269,\n\t\tImageDescription: 270,\n\t\tMake: 271,\n\t\tModel: 272,\n\t\tStripOffsets: 273,\n\t\tOrientation: 274,\n\t\tSamplesPerPixel: 277,\n\t\tRowsPerStrip: 278,\n\t\tStripByteCounts: 279,\n\t\tXResolution: 282,\n\t\tYResolution: 283,\n\t\tPlanarConfiguration: 284,\n\t\tGrayResponseUnit: 290,\n\t\tGrayResponseCurve: 291,\n\t\tT4Options: 292,\n\t\tT6Options: 293,\n\t\tResolutionUnit: 296,\n\t\tTransferFunction: 301,\n\t\tSoftware: 305,\n\t\tDateTime: 306,\n\t\tArtist: 315,\n\t\tHostComputer: 316,\n\t\tPredictor: 317,\n\t\tWhitePoint: 318,\n\t\tPrimaryChromaticities: 319,\n\t\tColorMap: 320,\n\t\tHalftoneHints: 321,\n\t\tTileWidth: 322,\n\t\tTileLength: 323,\n\t\tTileOffsets: 324,\n\t\tTileByteCounts: 325,\n\t\tSubIFDs: 330,\n\t\tInkSet: 332,\n\t\tInkNames: 333,\n\t\tNumberOfInks: 334,\n\t\tDotRange: 336,\n\t\tTargetPrinter: 337,\n\t\tExtraSamples: 338,\n\t\tSampleFormat: 339,\n\t\tSMinSampleValue: 340,\n\t\tSMaxSampleValue: 341,\n\t\tTransferRange: 342,\n\t\tClipPath: 343,\n\t\tXClipPathUnits: 344,\n\t\tYClipPathUnits: 345,\n\t\tIndexed: 346,\n\t\tJPEGTables: 347,\n\t\tOPIProxy: 351,\n\t\tJPEGProc: 512,\n\t\tJPEGInterchangeFormat: 513,\n\t\tJPEGInterchangeFormatLength: 514,\n\t\tJPEGRestartInterval: 515,\n\t\tJPEGLosslessPredictors: 517,\n\t\tJPEGPointTransforms: 518,\n\t\tJPEGQTables: 519,\n\t\tJPEGDCTables: 520,\n\t\tJPEGACTables: 521,\n\t\tYCbCrCoefficients: 529,\n\t\tYCbCrSubSampling: 530,\n\t\tYCbCrPositioning: 531,\n\t\tReferenceBlackWhite: 532,\n\t\tXMLPacket: 700,\n\t\tRating: 18246,\n\t\tRatingPercent: 18249,\n\t\tImageID: 32781,\n\t\tCFARepeatPatternDim: 33421,\n\t\tCFAPattern: 33422,\n\t\tBatteryLevel: 33423,\n\t\tCopyright: 33432,\n\t\tExposureTime: 33434,\n\t\tImageResources: 34377,\n\t\tExifTag: 34665,\n\t\tInterColorProfile: 34675,\n\t\tGPSTag: 34853,\n\t\tInterlace: 34857,\n\t\tTimeZoneOffset: 34858,\n\t\tSelfTimerMode: 34859,\n\t\tFlashEnergy: 37387,\n\t\tSpatialFrequencyResponse: 37388,\n\t\tNoise: 37389,\n\t\tFocalPlaneXResolution: 37390,\n\t\tFocalPlaneYResolution: 37391,\n\t\tFocalPlaneResolutionUnit: 37392,\n\t\tImageNumber: 37393,\n\t\tSecurityClassification: 37394,\n\t\tImageHistory: 37395,\n\t\tExposureIndex: 37397,\n\t\tTIFFEPStandardID: 37398,\n\t\tSensingMethod: 37399,\n\t\tXPTitle: 40091,\n\t\tXPComment: 40092,\n\t\tXPAuthor: 40093,\n\t\tXPKeywords: 40094,\n\t\tXPSubject: 40095,\n\t\tPrintImageMatching: 50341,\n\t\tDNGVersion: 50706,\n\t\tDNGBackwardVersion: 50707,\n\t\tUniqueCameraModel: 50708,\n\t\tLocalizedCameraModel: 50709,\n\t\tCFAPlaneColor: 50710,\n\t\tCFALayout: 50711,\n\t\tLinearizationTable: 50712,\n\t\tBlackLevelRepeatDim: 50713,\n\t\tBlackLevel: 50714,\n\t\tBlackLevelDeltaH: 50715,\n\t\tBlackLevelDeltaV: 50716,\n\t\tWhiteLevel: 50717,\n\t\tDefaultScale: 50718,\n\t\tDefaultCropOrigin: 50719,\n\t\tDefaultCropSize: 50720,\n\t\tColorMatrix1: 50721,\n\t\tColorMatrix2: 50722,\n\t\tCameraCalibration1: 50723,\n\t\tCameraCalibration2: 50724,\n\t\tReductionMatrix1: 50725,\n\t\tReductionMatrix2: 50726,\n\t\tAnalogBalance: 50727,\n\t\tAsShotNeutral: 50728,\n\t\tAsShotWhiteXY: 50729,\n\t\tBaselineExposure: 50730,\n\t\tBaselineNoise: 50731,\n\t\tBaselineSharpness: 50732,\n\t\tBayerGreenSplit: 50733,\n\t\tLinearResponseLimit: 50734,\n\t\tCameraSerialNumber: 50735,\n\t\tLensInfo: 50736,\n\t\tChromaBlurRadius: 50737,\n\t\tAntiAliasStrength: 50738,\n\t\tShadowScale: 50739,\n\t\tDNGPrivateData: 50740,\n\t\tMakerNoteSafety: 50741,\n\t\tCalibrationIlluminant1: 50778,\n\t\tCalibrationIlluminant2: 50779,\n\t\tBestQualityScale: 50780,\n\t\tRawDataUniqueID: 50781,\n\t\tOriginalRawFileName: 50827,\n\t\tOriginalRawFileData: 50828,\n\t\tActiveArea: 50829,\n\t\tMaskedAreas: 50830,\n\t\tAsShotICCProfile: 50831,\n\t\tAsShotPreProfileMatrix: 50832,\n\t\tCurrentICCProfile: 50833,\n\t\tCurrentPreProfileMatrix: 50834,\n\t\tColorimetricReference: 50879,\n\t\tCameraCalibrationSignature: 50931,\n\t\tProfileCalibrationSignature: 50932,\n\t\tAsShotProfileName: 50934,\n\t\tNoiseReductionApplied: 50935,\n\t\tProfileName: 50936,\n\t\tProfileHueSatMapDims: 50937,\n\t\tProfileHueSatMapData1: 50938,\n\t\tProfileHueSatMapData2: 50939,\n\t\tProfileToneCurve: 50940,\n\t\tProfileEmbedPolicy: 50941,\n\t\tProfileCopyright: 50942,\n\t\tForwardMatrix1: 50964,\n\t\tForwardMatrix2: 50965,\n\t\tPreviewApplicationName: 50966,\n\t\tPreviewApplicationVersion: 50967,\n\t\tPreviewSettingsName: 50968,\n\t\tPreviewSettingsDigest: 50969,\n\t\tPreviewColorSpace: 50970,\n\t\tPreviewDateTime: 50971,\n\t\tRawImageDigest: 50972,\n\t\tOriginalRawFileDigest: 50973,\n\t\tSubTileBlockSize: 50974,\n\t\tRowInterleaveFactor: 50975,\n\t\tProfileLookTableDims: 50981,\n\t\tProfileLookTableData: 50982,\n\t\tOpcodeList1: 51008,\n\t\tOpcodeList2: 51009,\n\t\tOpcodeList3: 51022,\n\t\tNoiseProfile: 51041,\n\t}\n\n\tthat.ExifIFD = {\n\t\tExposureTime: 33434,\n\t\tFNumber: 33437,\n\t\tExposureProgram: 34850,\n\t\tSpectralSensitivity: 34852,\n\t\tISOSpeedRatings: 34855,\n\t\tOECF: 34856,\n\t\tSensitivityType: 34864,\n\t\tStandardOutputSensitivity: 34865,\n\t\tRecommendedExposureIndex: 34866,\n\t\tISOSpeed: 34867,\n\t\tISOSpeedLatitudeyyy: 34868,\n\t\tISOSpeedLatitudezzz: 34869,\n\t\tExifVersion: 36864,\n\t\tDateTimeOriginal: 36867,\n\t\tDateTimeDigitized: 36868,\n\t\tComponentsConfiguration: 37121,\n\t\tCompressedBitsPerPixel: 37122,\n\t\tShutterSpeedValue: 37377,\n\t\tApertureValue: 37378,\n\t\tBrightnessValue: 37379,\n\t\tExposureBiasValue: 37380,\n\t\tMaxApertureValue: 37381,\n\t\tSubjectDistance: 37382,\n\t\tMeteringMode: 37383,\n\t\tLightSource: 37384,\n\t\tFlash: 37385,\n\t\tFocalLength: 37386,\n\t\tSubjectArea: 37396,\n\t\tMakerNote: 37500,\n\t\tUserComment: 37510,\n\t\tSubSecTime: 37520,\n\t\tSubSecTimeOriginal: 37521,\n\t\tSubSecTimeDigitized: 37522,\n\t\tFlashpixVersion: 40960,\n\t\tColorSpace: 40961,\n\t\tPixelXDimension: 40962,\n\t\tPixelYDimension: 40963,\n\t\tRelatedSoundFile: 40964,\n\t\tInteroperabilityTag: 40965,\n\t\tFlashEnergy: 41483,\n\t\tSpatialFrequencyResponse: 41484,\n\t\tFocalPlaneXResolution: 41486,\n\t\tFocalPlaneYResolution: 41487,\n\t\tFocalPlaneResolutionUnit: 41488,\n\t\tSubjectLocation: 41492,\n\t\tExposureIndex: 41493,\n\t\tSensingMethod: 41495,\n\t\tFileSource: 41728,\n\t\tSceneType: 41729,\n\t\tCFAPattern: 41730,\n\t\tCustomRendered: 41985,\n\t\tExposureMode: 41986,\n\t\tWhiteBalance: 41987,\n\t\tDigitalZoomRatio: 41988,\n\t\tFocalLengthIn35mmFilm: 41989,\n\t\tSceneCaptureType: 41990,\n\t\tGainControl: 41991,\n\t\tContrast: 41992,\n\t\tSaturation: 41993,\n\t\tSharpness: 41994,\n\t\tDeviceSettingDescription: 41995,\n\t\tSubjectDistanceRange: 41996,\n\t\tImageUniqueID: 42016,\n\t\tCameraOwnerName: 42032,\n\t\tBodySerialNumber: 42033,\n\t\tLensSpecification: 42034,\n\t\tLensMake: 42035,\n\t\tLensModel: 42036,\n\t\tLensSerialNumber: 42037,\n\t\tGamma: 42240,\n\t}\n\n\tthat.GPSIFD = {\n\t\tGPSVersionID: 0,\n\t\tGPSLatitudeRef: 1,\n\t\tGPSLatitude: 2,\n\t\tGPSLongitudeRef: 3,\n\t\tGPSLongitude: 4,\n\t\tGPSAltitudeRef: 5,\n\t\tGPSAltitude: 6,\n\t\tGPSTimeStamp: 7,\n\t\tGPSSatellites: 8,\n\t\tGPSStatus: 9,\n\t\tGPSMeasureMode: 10,\n\t\tGPSDOP: 11,\n\t\tGPSSpeedRef: 12,\n\t\tGPSSpeed: 13,\n\t\tGPSTrackRef: 14,\n\t\tGPSTrack: 15,\n\t\tGPSImgDirectionRef: 16,\n\t\tGPSImgDirection: 17,\n\t\tGPSMapDatum: 18,\n\t\tGPSDestLatitudeRef: 19,\n\t\tGPSDestLatitude: 20,\n\t\tGPSDestLongitudeRef: 21,\n\t\tGPSDestLongitude: 22,\n\t\tGPSDestBearingRef: 23,\n\t\tGPSDestBearing: 24,\n\t\tGPSDestDistanceRef: 25,\n\t\tGPSDestDistance: 26,\n\t\tGPSProcessingMethod: 27,\n\t\tGPSAreaInformation: 28,\n\t\tGPSDateStamp: 29,\n\t\tGPSDifferential: 30,\n\t\tGPSHPositioningError: 31,\n\t}\n\n\tthat.InteropIFD = {\n\t\tInteroperabilityIndex: 1,\n\t}\n\n\tthat.GPSHelper = {\n\t\tdegToDmsRational: function (degFloat) {\n\t\t\tvar degAbs = Math.abs(degFloat)\n\t\t\tvar minFloat = (degAbs % 1) * 60\n\t\t\tvar secFloat = (minFloat % 1) * 60\n\t\t\tvar deg = Math.floor(degAbs)\n\t\t\tvar min = Math.floor(minFloat)\n\t\t\tvar sec = Math.round(secFloat * 100)\n\n\t\t\treturn [\n\t\t\t\t[deg, 1],\n\t\t\t\t[min, 1],\n\t\t\t\t[sec, 100],\n\t\t\t]\n\t\t},\n\n\t\tdmsRationalToDeg: function (dmsArray, ref) {\n\t\t\tvar sign = ref === \"S\" || ref === \"W\" ? -1.0 : 1.0\n\t\t\tvar deg =\n\t\t\t\tdmsArray[0][0] / dmsArray[0][1] +\n\t\t\t\tdmsArray[1][0] / dmsArray[1][1] / 60.0 +\n\t\t\t\tdmsArray[2][0] / dmsArray[2][1] / 3600.0\n\n\t\t\treturn deg * sign\n\t\t},\n\t}\n\n\tif (typeof exports !== \"undefined\") {\n\t\tif (typeof module !== \"undefined\" && module.exports) {\n\t\t\texports = module.exports = that\n\t\t}\n\t\texports.piexif = that\n\t} else {\n\t\twindow.piexif = that\n\t}\n})()\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};exports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;\nexports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=function(){throw Error(\"act(...) is not supported in production builds of React.\");};\nexports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};exports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};\nexports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};exports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};\nexports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.2.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","\"use strict\";\n// @ts-ignore\ntry {\n    self['workbox:core:6.5.3'] && _();\n}\ncatch (e) { }\n","\"use strict\";\n// @ts-ignore\ntry {\n    self['workbox:expiration:6.5.3'] && _();\n}\ncatch (e) { }\n","\"use strict\";\n// @ts-ignore\ntry {\n    self['workbox:precaching:6.5.3'] && _();\n}\ncatch (e) { }\n","\"use strict\";\n// @ts-ignore\ntry {\n    self['workbox:routing:6.5.3'] && _();\n}\ncatch (e) { }\n","\"use strict\";\n// @ts-ignore\ntry {\n    self['workbox:strategies:6.5.3'] && _();\n}\ncatch (e) { }\n","/* global module */\n/* global EventTarget, AbortController, DOMException */\n\nconst sHeaders = Symbol(\"headers\");\nconst sRespHeaders = Symbol(\"response headers\");\nconst sAbortController = Symbol(\"AbortController\");\nconst sMethod = Symbol(\"method\");\nconst sURL = Symbol(\"URL\");\nconst sMIME = Symbol(\"MIME\");\nconst sDispatch = Symbol(\"dispatch\");\nconst sErrored = Symbol(\"errored\");\nconst sTimeout = Symbol(\"timeout\");\nconst sTimedOut = Symbol(\"timedOut\");\nconst sIsResponseText = Symbol(\"isResponseText\");\n\nconst XMLHttpRequestShim = class XMLHttpRequest extends EventTarget {\n  constructor() {\n    super();\n    this.readyState = this.constructor.UNSENT;\n    this.response = null;\n    this.responseType = \"\";\n    this.responseURL = \"\";\n    this.status = 0;\n    this.statusText = \"\";\n    this.timeout = 0;\n    this.withCredentials = false;\n    this[sHeaders] = Object.create(null);\n    this[sHeaders].accept = \"*/*\";\n    this[sRespHeaders] = Object.create(null);\n    this[sAbortController] = new AbortController();\n    this[sMethod] = \"\";\n    this[sURL] = \"\";\n    this[sMIME] = \"\";\n    this[sErrored] = false;\n    this[sTimeout] = 0;\n    this[sTimedOut] = false;\n    this[sIsResponseText] = true;\n  }\n  static get UNSENT() {\n    return 0;\n  }\n  static get OPENED() {\n    return 1;\n  }\n  static get HEADERS_RECEIVED() {\n    return 2;\n  }\n  static get LOADING() {\n    return 3;\n  }\n  static get DONE() {\n    return 4;\n  }\n  get responseText() {\n    if (this[sErrored]) return null;\n    if (this.readyState < this.constructor.HEADERS_RECEIVED) return \"\";\n    if (this[sIsResponseText]) return this.response;\n    throw new DOMException(\"Response type not set to text\", \"InvalidStateError\");\n  }\n  get responseXML() {\n    throw new Error(\"XML not supported\");\n  }\n  [sDispatch](evt) {\n    const attr = `on${evt.type}`;\n    if (typeof this[attr] === \"function\") {\n      this.addEventListener(evt.type, this[attr].bind(this), {\n        once: true\n      });\n    }\n    this.dispatchEvent(evt);\n  }\n  abort() {\n    this[sAbortController].abort();\n    this.status = 0;\n    this.readyState = this.constructor.UNSENT;\n  }\n  open(method, url) {\n    this.status = 0;\n    this[sMethod] = method;\n    this[sURL] = url;\n    this.readyState = this.constructor.OPENED;\n  }\n  setRequestHeader(header, value) {\n    header = String(header).toLowerCase();\n    if (typeof this[sHeaders][header] === \"undefined\") {\n      this[sHeaders][header] = String(value);\n    } else {\n      this[sHeaders][header] += `, ${value}`;\n    }\n  }\n  overrideMimeType(mimeType) {\n    this[sMIME] = String(mimeType);\n  }\n  getAllResponseHeaders() {\n    if (this[sErrored] || this.readyState < this.constructor.HEADERS_RECEIVED) return \"\";\n    return Object.entries(this[sRespHeaders]).map(([header, value]) => `${header}: ${value}`).join(\"\\r\\n\");\n  }\n  getResponseHeader(headerName) {\n    const value = this[sRespHeaders][String(headerName).toLowerCase()];\n    return typeof value === \"string\" ? value : null;\n  }\n  send(body = null) {\n    if (this.timeout > 0) {\n      this[sTimeout] = setTimeout(() => {\n        this[sTimedOut] = true;\n        this[sAbortController].abort();\n      }, this.timeout);\n    }\n    const responseType = this.responseType || \"text\";\n    this[sIsResponseText] = responseType === \"text\";\n    fetch(this[sURL], {\n      method: this[sMethod] || \"GET\",\n      signal: this[sAbortController].signal,\n      headers: this[sHeaders],\n      credentials: this.withCredentials ? \"include\" : \"same-origin\",\n      body\n    }).finally(() => {\n      this.readyState = this.constructor.DONE;\n      clearTimeout(this[sTimeout]);\n      this[sDispatch](new CustomEvent(\"loadstart\"));\n    }).then(async resp => {\n      this.responseURL = resp.url;\n      this.status = resp.status;\n      this.statusText = resp.statusText;\n      const finalMIME = this[sMIME] || this[sRespHeaders][\"content-type\"] || \"text/plain\";\n      Object.assign(this[sRespHeaders], resp.headers);\n      switch (responseType) {\n        case \"text\":\n          this.response = await resp.text();\n          break;\n        case \"blob\":\n          this.response = new Blob([await resp.arrayBuffer()], { type: finalMIME });\n          break;\n        case \"arraybuffer\":\n          this.response = await resp.arrayBuffer();\n          break;\n        case \"json\":\n          this.response = await resp.json();\n          break;\n      }\n      this[sDispatch](new CustomEvent(\"load\"));\n    }, err => {\n      let eventName = \"abort\";\n      if (err.name !== \"AbortError\") {\n        this[sErrored] = true;\n        eventName = \"error\";\n      } else if (this[sTimedOut]) {\n        eventName = \"timeout\";\n      }\n      this[sDispatch](new CustomEvent(eventName));\n    }).finally(() => this[sDispatch](new CustomEvent(\"loadend\")));\n  }\n}\n\nif (typeof module === \"object\" && module.exports) {\n  module.exports = XMLHttpRequestShim;\n} else {\n  (globalThis || self).XMLHttpRequestShim = XMLHttpRequestShim;\n}\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n  return _construct.apply(null, arguments);\n}\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}\nmodule.exports = _createSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\nvar isNativeFunction = require(\"./isNativeFunction.js\");\nvar construct = require(\"./construct.js\");\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _wrapNativeSuper(Class);\n}\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/ssa-pwa/\";","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { getGlobal } from './global';\n\n/**\n * Keys for experimental properties on the `FirebaseDefaults` object.\n * @public\n */\nexport type ExperimentalKey = 'authTokenSyncURL' | 'authIdTokenMaxAge';\n\n/**\n * An object that can be injected into the environment as __FIREBASE_DEFAULTS__,\n * either as a property of globalThis, a shell environment variable, or a\n * cookie.\n *\n * This object can be used to automatically configure and initialize\n * a Firebase app as well as any emulators.\n *\n * @public\n */\nexport interface FirebaseDefaults {\n  config?: Record<string, string>;\n  emulatorHosts?: Record<string, string>;\n  _authTokenSyncURL?: string;\n  _authIdTokenMaxAge?: number;\n  /**\n   * Override Firebase's runtime environment detection and\n   * force the SDK to act as if it were in the specified environment.\n   */\n  forceEnvironment?: 'browser' | 'node';\n  [key: string]: unknown;\n}\n\ndeclare global {\n  // Need `var` for this to work.\n  // eslint-disable-next-line no-var\n  var __FIREBASE_DEFAULTS__: FirebaseDefaults | undefined;\n}\n\nconst getDefaultsFromGlobal = (): FirebaseDefaults | undefined =>\n  getGlobal().__FIREBASE_DEFAULTS__;\n\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = (): FirebaseDefaults | undefined => {\n  if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n    return;\n  }\n  const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n  if (defaultsJsonString) {\n    return JSON.parse(defaultsJsonString);\n  }\n};\n\nconst getDefaultsFromCookie = (): FirebaseDefaults | undefined => {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  let match;\n  try {\n    match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n  } catch (e) {\n    // Some environments such as Angular Universal SSR have a\n    // `document` object but error on accessing `document.cookie`.\n    return;\n  }\n  const decoded = match && base64Decode(match[1]);\n  return decoded && JSON.parse(decoded);\n};\n\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nexport const getDefaults = (): FirebaseDefaults | undefined => {\n  try {\n    return (\n      getDefaultsFromGlobal() ||\n      getDefaultsFromEnvVariable() ||\n      getDefaultsFromCookie()\n    );\n  } catch (e) {\n    /**\n     * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n     * to any environment case we have not accounted for. Log to\n     * info instead of swallowing so we can find these unknown cases\n     * and add paths for them if needed.\n     */\n    console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n    return;\n  }\n};\n\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nexport const getDefaultEmulatorHost = (\n  productName: string\n): string | undefined => getDefaults()?.emulatorHosts?.[productName];\n\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nexport const getDefaultEmulatorHostnameAndPort = (\n  productName: string\n): [hostname: string, port: number] | undefined => {\n  const host = getDefaultEmulatorHost(productName);\n  if (!host) {\n    return undefined;\n  }\n  const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n  if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n    throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n  }\n  // eslint-disable-next-line no-restricted-globals\n  const port = parseInt(host.substring(separatorIndex + 1), 10);\n  if (host[0] === '[') {\n    // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n    return [host.substring(1, separatorIndex - 1), port];\n  } else {\n    return [host.substring(0, separatorIndex), port];\n  }\n};\n\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nexport const getDefaultAppConfig = (): Record<string, string> | undefined =>\n  getDefaults()?.config;\n\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nexport const getExperimentalSetting = <T extends ExperimentalKey>(\n  name: T\n): FirebaseDefaults[`_${T}`] =>\n  getDefaults()?.[`_${name}`] as FirebaseDefaults[`_${T}`];\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\nimport { getDefaults } from './defaults';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  const forceEnvironment = getDefaults()?.forceEnvironment;\n  if (forceEnvironment === 'node') {\n    return true;\n  } else if (forceEnvironment === 'browser') {\n    return false;\n  }\n\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  try {\n    return typeof indexedDB === 'object';\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/app');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { name as appName } from '../package.json';\nimport { name as appCompatName } from '../../app-compat/package.json';\nimport { name as analyticsCompatName } from '../../../packages/analytics-compat/package.json';\nimport { name as analyticsName } from '../../../packages/analytics/package.json';\nimport { name as appCheckCompatName } from '../../../packages/app-check-compat/package.json';\nimport { name as appCheckName } from '../../../packages/app-check/package.json';\nimport { name as authName } from '../../../packages/auth/package.json';\nimport { name as authCompatName } from '../../../packages/auth-compat/package.json';\nimport { name as databaseName } from '../../../packages/database/package.json';\nimport { name as databaseCompatName } from '../../../packages/database-compat/package.json';\nimport { name as functionsName } from '../../../packages/functions/package.json';\nimport { name as functionsCompatName } from '../../../packages/functions-compat/package.json';\nimport { name as installationsName } from '../../../packages/installations/package.json';\nimport { name as installationsCompatName } from '../../../packages/installations-compat/package.json';\nimport { name as messagingName } from '../../../packages/messaging/package.json';\nimport { name as messagingCompatName } from '../../../packages/messaging-compat/package.json';\nimport { name as performanceName } from '../../../packages/performance/package.json';\nimport { name as performanceCompatName } from '../../../packages/performance-compat/package.json';\nimport { name as remoteConfigName } from '../../../packages/remote-config/package.json';\nimport { name as remoteConfigCompatName } from '../../../packages/remote-config-compat/package.json';\nimport { name as storageName } from '../../../packages/storage/package.json';\nimport { name as storageCompatName } from '../../../packages/storage-compat/package.json';\nimport { name as firestoreName } from '../../../packages/firestore/package.json';\nimport { name as firestoreCompatName } from '../../../packages/firestore-compat/package.json';\nimport { name as packageName } from '../../../packages/firebase/package.json';\n\n/**\n * The default app name\n *\n * @internal\n */\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\nexport const PLATFORM_LOG_STRING = {\n  [appName]: 'fire-core',\n  [appCompatName]: 'fire-core-compat',\n  [analyticsName]: 'fire-analytics',\n  [analyticsCompatName]: 'fire-analytics-compat',\n  [appCheckName]: 'fire-app-check',\n  [appCheckCompatName]: 'fire-app-check-compat',\n  [authName]: 'fire-auth',\n  [authCompatName]: 'fire-auth-compat',\n  [databaseName]: 'fire-rtdb',\n  [databaseCompatName]: 'fire-rtdb-compat',\n  [functionsName]: 'fire-fn',\n  [functionsCompatName]: 'fire-fn-compat',\n  [installationsName]: 'fire-iid',\n  [installationsCompatName]: 'fire-iid-compat',\n  [messagingName]: 'fire-fcm',\n  [messagingCompatName]: 'fire-fcm-compat',\n  [performanceName]: 'fire-perf',\n  [performanceCompatName]: 'fire-perf-compat',\n  [remoteConfigName]: 'fire-rc',\n  [remoteConfigCompatName]: 'fire-rc-compat',\n  [storageName]: 'fire-gcs',\n  [storageCompatName]: 'fire-gcs-compat',\n  [firestoreName]: 'fire-fst',\n  [firestoreCompatName]: 'fire-fst-compat',\n  'fire-js': 'fire-js', // Platform identifier for JS SDK.\n  [packageName]: 'fire-js-all'\n} as const;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  NO_OPTIONS = 'no-options',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  IDB_OPEN = 'idb-open',\n  IDB_GET = 'idb-get',\n  IDB_WRITE = 'idb-set',\n  IDB_DELETE = 'idb-delete'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call Firebase App.initializeApp()',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.NO_OPTIONS]:\n    'Need to provide options, when not being deployed to hosting via source.',\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.IDB_OPEN]:\n    'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_GET]:\n    'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_WRITE]:\n    'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_DELETE]:\n    'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.IDB_OPEN]: { originalErrorMessage?: string };\n  [AppError.IDB_GET]: { originalErrorMessage?: string };\n  [AppError.IDB_WRITE]: { originalErrorMessage?: string };\n  [AppError.IDB_DELETE]: { originalErrorMessage?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly _options: FirebaseOptions;\n  private readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  private _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { _apps, _components, _registerComponent } from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport { deepEqual, getDefaultAppConfig } from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @public\n */\nexport function initializeApp(): FirebaseApp;\nexport function initializeApp(\n  _options?: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  let options = _options;\n\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: false,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  options ||= getDefaultAppConfig();\n\n  if (!options) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app && name === DEFAULT_ENTRY_NAME) {\n    return initializeApp();\n  }\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  const name = app.name;\n  if (_apps.has(name)) {\n    _apps.delete(name);\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { DBSchema, openDB, IDBPDatabase } from 'idb';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nimport { logger } from './logger';\n\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\ninterface AppDB extends DBSchema {\n  'firebase-heartbeat-store': {\n    key: string;\n    value: HeartbeatsInIndexedDB;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<AppDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<AppDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB<AppDB>(DB_NAME, DB_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            db.createObjectStore(STORE_NAME);\n        }\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.IDB_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    return db\n      .transaction(STORE_NAME)\n      .objectStore(STORE_NAME)\n      .get(computeKey(app)) as Promise<HeartbeatsInIndexedDB | undefined>;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_GET, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    return tx.done;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_WRITE, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\n\nconst MAX_HEADER_BYTES = 1024;\n// 30 days\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (hearbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    const platformLogger = this.container\n      .getProvider('platform-logger')\n      .getImmediate();\n\n    // This is the \"Firebase user agent\" string from the platform logger\n    // service, not the browser user agent.\n    const agent = platformLogger.getPlatformInfoString();\n    const date = getUTCDateString();\n    if (this._heartbeatsCache === null) {\n      this._heartbeatsCache = await this._heartbeatsCachePromise;\n    }\n    // Do not store a heartbeat if one is already stored for this day\n    // or if a header has already been sent today.\n    if (\n      this._heartbeatsCache.lastSentHeartbeatDate === date ||\n      this._heartbeatsCache.heartbeats.some(\n        singleDateHeartbeat => singleDateHeartbeat.date === date\n      )\n    ) {\n      return;\n    } else {\n      // There is no entry for this date. Create one.\n      this._heartbeatsCache.heartbeats.push({ date, agent });\n    }\n    // Remove entries older than 30 days.\n    this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(\n      singleDateHeartbeat => {\n        const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\n        const now = Date.now();\n        return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\n      }\n    );\n    return this._storage.overwrite(this._heartbeatsCache);\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    if (this._heartbeatsCache === null) {\n      await this._heartbeatsCachePromise;\n    }\n    // If it's still null or the array is empty, there is no data to send.\n    if (\n      this._heartbeatsCache === null ||\n      this._heartbeatsCache.heartbeats.length === 0\n    ) {\n      return '';\n    }\n    const date = getUTCDateString();\n    // Extract as many heartbeats from the cache as will fit under the size limit.\n    const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n      this._heartbeatsCache.heartbeats\n    );\n    const headerString = base64urlEncodeWithoutPadding(\n      JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n    );\n    // Store last sent date to prevent another being logged/sent for the same day.\n    this._heartbeatsCache.lastSentHeartbeatDate = date;\n    if (unsentEntries.length > 0) {\n      // Store any unsent entries if they exist.\n      this._heartbeatsCache.heartbeats = unsentEntries;\n      // This seems more likely than emptying the array (below) to lead to some odd state\n      // since the cache isn't empty and this will be called again on the next request,\n      // and is probably safest if we await it.\n      await this._storage.overwrite(this._heartbeatsCache);\n    } else {\n      this._heartbeatsCache.heartbeats = [];\n      // Do not wait for this, to reduce latency.\n      void this._storage.overwrite(this._heartbeatsCache);\n    }\n    return headerString;\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      return idbHeartbeatObject || { heartbeats: [] };\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Constants used in the Firebase Storage library.\n */\n\n/**\n * Domain name for firebase storage.\n */\nexport const DEFAULT_HOST = 'firebasestorage.googleapis.com';\n\n/**\n * The key in Firebase config json for the storage bucket.\n */\nexport const CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\n\n/**\n * 2 minutes\n *\n * The timeout for all operations except upload.\n */\nexport const DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\n\n/**\n * 10 minutes\n *\n * The timeout for upload.\n */\nexport const DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\n\n/**\n * 1 second\n */\nexport const DEFAULT_MIN_SLEEP_TIME_MILLIS = 1000;\n\n/**\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\n * enough for us to use it directly.\n */\nexport const MIN_SAFE_INTEGER = -9007199254740991;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\n\nimport { CONFIG_STORAGE_BUCKET_KEY } from './constants';\n\n/**\n * An error returned by the Firebase Storage SDK.\n * @public\n */\nexport class StorageError extends FirebaseError {\n  private readonly _baseMessage: string;\n  /**\n   * Stores custom error data unque to StorageError.\n   */\n  customData: { serverResponse: string | null } = { serverResponse: null };\n\n  /**\n   * @param code - A StorageErrorCode string to be prefixed with 'storage/' and\n   *  added to the end of the message.\n   * @param message  - Error message.\n   * @param status_ - Corresponding HTTP Status Code\n   */\n  constructor(code: StorageErrorCode, message: string, private status_ = 0) {\n    super(\n      prependCode(code),\n      `Firebase Storage: ${message} (${prependCode(code)})`\n    );\n    this._baseMessage = this.message;\n    // Without this, `instanceof StorageError`, in tests for example,\n    // returns false.\n    Object.setPrototypeOf(this, StorageError.prototype);\n  }\n\n  get status(): number {\n    return this.status_;\n  }\n\n  set status(status: number) {\n    this.status_ = status;\n  }\n\n  /**\n   * Compares a StorageErrorCode against this error's code, filtering out the prefix.\n   */\n  _codeEquals(code: StorageErrorCode): boolean {\n    return prependCode(code) === this.code;\n  }\n\n  /**\n   * Optional response message that was added by the server.\n   */\n  get serverResponse(): null | string {\n    return this.customData.serverResponse;\n  }\n\n  set serverResponse(serverResponse: string | null) {\n    this.customData.serverResponse = serverResponse;\n    if (this.customData.serverResponse) {\n      this.message = `${this._baseMessage}\\n${this.customData.serverResponse}`;\n    } else {\n      this.message = this._baseMessage;\n    }\n  }\n}\n\nexport const errors = {};\n\n/**\n * @public\n * Error codes that can be attached to `StorageError`s.\n */\nexport enum StorageErrorCode {\n  // Shared between all platforms\n  UNKNOWN = 'unknown',\n  OBJECT_NOT_FOUND = 'object-not-found',\n  BUCKET_NOT_FOUND = 'bucket-not-found',\n  PROJECT_NOT_FOUND = 'project-not-found',\n  QUOTA_EXCEEDED = 'quota-exceeded',\n  UNAUTHENTICATED = 'unauthenticated',\n  UNAUTHORIZED = 'unauthorized',\n  UNAUTHORIZED_APP = 'unauthorized-app',\n  RETRY_LIMIT_EXCEEDED = 'retry-limit-exceeded',\n  INVALID_CHECKSUM = 'invalid-checksum',\n  CANCELED = 'canceled',\n  // JS specific\n  INVALID_EVENT_NAME = 'invalid-event-name',\n  INVALID_URL = 'invalid-url',\n  INVALID_DEFAULT_BUCKET = 'invalid-default-bucket',\n  NO_DEFAULT_BUCKET = 'no-default-bucket',\n  CANNOT_SLICE_BLOB = 'cannot-slice-blob',\n  SERVER_FILE_WRONG_SIZE = 'server-file-wrong-size',\n  NO_DOWNLOAD_URL = 'no-download-url',\n  INVALID_ARGUMENT = 'invalid-argument',\n  INVALID_ARGUMENT_COUNT = 'invalid-argument-count',\n  APP_DELETED = 'app-deleted',\n  INVALID_ROOT_OPERATION = 'invalid-root-operation',\n  INVALID_FORMAT = 'invalid-format',\n  INTERNAL_ERROR = 'internal-error',\n  UNSUPPORTED_ENVIRONMENT = 'unsupported-environment'\n}\n\nexport function prependCode(code: StorageErrorCode): string {\n  return 'storage/' + code;\n}\n\nexport function unknown(): StorageError {\n  const message =\n    'An unknown error occurred, please check the error payload for ' +\n    'server response.';\n  return new StorageError(StorageErrorCode.UNKNOWN, message);\n}\n\nexport function objectNotFound(path: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.OBJECT_NOT_FOUND,\n    \"Object '\" + path + \"' does not exist.\"\n  );\n}\n\nexport function bucketNotFound(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.BUCKET_NOT_FOUND,\n    \"Bucket '\" + bucket + \"' does not exist.\"\n  );\n}\n\nexport function projectNotFound(project: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.PROJECT_NOT_FOUND,\n    \"Project '\" + project + \"' does not exist.\"\n  );\n}\n\nexport function quotaExceeded(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.QUOTA_EXCEEDED,\n    \"Quota for bucket '\" +\n      bucket +\n      \"' exceeded, please view quota on \" +\n      'https://firebase.google.com/pricing/.'\n  );\n}\n\nexport function unauthenticated(): StorageError {\n  const message =\n    'User is not authenticated, please authenticate using Firebase ' +\n    'Authentication and try again.';\n  return new StorageError(StorageErrorCode.UNAUTHENTICATED, message);\n}\n\nexport function unauthorizedApp(): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNAUTHORIZED_APP,\n    'This app does not have permission to access Firebase Storage on this project.'\n  );\n}\n\nexport function unauthorized(path: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNAUTHORIZED,\n    \"User does not have permission to access '\" + path + \"'.\"\n  );\n}\n\nexport function retryLimitExceeded(): StorageError {\n  return new StorageError(\n    StorageErrorCode.RETRY_LIMIT_EXCEEDED,\n    'Max retry time for operation exceeded, please try again.'\n  );\n}\n\nexport function invalidChecksum(\n  path: string,\n  checksum: string,\n  calculated: string\n): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_CHECKSUM,\n    \"Uploaded/downloaded object '\" +\n      path +\n      \"' has checksum '\" +\n      checksum +\n      \"' which does not match '\" +\n      calculated +\n      \"'. Please retry the upload/download.\"\n  );\n}\n\nexport function canceled(): StorageError {\n  return new StorageError(\n    StorageErrorCode.CANCELED,\n    'User canceled the upload/download.'\n  );\n}\n\nexport function invalidEventName(name: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_EVENT_NAME,\n    \"Invalid event name '\" + name + \"'.\"\n  );\n}\n\nexport function invalidUrl(url: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_URL,\n    \"Invalid URL '\" + url + \"'.\"\n  );\n}\n\nexport function invalidDefaultBucket(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_DEFAULT_BUCKET,\n    \"Invalid default bucket '\" + bucket + \"'.\"\n  );\n}\n\nexport function noDefaultBucket(): StorageError {\n  return new StorageError(\n    StorageErrorCode.NO_DEFAULT_BUCKET,\n    'No default bucket ' +\n      \"found. Did you set the '\" +\n      CONFIG_STORAGE_BUCKET_KEY +\n      \"' property when initializing the app?\"\n  );\n}\n\nexport function cannotSliceBlob(): StorageError {\n  return new StorageError(\n    StorageErrorCode.CANNOT_SLICE_BLOB,\n    'Cannot slice blob for upload. Please retry the upload.'\n  );\n}\n\nexport function serverFileWrongSize(): StorageError {\n  return new StorageError(\n    StorageErrorCode.SERVER_FILE_WRONG_SIZE,\n    'Server recorded incorrect upload file size, please retry the upload.'\n  );\n}\n\nexport function noDownloadURL(): StorageError {\n  return new StorageError(\n    StorageErrorCode.NO_DOWNLOAD_URL,\n    'The given file does not have any download URLs.'\n  );\n}\n\nexport function missingPolyFill(polyFill: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNSUPPORTED_ENVIRONMENT,\n    `${polyFill} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`\n  );\n}\n\n/**\n * @internal\n */\nexport function invalidArgument(message: string): StorageError {\n  return new StorageError(StorageErrorCode.INVALID_ARGUMENT, message);\n}\n\nexport function invalidArgumentCount(\n  argMin: number,\n  argMax: number,\n  fnName: string,\n  real: number\n): StorageError {\n  let countPart;\n  let plural;\n  if (argMin === argMax) {\n    countPart = argMin;\n    plural = argMin === 1 ? 'argument' : 'arguments';\n  } else {\n    countPart = 'between ' + argMin + ' and ' + argMax;\n    plural = 'arguments';\n  }\n  return new StorageError(\n    StorageErrorCode.INVALID_ARGUMENT_COUNT,\n    'Invalid argument count in `' +\n      fnName +\n      '`: Expected ' +\n      countPart +\n      ' ' +\n      plural +\n      ', received ' +\n      real +\n      '.'\n  );\n}\n\nexport function appDeleted(): StorageError {\n  return new StorageError(\n    StorageErrorCode.APP_DELETED,\n    'The Firebase app was deleted.'\n  );\n}\n\n/**\n * @param name - The name of the operation that was invalid.\n *\n * @internal\n */\nexport function invalidRootOperation(name: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_ROOT_OPERATION,\n    \"The operation '\" +\n      name +\n      \"' cannot be performed on a root reference, create a non-root \" +\n      \"reference using child, such as .child('file.png').\"\n  );\n}\n\n/**\n * @param format - The format that was not valid.\n * @param message - A message describing the format violation.\n */\nexport function invalidFormat(format: string, message: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_FORMAT,\n    \"String does not match format '\" + format + \"': \" + message\n  );\n}\n\n/**\n * @param message - A message describing the internal error.\n */\nexport function unsupportedEnvironment(message: string): StorageError {\n  throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT, message);\n}\n\n/**\n * @param message - A message describing the internal error.\n */\nexport function internalError(message: string): StorageError {\n  throw new StorageError(\n    StorageErrorCode.INTERNAL_ERROR,\n    'Internal error: ' + message\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Functionality related to the parsing/composition of bucket/\n * object location.\n */\n\nimport { invalidDefaultBucket, invalidUrl } from './error';\nimport { DEFAULT_HOST } from './constants';\n\n/**\n * Firebase Storage location data.\n *\n * @internal\n */\nexport class Location {\n  private path_: string;\n\n  constructor(public readonly bucket: string, path: string) {\n    this.path_ = path;\n  }\n\n  get path(): string {\n    return this.path_;\n  }\n\n  get isRoot(): boolean {\n    return this.path.length === 0;\n  }\n\n  fullServerUrl(): string {\n    const encode = encodeURIComponent;\n    return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\n  }\n\n  bucketOnlyServerUrl(): string {\n    const encode = encodeURIComponent;\n    return '/b/' + encode(this.bucket) + '/o';\n  }\n\n  static makeFromBucketSpec(bucketString: string, host: string): Location {\n    let bucketLocation;\n    try {\n      bucketLocation = Location.makeFromUrl(bucketString, host);\n    } catch (e) {\n      // Not valid URL, use as-is. This lets you put bare bucket names in\n      // config.\n      return new Location(bucketString, '');\n    }\n    if (bucketLocation.path === '') {\n      return bucketLocation;\n    } else {\n      throw invalidDefaultBucket(bucketString);\n    }\n  }\n\n  static makeFromUrl(url: string, host: string): Location {\n    let location: Location | null = null;\n    const bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\n\n    function gsModify(loc: Location): void {\n      if (loc.path.charAt(loc.path.length - 1) === '/') {\n        loc.path_ = loc.path_.slice(0, -1);\n      }\n    }\n    const gsPath = '(/(.*))?$';\n    const gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\n    const gsIndices = { bucket: 1, path: 3 };\n\n    function httpModify(loc: Location): void {\n      loc.path_ = decodeURIComponent(loc.path);\n    }\n    const version = 'v[A-Za-z0-9_]+';\n    const firebaseStorageHost = host.replace(/[.]/g, '\\\\.');\n    const firebaseStoragePath = '(/([^?#]*).*)?$';\n    const firebaseStorageRegExp = new RegExp(\n      `^https?://${firebaseStorageHost}/${version}/b/${bucketDomain}/o${firebaseStoragePath}`,\n      'i'\n    );\n    const firebaseStorageIndices = { bucket: 1, path: 3 };\n\n    const cloudStorageHost =\n      host === DEFAULT_HOST\n        ? '(?:storage.googleapis.com|storage.cloud.google.com)'\n        : host;\n    const cloudStoragePath = '([^?#]*)';\n    const cloudStorageRegExp = new RegExp(\n      `^https?://${cloudStorageHost}/${bucketDomain}/${cloudStoragePath}`,\n      'i'\n    );\n    const cloudStorageIndices = { bucket: 1, path: 2 };\n\n    const groups = [\n      { regex: gsRegex, indices: gsIndices, postModify: gsModify },\n      {\n        regex: firebaseStorageRegExp,\n        indices: firebaseStorageIndices,\n        postModify: httpModify\n      },\n      {\n        regex: cloudStorageRegExp,\n        indices: cloudStorageIndices,\n        postModify: httpModify\n      }\n    ];\n    for (let i = 0; i < groups.length; i++) {\n      const group = groups[i];\n      const captures = group.regex.exec(url);\n      if (captures) {\n        const bucketValue = captures[group.indices.bucket];\n        let pathValue = captures[group.indices.path];\n        if (!pathValue) {\n          pathValue = '';\n        }\n        location = new Location(bucketValue, pathValue);\n        group.postModify(location);\n        break;\n      }\n    }\n    if (location == null) {\n      throw invalidUrl(url);\n    }\n    return location;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Network headers */\nexport type Headers = Record<string, string>;\n\n/** Response type exposed by the networking APIs. */\nexport type ConnectionType =\n  | string\n  | ArrayBuffer\n  | Blob\n  | NodeJS.ReadableStream;\n\n/**\n * A lightweight wrapper around XMLHttpRequest with a\n * goog.net.XhrIo-like interface.\n *\n * You can create a new connection by invoking `newTextConnection()`,\n * `newBytesConnection()` or `newStreamConnection()`.\n */\nexport interface Connection<T extends ConnectionType> {\n  /**\n   * Sends a request to the provided URL.\n   *\n   * This method never rejects its promise. In case of encountering an error,\n   * it sets an error code internally which can be accessed by calling\n   * getErrorCode() by callers.\n   */\n  send(\n    url: string,\n    method: string,\n    body?: ArrayBufferView | Blob | string | null,\n    headers?: Headers\n  ): Promise<void>;\n\n  getErrorCode(): ErrorCode;\n\n  getStatus(): number;\n\n  getResponse(): T;\n\n  getErrorText(): string;\n\n  /**\n   * Abort the request.\n   */\n  abort(): void;\n\n  getResponseHeader(header: string): string | null;\n\n  addUploadProgressListener(listener: (p1: ProgressEvent) => void): void;\n\n  removeUploadProgressListener(listener: (p1: ProgressEvent) => void): void;\n}\n\n/**\n * Error codes for requests made by the the XhrIo wrapper.\n */\nexport enum ErrorCode {\n  NO_ERROR = 0,\n  NETWORK_ERROR = 1,\n  ABORT = 2\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { StorageError } from './error';\nimport { Request } from './request';\n\n/**\n * A request whose promise always fails.\n */\nexport class FailRequest<T> implements Request<T> {\n  promise_: Promise<T>;\n\n  constructor(error: StorageError) {\n    this.promise_ = Promise.reject<T>(error);\n  }\n\n  /** @inheritDoc */\n  getPromise(): Promise<T> {\n    return this.promise_;\n  }\n\n  /** @inheritDoc */\n  cancel(_appDelete = false): void {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isNode } from '@firebase/util';\nimport { invalidArgument } from './error';\n\nexport function isJustDef<T>(p: T | null | undefined): p is T | null {\n  return p !== void 0;\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isFunction(p: unknown): p is Function {\n  return typeof p === 'function';\n}\n\nexport function isNonArrayObject(p: unknown): boolean {\n  return typeof p === 'object' && !Array.isArray(p);\n}\n\nexport function isString(p: unknown): p is string {\n  return typeof p === 'string' || p instanceof String;\n}\n\nexport function isNativeBlob(p: unknown): p is Blob {\n  return isNativeBlobDefined() && p instanceof Blob;\n}\n\nexport function isNativeBlobDefined(): boolean {\n  // Note: The `isNode()` check can be removed when `node-fetch` adds native Blob support\n  // PR: https://github.com/node-fetch/node-fetch/pull/1664\n  return typeof Blob !== 'undefined' && !isNode();\n}\n\nexport function validateNumber(\n  argument: string,\n  minValue: number,\n  maxValue: number,\n  value: number\n): void {\n  if (value < minValue) {\n    throw invalidArgument(\n      `Invalid value for '${argument}'. Expected ${minValue} or greater.`\n    );\n  }\n  if (value > maxValue) {\n    throw invalidArgument(\n      `Invalid value for '${argument}'. Expected ${maxValue} or less.`\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Functions to create and manipulate URLs for the server API.\n */\nimport { UrlParams } from './requestinfo';\n\nexport function makeUrl(\n  urlPart: string,\n  host: string,\n  protocol: string\n): string {\n  let origin = host;\n  if (protocol == null) {\n    origin = `https://${host}`;\n  }\n  return `${protocol}://${origin}/v0${urlPart}`;\n}\n\nexport function makeQueryString(params: UrlParams): string {\n  const encode = encodeURIComponent;\n  let queryPart = '?';\n  for (const key in params) {\n    if (params.hasOwnProperty(key)) {\n      const nextPart = encode(key) + '=' + encode(params[key]);\n      queryPart = queryPart + nextPart + '&';\n    }\n  }\n\n  // Chop off the extra '&' or '?' on the end\n  queryPart = queryPart.slice(0, -1);\n  return queryPart;\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks the status code to see if the action should be retried.\n *\n * @param status Current HTTP status code returned by server.\n * @param additionalRetryCodes additional retry codes to check against\n */\nexport function isRetryStatusCode(\n  status: number,\n  additionalRetryCodes: number[]\n): boolean {\n  // The codes for which to retry came from this page:\n  // https://cloud.google.com/storage/docs/exponential-backoff\n  const isFiveHundredCode = status >= 500 && status < 600;\n  const extraRetryCodes = [\n    // Request Timeout: web server didn't receive full request in time.\n    408,\n    // Too Many Requests: you're getting rate-limited, basically.\n    429\n  ];\n  const isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\n  const isAdditionalRetryCode = additionalRetryCodes.indexOf(status) !== -1;\n  return isFiveHundredCode || isExtraRetryCode || isAdditionalRetryCode;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines methods used to actually send HTTP requests from\n * abstract representations.\n */\n\nimport { id as backoffId, start, stop } from './backoff';\nimport { appDeleted, canceled, retryLimitExceeded, unknown } from './error';\nimport { ErrorHandler, RequestHandler, RequestInfo } from './requestinfo';\nimport { isJustDef } from './type';\nimport { makeQueryString } from './url';\nimport { Connection, ErrorCode, Headers, ConnectionType } from './connection';\nimport { isRetryStatusCode } from './utils';\n\nexport interface Request<T> {\n  getPromise(): Promise<T>;\n\n  /**\n   * Cancels the request. IMPORTANT: the promise may still be resolved with an\n   * appropriate value (if the request is finished before you call this method,\n   * but the promise has not yet been resolved), so don't just assume it will be\n   * rejected if you call this function.\n   * @param appDelete - True if the cancelation came from the app being deleted.\n   */\n  cancel(appDelete?: boolean): void;\n}\n\n/**\n * Handles network logic for all Storage Requests, including error reporting and\n * retries with backoff.\n *\n * @param I - the type of the backend's network response.\n * @param - O the output type used by the rest of the SDK. The conversion\n * happens in the specified `callback_`.\n */\nclass NetworkRequest<I extends ConnectionType, O> implements Request<O> {\n  private pendingConnection_: Connection<I> | null = null;\n  private backoffId_: backoffId | null = null;\n  private resolve_!: (value?: O | PromiseLike<O>) => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private reject_!: (reason?: any) => void;\n  private canceled_: boolean = false;\n  private appDelete_: boolean = false;\n  private promise_: Promise<O>;\n\n  constructor(\n    private url_: string,\n    private method_: string,\n    private headers_: Headers,\n    private body_: string | Blob | Uint8Array | null,\n    private successCodes_: number[],\n    private additionalRetryCodes_: number[],\n    private callback_: RequestHandler<I, O>,\n    private errorCallback_: ErrorHandler | null,\n    private timeout_: number,\n    private progressCallback_: ((p1: number, p2: number) => void) | null,\n    private connectionFactory_: () => Connection<I>,\n    private retry = true\n  ) {\n    this.promise_ = new Promise((resolve, reject) => {\n      this.resolve_ = resolve as (value?: O | PromiseLike<O>) => void;\n      this.reject_ = reject;\n      this.start_();\n    });\n  }\n\n  /**\n   * Actually starts the retry loop.\n   */\n  private start_(): void {\n    const doTheRequest: (\n      backoffCallback: (success: boolean, ...p2: unknown[]) => void,\n      canceled: boolean\n    ) => void = (backoffCallback, canceled) => {\n      if (canceled) {\n        backoffCallback(false, new RequestEndStatus(false, null, true));\n        return;\n      }\n      const connection = this.connectionFactory_();\n      this.pendingConnection_ = connection;\n\n      const progressListener: (\n        progressEvent: ProgressEvent\n      ) => void = progressEvent => {\n        const loaded = progressEvent.loaded;\n        const total = progressEvent.lengthComputable ? progressEvent.total : -1;\n        if (this.progressCallback_ !== null) {\n          this.progressCallback_(loaded, total);\n        }\n      };\n      if (this.progressCallback_ !== null) {\n        connection.addUploadProgressListener(progressListener);\n      }\n\n      // connection.send() never rejects, so we don't need to have a error handler or use catch on the returned promise.\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      connection\n        .send(this.url_, this.method_, this.body_, this.headers_)\n        .then(() => {\n          if (this.progressCallback_ !== null) {\n            connection.removeUploadProgressListener(progressListener);\n          }\n          this.pendingConnection_ = null;\n          const hitServer = connection.getErrorCode() === ErrorCode.NO_ERROR;\n          const status = connection.getStatus();\n          if (\n            !hitServer ||\n            (isRetryStatusCode(status, this.additionalRetryCodes_) &&\n              this.retry)\n          ) {\n            const wasCanceled = connection.getErrorCode() === ErrorCode.ABORT;\n            backoffCallback(\n              false,\n              new RequestEndStatus(false, null, wasCanceled)\n            );\n            return;\n          }\n          const successCode = this.successCodes_.indexOf(status) !== -1;\n          backoffCallback(true, new RequestEndStatus(successCode, connection));\n        });\n    };\n\n    /**\n     * @param requestWentThrough - True if the request eventually went\n     *     through, false if it hit the retry limit or was canceled.\n     */\n    const backoffDone: (\n      requestWentThrough: boolean,\n      status: RequestEndStatus<I>\n    ) => void = (requestWentThrough, status) => {\n      const resolve = this.resolve_;\n      const reject = this.reject_;\n      const connection = status.connection as Connection<I>;\n      if (status.wasSuccessCode) {\n        try {\n          const result = this.callback_(connection, connection.getResponse());\n          if (isJustDef(result)) {\n            resolve(result);\n          } else {\n            resolve();\n          }\n        } catch (e) {\n          reject(e);\n        }\n      } else {\n        if (connection !== null) {\n          const err = unknown();\n          err.serverResponse = connection.getErrorText();\n          if (this.errorCallback_) {\n            reject(this.errorCallback_(connection, err));\n          } else {\n            reject(err);\n          }\n        } else {\n          if (status.canceled) {\n            const err = this.appDelete_ ? appDeleted() : canceled();\n            reject(err);\n          } else {\n            const err = retryLimitExceeded();\n            reject(err);\n          }\n        }\n      }\n    };\n    if (this.canceled_) {\n      backoffDone(false, new RequestEndStatus(false, null, true));\n    } else {\n      this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\n    }\n  }\n\n  /** @inheritDoc */\n  getPromise(): Promise<O> {\n    return this.promise_;\n  }\n\n  /** @inheritDoc */\n  cancel(appDelete?: boolean): void {\n    this.canceled_ = true;\n    this.appDelete_ = appDelete || false;\n    if (this.backoffId_ !== null) {\n      stop(this.backoffId_);\n    }\n    if (this.pendingConnection_ !== null) {\n      this.pendingConnection_.abort();\n    }\n  }\n}\n\n/**\n * A collection of information about the result of a network request.\n * @param opt_canceled - Defaults to false.\n */\nexport class RequestEndStatus<I extends ConnectionType> {\n  /**\n   * True if the request was canceled.\n   */\n  canceled: boolean;\n\n  constructor(\n    public wasSuccessCode: boolean,\n    public connection: Connection<I> | null,\n    canceled?: boolean\n  ) {\n    this.canceled = !!canceled;\n  }\n}\n\nexport function addAuthHeader_(\n  headers: Headers,\n  authToken: string | null\n): void {\n  if (authToken !== null && authToken.length > 0) {\n    headers['Authorization'] = 'Firebase ' + authToken;\n  }\n}\n\nexport function addVersionHeader_(\n  headers: Headers,\n  firebaseVersion?: string\n): void {\n  headers['X-Firebase-Storage-Version'] =\n    'webjs/' + (firebaseVersion ?? 'AppManager');\n}\n\nexport function addGmpidHeader_(headers: Headers, appId: string | null): void {\n  if (appId) {\n    headers['X-Firebase-GMPID'] = appId;\n  }\n}\n\nexport function addAppCheckHeader_(\n  headers: Headers,\n  appCheckToken: string | null\n): void {\n  if (appCheckToken !== null) {\n    headers['X-Firebase-AppCheck'] = appCheckToken;\n  }\n}\n\nexport function makeRequest<I extends ConnectionType, O>(\n  requestInfo: RequestInfo<I, O>,\n  appId: string | null,\n  authToken: string | null,\n  appCheckToken: string | null,\n  requestFactory: () => Connection<I>,\n  firebaseVersion?: string,\n  retry = true\n): Request<O> {\n  const queryPart = makeQueryString(requestInfo.urlParams);\n  const url = requestInfo.url + queryPart;\n  const headers = Object.assign({}, requestInfo.headers);\n  addGmpidHeader_(headers, appId);\n  addAuthHeader_(headers, authToken);\n  addVersionHeader_(headers, firebaseVersion);\n  addAppCheckHeader_(headers, appCheckToken);\n  return new NetworkRequest<I, O>(\n    url,\n    requestInfo.method,\n    headers,\n    requestInfo.body,\n    requestInfo.successCodes,\n    requestInfo.additionalRetryCodes,\n    requestInfo.handler,\n    requestInfo.errorHandler,\n    requestInfo.timeout,\n    requestInfo.progressCallback,\n    requestFactory,\n    retry\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides a method for running a function with exponential\n * backoff.\n */\ntype id = (p1: boolean) => void;\n\nexport { id };\n\n/**\n * Accepts a callback for an action to perform (`doRequest`),\n * and then a callback for when the backoff has completed (`backoffCompleteCb`).\n * The callback sent to start requires an argument to call (`onRequestComplete`).\n * When `start` calls `doRequest`, it passes a callback for when the request has\n * completed, `onRequestComplete`. Based on this, the backoff continues, with\n * another call to `doRequest` and the above loop continues until the timeout\n * is hit, or a successful response occurs.\n * @description\n * @param doRequest Callback to perform request\n * @param backoffCompleteCb Callback to call when backoff has been completed\n */\nexport function start(\n  doRequest: (\n    onRequestComplete: (success: boolean) => void,\n    canceled: boolean\n  ) => void,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  backoffCompleteCb: (...args: any[]) => unknown,\n  timeout: number\n): id {\n  // TODO(andysoto): make this code cleaner (probably refactor into an actual\n  // type instead of a bunch of functions with state shared in the closure)\n  let waitSeconds = 1;\n  // Would type this as \"number\" but that doesn't work for Node so \\_()_/\n  // TODO: find a way to exclude Node type definition for storage because storage only works in browser\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let retryTimeoutId: any = null;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let globalTimeoutId: any = null;\n  let hitTimeout = false;\n  let cancelState = 0;\n\n  function canceled(): boolean {\n    return cancelState === 2;\n  }\n  let triggeredCallback = false;\n\n  function triggerCallback(...args: any[]): void {\n    if (!triggeredCallback) {\n      triggeredCallback = true;\n      backoffCompleteCb.apply(null, args);\n    }\n  }\n\n  function callWithDelay(millis: number): void {\n    retryTimeoutId = setTimeout(() => {\n      retryTimeoutId = null;\n      doRequest(responseHandler, canceled());\n    }, millis);\n  }\n\n  function clearGlobalTimeout(): void {\n    if (globalTimeoutId) {\n      clearTimeout(globalTimeoutId);\n    }\n  }\n\n  function responseHandler(success: boolean, ...args: any[]): void {\n    if (triggeredCallback) {\n      clearGlobalTimeout();\n      return;\n    }\n    if (success) {\n      clearGlobalTimeout();\n      triggerCallback.call(null, success, ...args);\n      return;\n    }\n    const mustStop = canceled() || hitTimeout;\n    if (mustStop) {\n      clearGlobalTimeout();\n      triggerCallback.call(null, success, ...args);\n      return;\n    }\n    if (waitSeconds < 64) {\n      /* TODO(andysoto): don't back off so quickly if we know we're offline. */\n      waitSeconds *= 2;\n    }\n    let waitMillis;\n    if (cancelState === 1) {\n      cancelState = 2;\n      waitMillis = 0;\n    } else {\n      waitMillis = (waitSeconds + Math.random()) * 1000;\n    }\n    callWithDelay(waitMillis);\n  }\n  let stopped = false;\n\n  function stop(wasTimeout: boolean): void {\n    if (stopped) {\n      return;\n    }\n    stopped = true;\n    clearGlobalTimeout();\n    if (triggeredCallback) {\n      return;\n    }\n    if (retryTimeoutId !== null) {\n      if (!wasTimeout) {\n        cancelState = 2;\n      }\n      clearTimeout(retryTimeoutId);\n      callWithDelay(0);\n    } else {\n      if (!wasTimeout) {\n        cancelState = 1;\n      }\n    }\n  }\n  callWithDelay(0);\n  globalTimeoutId = setTimeout(() => {\n    hitTimeout = true;\n    stop(true);\n  }, timeout);\n  return stop;\n}\n\n/**\n * Stops the retry loop from repeating.\n * If the function is currently \"in between\" retries, it is invoked immediately\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\n * after the current invocation finishes iff the current invocation would have\n * triggered another retry.\n */\nexport function stop(id: id): void {\n  id(false);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Some methods copied from goog.fs.\n * We don't include goog.fs because it pulls in a bunch of Deferred code that\n * bloats the size of the released binary.\n */\nimport { isNativeBlobDefined } from './type';\nimport { StorageErrorCode, StorageError } from './error';\n\nfunction getBlobBuilder(): typeof IBlobBuilder | undefined {\n  if (typeof BlobBuilder !== 'undefined') {\n    return BlobBuilder;\n  } else if (typeof WebKitBlobBuilder !== 'undefined') {\n    return WebKitBlobBuilder;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Concatenates one or more values together and converts them to a Blob.\n *\n * @param args The values that will make up the resulting blob.\n * @return The blob.\n */\nexport function getBlob(...args: Array<string | Blob | ArrayBuffer>): Blob {\n  const BlobBuilder = getBlobBuilder();\n  if (BlobBuilder !== undefined) {\n    const bb = new BlobBuilder();\n    for (let i = 0; i < args.length; i++) {\n      bb.append(args[i]);\n    }\n    return bb.getBlob();\n  } else {\n    if (isNativeBlobDefined()) {\n      return new Blob(args);\n    } else {\n      throw new StorageError(\n        StorageErrorCode.UNSUPPORTED_ENVIRONMENT,\n        \"This browser doesn't seem to support creating Blobs\"\n      );\n    }\n  }\n}\n\n/**\n * Slices the blob. The returned blob contains data from the start byte\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\n *\n * @param blob The blob to be sliced.\n * @param start Index of the starting byte.\n * @param end Index of the ending byte.\n * @return The blob slice or null if not supported.\n */\nexport function sliceBlob(blob: Blob, start: number, end: number): Blob | null {\n  if (blob.webkitSlice) {\n    return blob.webkitSlice(start, end);\n  } else if (blob.mozSlice) {\n    return blob.mozSlice(start, end);\n  } else if (blob.slice) {\n    return blob.slice(start, end);\n  }\n  return null;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { missingPolyFill } from '../../implementation/error';\n\n/** Converts a Base64 encoded string to a binary string. */\nexport function decodeBase64(encoded: string): string {\n  if (typeof atob === 'undefined') {\n    throw missingPolyFill('base-64');\n  }\n  return atob(encoded);\n}\n\nexport function decodeUint8Array(data: Uint8Array): string {\n  return new TextDecoder().decode(data);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { unknown, invalidFormat } from './error';\nimport { decodeBase64 } from '../platform/base64';\n\n/**\n * An enumeration of the possible string formats for upload.\n * @public\n */\nexport type StringFormat = typeof StringFormat[keyof typeof StringFormat];\n/**\n * An enumeration of the possible string formats for upload.\n * @public\n */\nexport const StringFormat = {\n  /**\n   * Indicates the string should be interpreted \"raw\", that is, as normal text.\n   * The string will be interpreted as UTF-16, then uploaded as a UTF-8 byte\n   * sequence.\n   * Example: The string 'Hello! \\\\ud83d\\\\ude0a' becomes the byte sequence\n   * 48 65 6c 6c 6f 21 20 f0 9f 98 8a\n   */\n  RAW: 'raw',\n  /**\n   * Indicates the string should be interpreted as base64-encoded data.\n   * Padding characters (trailing '='s) are optional.\n   * Example: The string 'rWmO++E6t7/rlw==' becomes the byte sequence\n   * ad 69 8e fb e1 3a b7 bf eb 97\n   */\n  BASE64: 'base64',\n  /**\n   * Indicates the string should be interpreted as base64url-encoded data.\n   * Padding characters (trailing '='s) are optional.\n   * Example: The string 'rWmO--E6t7_rlw==' becomes the byte sequence\n   * ad 69 8e fb e1 3a b7 bf eb 97\n   */\n  BASE64URL: 'base64url',\n  /**\n   * Indicates the string is a data URL, such as one obtained from\n   * canvas.toDataURL().\n   * Example: the string 'data:application/octet-stream;base64,aaaa'\n   * becomes the byte sequence\n   * 69 a6 9a\n   * (the content-type \"application/octet-stream\" is also applied, but can\n   * be overridden in the metadata object).\n   */\n  DATA_URL: 'data_url'\n} as const;\n\nexport class StringData {\n  contentType: string | null;\n\n  constructor(public data: Uint8Array, contentType?: string | null) {\n    this.contentType = contentType || null;\n  }\n}\n\n/**\n * @internal\n */\nexport function dataFromString(\n  format: StringFormat,\n  stringData: string\n): StringData {\n  switch (format) {\n    case StringFormat.RAW:\n      return new StringData(utf8Bytes_(stringData));\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n      return new StringData(base64Bytes_(format, stringData));\n    case StringFormat.DATA_URL:\n      return new StringData(\n        dataURLBytes_(stringData),\n        dataURLContentType_(stringData)\n      );\n    default:\n    // do nothing\n  }\n\n  // assert(false);\n  throw unknown();\n}\n\nexport function utf8Bytes_(value: string): Uint8Array {\n  const b: number[] = [];\n  for (let i = 0; i < value.length; i++) {\n    let c = value.charCodeAt(i);\n    if (c <= 127) {\n      b.push(c);\n    } else {\n      if (c <= 2047) {\n        b.push(192 | (c >> 6), 128 | (c & 63));\n      } else {\n        if ((c & 64512) === 55296) {\n          // The start of a surrogate pair.\n          const valid =\n            i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\n          if (!valid) {\n            // The second surrogate wasn't there.\n            b.push(239, 191, 189);\n          } else {\n            const hi = c;\n            const lo = value.charCodeAt(++i);\n            c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\n            b.push(\n              240 | (c >> 18),\n              128 | ((c >> 12) & 63),\n              128 | ((c >> 6) & 63),\n              128 | (c & 63)\n            );\n          }\n        } else {\n          if ((c & 64512) === 56320) {\n            // Invalid low surrogate.\n            b.push(239, 191, 189);\n          } else {\n            b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\n          }\n        }\n      }\n    }\n  }\n  return new Uint8Array(b);\n}\n\nexport function percentEncodedBytes_(value: string): Uint8Array {\n  let decoded;\n  try {\n    decoded = decodeURIComponent(value);\n  } catch (e) {\n    throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\n  }\n  return utf8Bytes_(decoded);\n}\n\nexport function base64Bytes_(format: StringFormat, value: string): Uint8Array {\n  switch (format) {\n    case StringFormat.BASE64: {\n      const hasMinus = value.indexOf('-') !== -1;\n      const hasUnder = value.indexOf('_') !== -1;\n      if (hasMinus || hasUnder) {\n        const invalidChar = hasMinus ? '-' : '_';\n        throw invalidFormat(\n          format,\n          \"Invalid character '\" +\n            invalidChar +\n            \"' found: is it base64url encoded?\"\n        );\n      }\n      break;\n    }\n    case StringFormat.BASE64URL: {\n      const hasPlus = value.indexOf('+') !== -1;\n      const hasSlash = value.indexOf('/') !== -1;\n      if (hasPlus || hasSlash) {\n        const invalidChar = hasPlus ? '+' : '/';\n        throw invalidFormat(\n          format,\n          \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\"\n        );\n      }\n      value = value.replace(/-/g, '+').replace(/_/g, '/');\n      break;\n    }\n    default:\n    // do nothing\n  }\n  let bytes;\n  try {\n    bytes = decodeBase64(value);\n  } catch (e) {\n    if ((e as Error).message.includes('polyfill')) {\n      throw e;\n    }\n    throw invalidFormat(format, 'Invalid character found');\n  }\n  const array = new Uint8Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = bytes.charCodeAt(i);\n  }\n  return array;\n}\n\nclass DataURLParts {\n  base64: boolean = false;\n  contentType: string | null = null;\n  rest: string;\n\n  constructor(dataURL: string) {\n    const matches = dataURL.match(/^data:([^,]+)?,/);\n    if (matches === null) {\n      throw invalidFormat(\n        StringFormat.DATA_URL,\n        \"Must be formatted 'data:[<mediatype>][;base64],<data>\"\n      );\n    }\n    const middle = matches[1] || null;\n    if (middle != null) {\n      this.base64 = endsWith(middle, ';base64');\n      this.contentType = this.base64\n        ? middle.substring(0, middle.length - ';base64'.length)\n        : middle;\n    }\n    this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n  }\n}\n\nexport function dataURLBytes_(dataUrl: string): Uint8Array {\n  const parts = new DataURLParts(dataUrl);\n  if (parts.base64) {\n    return base64Bytes_(StringFormat.BASE64, parts.rest);\n  } else {\n    return percentEncodedBytes_(parts.rest);\n  }\n}\n\nexport function dataURLContentType_(dataUrl: string): string | null {\n  const parts = new DataURLParts(dataUrl);\n  return parts.contentType;\n}\n\nfunction endsWith(s: string, end: string): boolean {\n  const longEnough = s.length >= end.length;\n  if (!longEnough) {\n    return false;\n  }\n\n  return s.substring(s.length - end.length) === end;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @file Provides a Blob-like wrapper for various binary types (including the\n * native Blob type). This makes it possible to upload types like ArrayBuffers,\n * making uploads possible in environments without the native Blob type.\n */\nimport { sliceBlob, getBlob } from './fs';\nimport { StringFormat, dataFromString } from './string';\nimport { isNativeBlob, isNativeBlobDefined, isString } from './type';\n\n/**\n * @param opt_elideCopy - If true, doesn't copy mutable input data\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\n *     modified after this blob's construction.\n *\n * @internal\n */\nexport class FbsBlob {\n  private data_!: Blob | Uint8Array;\n  private size_: number;\n  private type_: string;\n\n  constructor(data: Blob | Uint8Array | ArrayBuffer, elideCopy?: boolean) {\n    let size: number = 0;\n    let blobType: string = '';\n    if (isNativeBlob(data)) {\n      this.data_ = data as Blob;\n      size = (data as Blob).size;\n      blobType = (data as Blob).type;\n    } else if (data instanceof ArrayBuffer) {\n      if (elideCopy) {\n        this.data_ = new Uint8Array(data);\n      } else {\n        this.data_ = new Uint8Array(data.byteLength);\n        this.data_.set(new Uint8Array(data));\n      }\n      size = this.data_.length;\n    } else if (data instanceof Uint8Array) {\n      if (elideCopy) {\n        this.data_ = data as Uint8Array;\n      } else {\n        this.data_ = new Uint8Array(data.length);\n        this.data_.set(data as Uint8Array);\n      }\n      size = data.length;\n    }\n    this.size_ = size;\n    this.type_ = blobType;\n  }\n\n  size(): number {\n    return this.size_;\n  }\n\n  type(): string {\n    return this.type_;\n  }\n\n  slice(startByte: number, endByte: number): FbsBlob | null {\n    if (isNativeBlob(this.data_)) {\n      const realBlob = this.data_ as Blob;\n      const sliced = sliceBlob(realBlob, startByte, endByte);\n      if (sliced === null) {\n        return null;\n      }\n      return new FbsBlob(sliced);\n    } else {\n      const slice = new Uint8Array(\n        (this.data_ as Uint8Array).buffer,\n        startByte,\n        endByte - startByte\n      );\n      return new FbsBlob(slice, true);\n    }\n  }\n\n  static getBlob(...args: Array<string | FbsBlob>): FbsBlob | null {\n    if (isNativeBlobDefined()) {\n      const blobby: Array<Blob | Uint8Array | string> = args.map(\n        (val: string | FbsBlob): Blob | Uint8Array | string => {\n          if (val instanceof FbsBlob) {\n            return val.data_;\n          } else {\n            return val;\n          }\n        }\n      );\n      return new FbsBlob(getBlob.apply(null, blobby));\n    } else {\n      const uint8Arrays: Uint8Array[] = args.map(\n        (val: string | FbsBlob): Uint8Array => {\n          if (isString(val)) {\n            return dataFromString(StringFormat.RAW, val as string).data;\n          } else {\n            // Blobs don't exist, so this has to be a Uint8Array.\n            return (val as FbsBlob).data_ as Uint8Array;\n          }\n        }\n      );\n      let finalLength = 0;\n      uint8Arrays.forEach((array: Uint8Array): void => {\n        finalLength += array.byteLength;\n      });\n      const merged = new Uint8Array(finalLength);\n      let index = 0;\n      uint8Arrays.forEach((array: Uint8Array) => {\n        for (let i = 0; i < array.length; i++) {\n          merged[index++] = array[i];\n        }\n      });\n      return new FbsBlob(merged, true);\n    }\n  }\n\n  uploadData(): Blob | Uint8Array {\n    return this.data_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNonArrayObject } from './type';\n\n/**\n * Returns the Object resulting from parsing the given JSON, or null if the\n * given string does not represent a JSON object.\n */\nexport function jsonObjectOrNull(\n  s: string\n): { [name: string]: unknown } | null {\n  let obj;\n  try {\n    obj = JSON.parse(s);\n  } catch (e) {\n    return null;\n  }\n  if (isNonArrayObject(obj)) {\n    return obj;\n  } else {\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Contains helper methods for manipulating paths.\n */\n\n/**\n * @return Null if the path is already at the root.\n */\nexport function parent(path: string): string | null {\n  if (path.length === 0) {\n    return null;\n  }\n  const index = path.lastIndexOf('/');\n  if (index === -1) {\n    return '';\n  }\n  const newPath = path.slice(0, index);\n  return newPath;\n}\n\nexport function child(path: string, childPath: string): string {\n  const canonicalChildPath = childPath\n    .split('/')\n    .filter(component => component.length > 0)\n    .join('/');\n  if (path.length === 0) {\n    return canonicalChildPath;\n  } else {\n    return path + '/' + canonicalChildPath;\n  }\n}\n\n/**\n * Returns the last component of a path.\n * '/foo/bar' -> 'bar'\n * '/foo/bar/baz/' -> 'baz/'\n * '/a' -> 'a'\n */\nexport function lastComponent(path: string): string {\n  const index = path.lastIndexOf('/', path.length - 2);\n  if (index === -1) {\n    return path;\n  } else {\n    return path.slice(index + 1);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Documentation for the metadata format\n */\nimport { Metadata } from '../metadata';\n\nimport { jsonObjectOrNull } from './json';\nimport { Location } from './location';\nimport { lastComponent } from './path';\nimport { isString } from './type';\nimport { makeUrl, makeQueryString } from './url';\nimport { Reference } from '../reference';\nimport { FirebaseStorageImpl } from '../service';\n\nexport function noXform_<T>(metadata: Metadata, value: T): T {\n  return value;\n}\n\nclass Mapping<T> {\n  local: string;\n  writable: boolean;\n  xform: (p1: Metadata, p2?: T) => T | undefined;\n\n  constructor(\n    public server: string,\n    local?: string | null,\n    writable?: boolean,\n    xform?: ((p1: Metadata, p2?: T) => T | undefined) | null\n  ) {\n    this.local = local || server;\n    this.writable = !!writable;\n    this.xform = xform || noXform_;\n  }\n}\ntype Mappings = Array<Mapping<string> | Mapping<number>>;\n\nexport { Mappings };\n\nlet mappings_: Mappings | null = null;\n\nexport function xformPath(fullPath: string | undefined): string | undefined {\n  if (!isString(fullPath) || fullPath.length < 2) {\n    return fullPath;\n  } else {\n    return lastComponent(fullPath);\n  }\n}\n\nexport function getMappings(): Mappings {\n  if (mappings_) {\n    return mappings_;\n  }\n  const mappings: Mappings = [];\n  mappings.push(new Mapping<string>('bucket'));\n  mappings.push(new Mapping<string>('generation'));\n  mappings.push(new Mapping<string>('metageneration'));\n  mappings.push(new Mapping<string>('name', 'fullPath', true));\n\n  function mappingsXformPath(\n    _metadata: Metadata,\n    fullPath: string | undefined\n  ): string | undefined {\n    return xformPath(fullPath);\n  }\n  const nameMapping = new Mapping<string>('name');\n  nameMapping.xform = mappingsXformPath;\n  mappings.push(nameMapping);\n\n  /**\n   * Coerces the second param to a number, if it is defined.\n   */\n  function xformSize(\n    _metadata: Metadata,\n    size?: number | string\n  ): number | undefined {\n    if (size !== undefined) {\n      return Number(size);\n    } else {\n      return size;\n    }\n  }\n  const sizeMapping = new Mapping<number>('size');\n  sizeMapping.xform = xformSize;\n  mappings.push(sizeMapping);\n  mappings.push(new Mapping<number>('timeCreated'));\n  mappings.push(new Mapping<string>('updated'));\n  mappings.push(new Mapping<string>('md5Hash', null, true));\n  mappings.push(new Mapping<string>('cacheControl', null, true));\n  mappings.push(new Mapping<string>('contentDisposition', null, true));\n  mappings.push(new Mapping<string>('contentEncoding', null, true));\n  mappings.push(new Mapping<string>('contentLanguage', null, true));\n  mappings.push(new Mapping<string>('contentType', null, true));\n  mappings.push(new Mapping<string>('metadata', 'customMetadata', true));\n  mappings_ = mappings;\n  return mappings_;\n}\n\nexport function addRef(metadata: Metadata, service: FirebaseStorageImpl): void {\n  function generateRef(): Reference {\n    const bucket: string = metadata['bucket'] as string;\n    const path: string = metadata['fullPath'] as string;\n    const loc = new Location(bucket, path);\n    return service._makeStorageReference(loc);\n  }\n  Object.defineProperty(metadata, 'ref', { get: generateRef });\n}\n\nexport function fromResource(\n  service: FirebaseStorageImpl,\n  resource: { [name: string]: unknown },\n  mappings: Mappings\n): Metadata {\n  const metadata: Metadata = {} as Metadata;\n  metadata['type'] = 'file';\n  const len = mappings.length;\n  for (let i = 0; i < len; i++) {\n    const mapping = mappings[i];\n    metadata[mapping.local] = (mapping as Mapping<unknown>).xform(\n      metadata,\n      resource[mapping.server]\n    );\n  }\n  addRef(metadata, service);\n  return metadata;\n}\n\nexport function fromResourceString(\n  service: FirebaseStorageImpl,\n  resourceString: string,\n  mappings: Mappings\n): Metadata | null {\n  const obj = jsonObjectOrNull(resourceString);\n  if (obj === null) {\n    return null;\n  }\n  const resource = obj as Metadata;\n  return fromResource(service, resource, mappings);\n}\n\nexport function downloadUrlFromResourceString(\n  metadata: Metadata,\n  resourceString: string,\n  host: string,\n  protocol: string\n): string | null {\n  const obj = jsonObjectOrNull(resourceString);\n  if (obj === null) {\n    return null;\n  }\n  if (!isString(obj['downloadTokens'])) {\n    // This can happen if objects are uploaded through GCS and retrieved\n    // through list, so we don't want to throw an Error.\n    return null;\n  }\n  const tokens: string = obj['downloadTokens'] as string;\n  if (tokens.length === 0) {\n    return null;\n  }\n  const encode = encodeURIComponent;\n  const tokensList = tokens.split(',');\n  const urls = tokensList.map((token: string): string => {\n    const bucket: string = metadata['bucket'] as string;\n    const path: string = metadata['fullPath'] as string;\n    const urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\n    const base = makeUrl(urlPart, host, protocol);\n    const queryString = makeQueryString({\n      alt: 'media',\n      token\n    });\n    return base + queryString;\n  });\n  return urls[0];\n}\n\nexport function toResourceString(\n  metadata: Partial<Metadata>,\n  mappings: Mappings\n): string {\n  const resource: {\n    [prop: string]: unknown;\n  } = {};\n  const len = mappings.length;\n  for (let i = 0; i < len; i++) {\n    const mapping = mappings[i];\n    if (mapping.writable) {\n      resource[mapping.server] = metadata[mapping.local];\n    }\n  }\n  return JSON.stringify(resource);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { StorageError } from './error';\nimport { Headers, Connection, ConnectionType } from './connection';\n\n/**\n * Type for url params stored in RequestInfo.\n */\nexport interface UrlParams {\n  [name: string]: string | number;\n}\n\n/**\n * A function that converts a server response to the API type expected by the\n * SDK.\n *\n * @param I - the type of the backend's network response\n * @param O - the output response type used by the rest of the SDK.\n */\nexport type RequestHandler<I extends ConnectionType, O> = (\n  connection: Connection<I>,\n  response: I\n) => O;\n\n/** A function to handle an error. */\nexport type ErrorHandler = (\n  connection: Connection<ConnectionType>,\n  response: StorageError\n) => StorageError;\n\n/**\n * Contains a fully specified request.\n *\n * @param I - the type of the backend's network response.\n * @param O - the output response type used by the rest of the SDK.\n */\nexport class RequestInfo<I extends ConnectionType, O> {\n  urlParams: UrlParams = {};\n  headers: Headers = {};\n  body: Blob | string | Uint8Array | null = null;\n  errorHandler: ErrorHandler | null = null;\n\n  /**\n   * Called with the current number of bytes uploaded and total size (-1 if not\n   * computable) of the request body (i.e. used to report upload progress).\n   */\n  progressCallback: ((p1: number, p2: number) => void) | null = null;\n  successCodes: number[] = [200];\n  additionalRetryCodes: number[] = [];\n\n  constructor(\n    public url: string,\n    public method: string,\n    /**\n     * Returns the value with which to resolve the request's promise. Only called\n     * if the request is successful. Throw from this function to reject the\n     * returned Request's promise with the thrown error.\n     * Note: The XhrIo passed to this function may be reused after this callback\n     * returns. Do not keep a reference to it in any way.\n     */\n    public handler: RequestHandler<I, O>,\n    public timeout: number\n  ) {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines methods for interacting with the network.\n */\n\nimport { Metadata } from '../metadata';\nimport { ListResult } from '../list';\nimport { FbsBlob } from './blob';\nimport {\n  StorageError,\n  cannotSliceBlob,\n  unauthenticated,\n  quotaExceeded,\n  unauthorized,\n  objectNotFound,\n  serverFileWrongSize,\n  unknown,\n  unauthorizedApp\n} from './error';\nimport { Location } from './location';\nimport {\n  Mappings,\n  fromResourceString,\n  downloadUrlFromResourceString,\n  toResourceString\n} from './metadata';\nimport { fromResponseString } from './list';\nimport { RequestInfo, UrlParams } from './requestinfo';\nimport { isString } from './type';\nimport { makeUrl } from './url';\nimport { Connection, ConnectionType } from './connection';\nimport { FirebaseStorageImpl } from '../service';\n\n/**\n * Throws the UNKNOWN StorageError if cndn is false.\n */\nexport function handlerCheck(cndn: boolean): void {\n  if (!cndn) {\n    throw unknown();\n  }\n}\n\nexport function metadataHandler(\n  service: FirebaseStorageImpl,\n  mappings: Mappings\n): (p1: Connection<string>, p2: string) => Metadata {\n  function handler(xhr: Connection<string>, text: string): Metadata {\n    const metadata = fromResourceString(service, text, mappings);\n    handlerCheck(metadata !== null);\n    return metadata as Metadata;\n  }\n  return handler;\n}\n\nexport function listHandler(\n  service: FirebaseStorageImpl,\n  bucket: string\n): (p1: Connection<string>, p2: string) => ListResult {\n  function handler(xhr: Connection<string>, text: string): ListResult {\n    const listResult = fromResponseString(service, bucket, text);\n    handlerCheck(listResult !== null);\n    return listResult as ListResult;\n  }\n  return handler;\n}\n\nexport function downloadUrlHandler(\n  service: FirebaseStorageImpl,\n  mappings: Mappings\n): (p1: Connection<string>, p2: string) => string | null {\n  function handler(xhr: Connection<string>, text: string): string | null {\n    const metadata = fromResourceString(service, text, mappings);\n    handlerCheck(metadata !== null);\n    return downloadUrlFromResourceString(\n      metadata as Metadata,\n      text,\n      service.host,\n      service._protocol\n    );\n  }\n  return handler;\n}\n\nexport function sharedErrorHandler(\n  location: Location\n): (p1: Connection<ConnectionType>, p2: StorageError) => StorageError {\n  function errorHandler(\n    xhr: Connection<ConnectionType>,\n    err: StorageError\n  ): StorageError {\n    let newErr: StorageError;\n    if (xhr.getStatus() === 401) {\n      if (\n        // This exact message string is the only consistent part of the\n        // server's error response that identifies it as an App Check error.\n        xhr.getErrorText().includes('Firebase App Check token is invalid')\n      ) {\n        newErr = unauthorizedApp();\n      } else {\n        newErr = unauthenticated();\n      }\n    } else {\n      if (xhr.getStatus() === 402) {\n        newErr = quotaExceeded(location.bucket);\n      } else {\n        if (xhr.getStatus() === 403) {\n          newErr = unauthorized(location.path);\n        } else {\n          newErr = err;\n        }\n      }\n    }\n    newErr.status = xhr.getStatus();\n    newErr.serverResponse = err.serverResponse;\n    return newErr;\n  }\n  return errorHandler;\n}\n\nexport function objectErrorHandler(\n  location: Location\n): (p1: Connection<ConnectionType>, p2: StorageError) => StorageError {\n  const shared = sharedErrorHandler(location);\n\n  function errorHandler(\n    xhr: Connection<ConnectionType>,\n    err: StorageError\n  ): StorageError {\n    let newErr = shared(xhr, err);\n    if (xhr.getStatus() === 404) {\n      newErr = objectNotFound(location.path);\n    }\n    newErr.serverResponse = err.serverResponse;\n    return newErr;\n  }\n  return errorHandler;\n}\n\nexport function getMetadata(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings\n): RequestInfo<string, Metadata> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function list(\n  service: FirebaseStorageImpl,\n  location: Location,\n  delimiter?: string,\n  pageToken?: string | null,\n  maxResults?: number | null\n): RequestInfo<string, ListResult> {\n  const urlParams: UrlParams = {};\n  if (location.isRoot) {\n    urlParams['prefix'] = '';\n  } else {\n    urlParams['prefix'] = location.path + '/';\n  }\n  if (delimiter && delimiter.length > 0) {\n    urlParams['delimiter'] = delimiter;\n  }\n  if (pageToken) {\n    urlParams['pageToken'] = pageToken;\n  }\n  if (maxResults) {\n    urlParams['maxResults'] = maxResults;\n  }\n  const urlPart = location.bucketOnlyServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    listHandler(service, location.bucket),\n    timeout\n  );\n  requestInfo.urlParams = urlParams;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\nexport function getBytes<I extends ConnectionType>(\n  service: FirebaseStorageImpl,\n  location: Location,\n  maxDownloadSizeBytes?: number\n): RequestInfo<I, I> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol) + '?alt=media';\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    (_: Connection<I>, data: I) => data,\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  if (maxDownloadSizeBytes !== undefined) {\n    requestInfo.headers['Range'] = `bytes=0-${maxDownloadSizeBytes}`;\n    requestInfo.successCodes = [200 /* OK */, 206 /* Partial Content */];\n  }\n  return requestInfo;\n}\n\nexport function getDownloadUrl(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings\n): RequestInfo<string, string | null> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    downloadUrlHandler(service, mappings),\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function updateMetadata(\n  service: FirebaseStorageImpl,\n  location: Location,\n  metadata: Partial<Metadata>,\n  mappings: Mappings\n): RequestInfo<string, Metadata> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'PATCH';\n  const body = toResourceString(metadata, mappings);\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.headers = headers;\n  requestInfo.body = body;\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function deleteObject(\n  service: FirebaseStorageImpl,\n  location: Location\n): RequestInfo<string, void> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'DELETE';\n  const timeout = service.maxOperationRetryTime;\n\n  function handler(_xhr: Connection<string>, _text: string): void {}\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.successCodes = [200, 204];\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function determineContentType_(\n  metadata: Metadata | null,\n  blob: FbsBlob | null\n): string {\n  return (\n    (metadata && metadata['contentType']) ||\n    (blob && blob.type()) ||\n    'application/octet-stream'\n  );\n}\n\nexport function metadataForUpload_(\n  location: Location,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): Metadata {\n  const metadataClone = Object.assign({}, metadata);\n  metadataClone['fullPath'] = location.path;\n  metadataClone['size'] = blob.size();\n  if (!metadataClone['contentType']) {\n    metadataClone['contentType'] = determineContentType_(null, blob);\n  }\n  return metadataClone;\n}\n\n/**\n * Prepare RequestInfo for uploads as Content-Type: multipart.\n */\nexport function multipartUpload(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): RequestInfo<string, Metadata> {\n  const urlPart = location.bucketOnlyServerUrl();\n  const headers: { [prop: string]: string } = {\n    'X-Goog-Upload-Protocol': 'multipart'\n  };\n\n  function genBoundary(): string {\n    let str = '';\n    for (let i = 0; i < 2; i++) {\n      str = str + Math.random().toString().slice(2);\n    }\n    return str;\n  }\n  const boundary = genBoundary();\n  headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\n  const metadata_ = metadataForUpload_(location, blob, metadata);\n  const metadataString = toResourceString(metadata_, mappings);\n  const preBlobPart =\n    '--' +\n    boundary +\n    '\\r\\n' +\n    'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\n    metadataString +\n    '\\r\\n--' +\n    boundary +\n    '\\r\\n' +\n    'Content-Type: ' +\n    metadata_['contentType'] +\n    '\\r\\n\\r\\n';\n  const postBlobPart = '\\r\\n--' + boundary + '--';\n  const body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\n  if (body === null) {\n    throw cannotSliceBlob();\n  }\n  const urlParams: UrlParams = { name: metadata_['fullPath']! };\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.urlParams = urlParams;\n  requestInfo.headers = headers;\n  requestInfo.body = body.uploadData();\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * @param current The number of bytes that have been uploaded so far.\n * @param total The total number of bytes in the upload.\n * @param opt_finalized True if the server has finished the upload.\n * @param opt_metadata The upload metadata, should\n *     only be passed if opt_finalized is true.\n */\nexport class ResumableUploadStatus {\n  finalized: boolean;\n  metadata: Metadata | null;\n\n  constructor(\n    public current: number,\n    public total: number,\n    finalized?: boolean,\n    metadata?: Metadata | null\n  ) {\n    this.finalized = !!finalized;\n    this.metadata = metadata || null;\n  }\n}\n\nexport function checkResumeHeader_(\n  xhr: Connection<string>,\n  allowed?: string[]\n): string {\n  let status: string | null = null;\n  try {\n    status = xhr.getResponseHeader('X-Goog-Upload-Status');\n  } catch (e) {\n    handlerCheck(false);\n  }\n  const allowedStatus = allowed || ['active'];\n  handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\n  return status as string;\n}\n\nexport function createResumableUpload(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): RequestInfo<string, string> {\n  const urlPart = location.bucketOnlyServerUrl();\n  const metadataForUpload = metadataForUpload_(location, blob, metadata);\n  const urlParams: UrlParams = { name: metadataForUpload['fullPath']! };\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'POST';\n  const headers = {\n    'X-Goog-Upload-Protocol': 'resumable',\n    'X-Goog-Upload-Command': 'start',\n    'X-Goog-Upload-Header-Content-Length': `${blob.size()}`,\n    'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType']!,\n    'Content-Type': 'application/json; charset=utf-8'\n  };\n  const body = toResourceString(metadataForUpload, mappings);\n  const timeout = service.maxUploadRetryTime;\n\n  function handler(xhr: Connection<string>): string {\n    checkResumeHeader_(xhr);\n    let url;\n    try {\n      url = xhr.getResponseHeader('X-Goog-Upload-URL');\n    } catch (e) {\n      handlerCheck(false);\n    }\n    handlerCheck(isString(url));\n    return url as string;\n  }\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.urlParams = urlParams;\n  requestInfo.headers = headers;\n  requestInfo.body = body;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n */\nexport function getResumableUploadStatus(\n  service: FirebaseStorageImpl,\n  location: Location,\n  url: string,\n  blob: FbsBlob\n): RequestInfo<string, ResumableUploadStatus> {\n  const headers = { 'X-Goog-Upload-Command': 'query' };\n\n  function handler(xhr: Connection<string>): ResumableUploadStatus {\n    const status = checkResumeHeader_(xhr, ['active', 'final']);\n    let sizeString: string | null = null;\n    try {\n      sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\n    } catch (e) {\n      handlerCheck(false);\n    }\n\n    if (!sizeString) {\n      // null or empty string\n      handlerCheck(false);\n    }\n\n    const size = Number(sizeString);\n    handlerCheck(!isNaN(size));\n    return new ResumableUploadStatus(size, blob.size(), status === 'final');\n  }\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.headers = headers;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * Any uploads via the resumable upload API must transfer a number of bytes\n * that is a multiple of this number.\n */\nexport const RESUMABLE_UPLOAD_CHUNK_SIZE: number = 256 * 1024;\n\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n * @param chunkSize Number of bytes to upload.\n * @param status The previous status.\n *     If not passed or null, we start from the beginning.\n * @throws fbs.Error If the upload is already complete, the passed in status\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\n *     for upload.\n */\nexport function continueResumableUpload(\n  location: Location,\n  service: FirebaseStorageImpl,\n  url: string,\n  blob: FbsBlob,\n  chunkSize: number,\n  mappings: Mappings,\n  status?: ResumableUploadStatus | null,\n  progressCallback?: ((p1: number, p2: number) => void) | null\n): RequestInfo<string, ResumableUploadStatus> {\n  // TODO(andysoto): standardize on internal asserts\n  // assert(!(opt_status && opt_status.finalized));\n  const status_ = new ResumableUploadStatus(0, 0);\n  if (status) {\n    status_.current = status.current;\n    status_.total = status.total;\n  } else {\n    status_.current = 0;\n    status_.total = blob.size();\n  }\n  if (blob.size() !== status_.total) {\n    throw serverFileWrongSize();\n  }\n  const bytesLeft = status_.total - status_.current;\n  let bytesToUpload = bytesLeft;\n  if (chunkSize > 0) {\n    bytesToUpload = Math.min(bytesToUpload, chunkSize);\n  }\n  const startByte = status_.current;\n  const endByte = startByte + bytesToUpload;\n  let uploadCommand = '';\n  if (bytesToUpload === 0) {\n    uploadCommand = 'finalize';\n  } else if (bytesLeft === bytesToUpload) {\n    uploadCommand = 'upload, finalize';\n  } else {\n    uploadCommand = 'upload';\n  }\n  const headers = {\n    'X-Goog-Upload-Command': uploadCommand,\n    'X-Goog-Upload-Offset': `${status_.current}`\n  };\n  const body = blob.slice(startByte, endByte);\n  if (body === null) {\n    throw cannotSliceBlob();\n  }\n\n  function handler(\n    xhr: Connection<string>,\n    text: string\n  ): ResumableUploadStatus {\n    // TODO(andysoto): Verify the MD5 of each uploaded range:\n    // the 'x-range-md5' header comes back with status code 308 responses.\n    // We'll only be able to bail out though, because you can't re-upload a\n    // range that you previously uploaded.\n    const uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\n    const newCurrent = status_.current + bytesToUpload;\n    const size = blob.size();\n    let metadata;\n    if (uploadStatus === 'final') {\n      metadata = metadataHandler(service, mappings)(xhr, text);\n    } else {\n      metadata = null;\n    }\n    return new ResumableUploadStatus(\n      newCurrent,\n      size,\n      uploadStatus === 'final',\n      metadata\n    );\n  }\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.headers = headers;\n  requestInfo.body = body.uploadData();\n  requestInfo.progressCallback = progressCallback || null;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Connection,\n  ConnectionType,\n  ErrorCode,\n  Headers\n} from '../../implementation/connection';\nimport { internalError } from '../../implementation/error';\n\n/** An override for the text-based Connection. Used in tests. */\nlet textFactoryOverride: (() => Connection<string>) | null = null;\n\n/**\n * Network layer for browsers. We use this instead of goog.net.XhrIo because\n * goog.net.XhrIo is hyuuuuge and doesn't work in React Native on Android.\n */\nabstract class XhrConnection<T extends ConnectionType>\n  implements Connection<T>\n{\n  protected xhr_: XMLHttpRequest;\n  private errorCode_: ErrorCode;\n  private sendPromise_: Promise<void>;\n  protected sent_: boolean = false;\n\n  constructor() {\n    this.xhr_ = new XMLHttpRequest();\n    this.initXhr();\n    this.errorCode_ = ErrorCode.NO_ERROR;\n    this.sendPromise_ = new Promise(resolve => {\n      this.xhr_.addEventListener('abort', () => {\n        this.errorCode_ = ErrorCode.ABORT;\n        resolve();\n      });\n      this.xhr_.addEventListener('error', () => {\n        this.errorCode_ = ErrorCode.NETWORK_ERROR;\n        resolve();\n      });\n      this.xhr_.addEventListener('load', () => {\n        resolve();\n      });\n    });\n  }\n\n  abstract initXhr(): void;\n\n  send(\n    url: string,\n    method: string,\n    body?: ArrayBufferView | Blob | string,\n    headers?: Headers\n  ): Promise<void> {\n    if (this.sent_) {\n      throw internalError('cannot .send() more than once');\n    }\n    this.sent_ = true;\n    this.xhr_.open(method, url, true);\n    if (headers !== undefined) {\n      for (const key in headers) {\n        if (headers.hasOwnProperty(key)) {\n          this.xhr_.setRequestHeader(key, headers[key].toString());\n        }\n      }\n    }\n    if (body !== undefined) {\n      this.xhr_.send(body);\n    } else {\n      this.xhr_.send();\n    }\n    return this.sendPromise_;\n  }\n\n  getErrorCode(): ErrorCode {\n    if (!this.sent_) {\n      throw internalError('cannot .getErrorCode() before sending');\n    }\n    return this.errorCode_;\n  }\n\n  getStatus(): number {\n    if (!this.sent_) {\n      throw internalError('cannot .getStatus() before sending');\n    }\n    try {\n      return this.xhr_.status;\n    } catch (e) {\n      return -1;\n    }\n  }\n\n  getResponse(): T {\n    if (!this.sent_) {\n      throw internalError('cannot .getResponse() before sending');\n    }\n    return this.xhr_.response;\n  }\n\n  getErrorText(): string {\n    if (!this.sent_) {\n      throw internalError('cannot .getErrorText() before sending');\n    }\n    return this.xhr_.statusText;\n  }\n\n  /** Aborts the request. */\n  abort(): void {\n    this.xhr_.abort();\n  }\n\n  getResponseHeader(header: string): string | null {\n    return this.xhr_.getResponseHeader(header);\n  }\n\n  addUploadProgressListener(listener: (p1: ProgressEvent) => void): void {\n    if (this.xhr_.upload != null) {\n      this.xhr_.upload.addEventListener('progress', listener);\n    }\n  }\n\n  removeUploadProgressListener(listener: (p1: ProgressEvent) => void): void {\n    if (this.xhr_.upload != null) {\n      this.xhr_.upload.removeEventListener('progress', listener);\n    }\n  }\n}\n\nexport class XhrTextConnection extends XhrConnection<string> {\n  initXhr(): void {\n    this.xhr_.responseType = 'text';\n  }\n}\n\nexport function newTextConnection(): Connection<string> {\n  return textFactoryOverride ? textFactoryOverride() : new XhrTextConnection();\n}\n\nexport class XhrBytesConnection extends XhrConnection<ArrayBuffer> {\n  private data_?: ArrayBuffer;\n\n  initXhr(): void {\n    this.xhr_.responseType = 'arraybuffer';\n  }\n}\n\nexport function newBytesConnection(): Connection<ArrayBuffer> {\n  return new XhrBytesConnection();\n}\n\nexport class XhrBlobConnection extends XhrConnection<Blob> {\n  initXhr(): void {\n    this.xhr_.responseType = 'blob';\n  }\n}\n\nexport function newBlobConnection(): Connection<Blob> {\n  return new XhrBlobConnection();\n}\n\nexport function newStreamConnection(): Connection<NodeJS.ReadableStream> {\n  throw new Error('Streams are only supported on Node');\n}\n\nexport function injectTestConnection(\n  factory: (() => Connection<string>) | null\n): void {\n  textFactoryOverride = factory;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Defines types for interacting with blob transfer tasks.\n */\n\nimport { FbsBlob } from './implementation/blob';\nimport {\n  canceled,\n  StorageErrorCode,\n  StorageError,\n  retryLimitExceeded\n} from './implementation/error';\nimport {\n  InternalTaskState,\n  TaskEvent,\n  TaskState,\n  taskStateFromInternalTaskState\n} from './implementation/taskenums';\nimport { Metadata } from './metadata';\nimport {\n  Observer,\n  Subscribe,\n  Unsubscribe,\n  StorageObserver as StorageObserverInternal,\n  NextFn\n} from './implementation/observer';\nimport { Request } from './implementation/request';\nimport { UploadTaskSnapshot, StorageObserver } from './public-types';\nimport { async as fbsAsync } from './implementation/async';\nimport { Mappings, getMappings } from './implementation/metadata';\nimport {\n  createResumableUpload,\n  getResumableUploadStatus,\n  RESUMABLE_UPLOAD_CHUNK_SIZE,\n  ResumableUploadStatus,\n  continueResumableUpload,\n  getMetadata,\n  multipartUpload\n} from './implementation/requests';\nimport { Reference } from './reference';\nimport { newTextConnection } from './platform/connection';\nimport { isRetryStatusCode } from './implementation/utils';\nimport { CompleteFn } from '@firebase/util';\nimport { DEFAULT_MIN_SLEEP_TIME_MILLIS } from './implementation/constants';\n\n/**\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\n * upload and manage callbacks for various events.\n * @internal\n */\nexport class UploadTask {\n  private _ref: Reference;\n  /**\n   * The data to be uploaded.\n   */\n  _blob: FbsBlob;\n  /**\n   * Metadata related to the upload.\n   */\n  _metadata: Metadata | null;\n  private _mappings: Mappings;\n  /**\n   * Number of bytes transferred so far.\n   */\n  _transferred: number = 0;\n  private _needToFetchStatus: boolean = false;\n  private _needToFetchMetadata: boolean = false;\n  private _observers: Array<StorageObserverInternal<UploadTaskSnapshot>> = [];\n  private _resumable: boolean;\n  /**\n   * Upload state.\n   */\n  _state: InternalTaskState;\n  private _error?: StorageError = undefined;\n  private _uploadUrl?: string = undefined;\n  private _request?: Request<unknown> = undefined;\n  private _chunkMultiplier: number = 1;\n  private _errorHandler: (p1: StorageError) => void;\n  private _metadataErrorHandler: (p1: StorageError) => void;\n  private _resolve?: (p1: UploadTaskSnapshot) => void = undefined;\n  private _reject?: (p1: StorageError) => void = undefined;\n  private pendingTimeout?: ReturnType<typeof setTimeout>;\n  private _promise: Promise<UploadTaskSnapshot>;\n\n  private sleepTime: number;\n\n  private maxSleepTime: number;\n\n  isExponentialBackoffExpired(): boolean {\n    return this.sleepTime > this.maxSleepTime;\n  }\n\n  /**\n   * @param ref - The firebaseStorage.Reference object this task came\n   *     from, untyped to avoid cyclic dependencies.\n   * @param blob - The blob to upload.\n   */\n  constructor(ref: Reference, blob: FbsBlob, metadata: Metadata | null = null) {\n    this._ref = ref;\n    this._blob = blob;\n    this._metadata = metadata;\n    this._mappings = getMappings();\n    this._resumable = this._shouldDoResumable(this._blob);\n    this._state = InternalTaskState.RUNNING;\n    this._errorHandler = error => {\n      this._request = undefined;\n      this._chunkMultiplier = 1;\n      if (error._codeEquals(StorageErrorCode.CANCELED)) {\n        this._needToFetchStatus = true;\n        this.completeTransitions_();\n      } else {\n        const backoffExpired = this.isExponentialBackoffExpired();\n        if (isRetryStatusCode(error.status, [])) {\n          if (backoffExpired) {\n            error = retryLimitExceeded();\n          } else {\n            this.sleepTime = Math.max(\n              this.sleepTime * 2,\n              DEFAULT_MIN_SLEEP_TIME_MILLIS\n            );\n            this._needToFetchStatus = true;\n            this.completeTransitions_();\n            return;\n          }\n        }\n        this._error = error;\n        this._transition(InternalTaskState.ERROR);\n      }\n    };\n    this._metadataErrorHandler = error => {\n      this._request = undefined;\n      if (error._codeEquals(StorageErrorCode.CANCELED)) {\n        this.completeTransitions_();\n      } else {\n        this._error = error;\n        this._transition(InternalTaskState.ERROR);\n      }\n    };\n    this.sleepTime = 0;\n    this.maxSleepTime = this._ref.storage.maxUploadRetryTime;\n    this._promise = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n      this._start();\n    });\n\n    // Prevent uncaught rejections on the internal promise from bubbling out\n    // to the top level with a dummy handler.\n    this._promise.then(null, () => {});\n  }\n\n  private _makeProgressCallback(): (p1: number, p2: number) => void {\n    const sizeBefore = this._transferred;\n    return loaded => this._updateProgress(sizeBefore + loaded);\n  }\n\n  private _shouldDoResumable(blob: FbsBlob): boolean {\n    return blob.size() > 256 * 1024;\n  }\n\n  private _start(): void {\n    if (this._state !== InternalTaskState.RUNNING) {\n      // This can happen if someone pauses us in a resume callback, for example.\n      return;\n    }\n    if (this._request !== undefined) {\n      return;\n    }\n    if (this._resumable) {\n      if (this._uploadUrl === undefined) {\n        this._createResumable();\n      } else {\n        if (this._needToFetchStatus) {\n          this._fetchStatus();\n        } else {\n          if (this._needToFetchMetadata) {\n            // Happens if we miss the metadata on upload completion.\n            this._fetchMetadata();\n          } else {\n            this.pendingTimeout = setTimeout(() => {\n              this.pendingTimeout = undefined;\n              this._continueUpload();\n            }, this.sleepTime);\n          }\n        }\n      }\n    } else {\n      this._oneShotUpload();\n    }\n  }\n\n  private _resolveToken(\n    callback: (authToken: string | null, appCheckToken: string | null) => void\n  ): void {\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    Promise.all([\n      this._ref.storage._getAuthToken(),\n      this._ref.storage._getAppCheckToken()\n    ]).then(([authToken, appCheckToken]) => {\n      switch (this._state) {\n        case InternalTaskState.RUNNING:\n          callback(authToken, appCheckToken);\n          break;\n        case InternalTaskState.CANCELING:\n          this._transition(InternalTaskState.CANCELED);\n          break;\n        case InternalTaskState.PAUSING:\n          this._transition(InternalTaskState.PAUSED);\n          break;\n        default:\n      }\n    });\n  }\n\n  // TODO(andysoto): assert false\n\n  private _createResumable(): void {\n    this._resolveToken((authToken, appCheckToken) => {\n      const requestInfo = createResumableUpload(\n        this._ref.storage,\n        this._ref._location,\n        this._mappings,\n        this._blob,\n        this._metadata\n      );\n      const createRequest = this._ref.storage._makeRequest(\n        requestInfo,\n        newTextConnection,\n        authToken,\n        appCheckToken\n      );\n      this._request = createRequest;\n      createRequest.getPromise().then((url: string) => {\n        this._request = undefined;\n        this._uploadUrl = url;\n        this._needToFetchStatus = false;\n        this.completeTransitions_();\n      }, this._errorHandler);\n    });\n  }\n\n  private _fetchStatus(): void {\n    // TODO(andysoto): assert(this.uploadUrl_ !== null);\n    const url = this._uploadUrl as string;\n    this._resolveToken((authToken, appCheckToken) => {\n      const requestInfo = getResumableUploadStatus(\n        this._ref.storage,\n        this._ref._location,\n        url,\n        this._blob\n      );\n      const statusRequest = this._ref.storage._makeRequest(\n        requestInfo,\n        newTextConnection,\n        authToken,\n        appCheckToken\n      );\n      this._request = statusRequest;\n      statusRequest.getPromise().then(status => {\n        status = status as ResumableUploadStatus;\n        this._request = undefined;\n        this._updateProgress(status.current);\n        this._needToFetchStatus = false;\n        if (status.finalized) {\n          this._needToFetchMetadata = true;\n        }\n        this.completeTransitions_();\n      }, this._errorHandler);\n    });\n  }\n\n  private _continueUpload(): void {\n    const chunkSize = RESUMABLE_UPLOAD_CHUNK_SIZE * this._chunkMultiplier;\n    const status = new ResumableUploadStatus(\n      this._transferred,\n      this._blob.size()\n    );\n\n    // TODO(andysoto): assert(this.uploadUrl_ !== null);\n    const url = this._uploadUrl as string;\n    this._resolveToken((authToken, appCheckToken) => {\n      let requestInfo;\n      try {\n        requestInfo = continueResumableUpload(\n          this._ref._location,\n          this._ref.storage,\n          url,\n          this._blob,\n          chunkSize,\n          this._mappings,\n          status,\n          this._makeProgressCallback()\n        );\n      } catch (e) {\n        this._error = e as StorageError;\n        this._transition(InternalTaskState.ERROR);\n        return;\n      }\n      const uploadRequest = this._ref.storage._makeRequest(\n        requestInfo,\n        newTextConnection,\n        authToken,\n        appCheckToken,\n        /*retry=*/ false // Upload requests should not be retried as each retry should be preceded by another query request. Which is handled in this file.\n      );\n      this._request = uploadRequest;\n      uploadRequest.getPromise().then((newStatus: ResumableUploadStatus) => {\n        this._increaseMultiplier();\n        this._request = undefined;\n        this._updateProgress(newStatus.current);\n        if (newStatus.finalized) {\n          this._metadata = newStatus.metadata;\n          this._transition(InternalTaskState.SUCCESS);\n        } else {\n          this.completeTransitions_();\n        }\n      }, this._errorHandler);\n    });\n  }\n\n  private _increaseMultiplier(): void {\n    const currentSize = RESUMABLE_UPLOAD_CHUNK_SIZE * this._chunkMultiplier;\n\n    // Max chunk size is 32M.\n    if (currentSize * 2 < 32 * 1024 * 1024) {\n      this._chunkMultiplier *= 2;\n    }\n  }\n\n  private _fetchMetadata(): void {\n    this._resolveToken((authToken, appCheckToken) => {\n      const requestInfo = getMetadata(\n        this._ref.storage,\n        this._ref._location,\n        this._mappings\n      );\n      const metadataRequest = this._ref.storage._makeRequest(\n        requestInfo,\n        newTextConnection,\n        authToken,\n        appCheckToken\n      );\n      this._request = metadataRequest;\n      metadataRequest.getPromise().then(metadata => {\n        this._request = undefined;\n        this._metadata = metadata;\n        this._transition(InternalTaskState.SUCCESS);\n      }, this._metadataErrorHandler);\n    });\n  }\n\n  private _oneShotUpload(): void {\n    this._resolveToken((authToken, appCheckToken) => {\n      const requestInfo = multipartUpload(\n        this._ref.storage,\n        this._ref._location,\n        this._mappings,\n        this._blob,\n        this._metadata\n      );\n      const multipartRequest = this._ref.storage._makeRequest(\n        requestInfo,\n        newTextConnection,\n        authToken,\n        appCheckToken\n      );\n      this._request = multipartRequest;\n      multipartRequest.getPromise().then(metadata => {\n        this._request = undefined;\n        this._metadata = metadata;\n        this._updateProgress(this._blob.size());\n        this._transition(InternalTaskState.SUCCESS);\n      }, this._errorHandler);\n    });\n  }\n\n  private _updateProgress(transferred: number): void {\n    const old = this._transferred;\n    this._transferred = transferred;\n\n    // A progress update can make the \"transferred\" value smaller (e.g. a\n    // partial upload not completed by server, after which the \"transferred\"\n    // value may reset to the value at the beginning of the request).\n    if (this._transferred !== old) {\n      this._notifyObservers();\n    }\n  }\n\n  private _transition(state: InternalTaskState): void {\n    if (this._state === state) {\n      return;\n    }\n    switch (state) {\n      case InternalTaskState.CANCELING:\n      case InternalTaskState.PAUSING:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.RUNNING ||\n        //        this.state_ === InternalTaskState.PAUSING);\n        this._state = state;\n        if (this._request !== undefined) {\n          this._request.cancel();\n        } else if (this.pendingTimeout) {\n          clearTimeout(this.pendingTimeout);\n          this.pendingTimeout = undefined;\n          this.completeTransitions_();\n        }\n        break;\n      case InternalTaskState.RUNNING:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.PAUSED ||\n        //        this.state_ === InternalTaskState.PAUSING);\n        const wasPaused = this._state === InternalTaskState.PAUSED;\n        this._state = state;\n        if (wasPaused) {\n          this._notifyObservers();\n          this._start();\n        }\n        break;\n      case InternalTaskState.PAUSED:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.PAUSING);\n        this._state = state;\n        this._notifyObservers();\n        break;\n      case InternalTaskState.CANCELED:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.PAUSED ||\n        //        this.state_ === InternalTaskState.CANCELING);\n        this._error = canceled();\n        this._state = state;\n        this._notifyObservers();\n        break;\n      case InternalTaskState.ERROR:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.RUNNING ||\n        //        this.state_ === InternalTaskState.PAUSING ||\n        //        this.state_ === InternalTaskState.CANCELING);\n        this._state = state;\n        this._notifyObservers();\n        break;\n      case InternalTaskState.SUCCESS:\n        // TODO(andysoto):\n        // assert(this.state_ === InternalTaskState.RUNNING ||\n        //        this.state_ === InternalTaskState.PAUSING ||\n        //        this.state_ === InternalTaskState.CANCELING);\n        this._state = state;\n        this._notifyObservers();\n        break;\n      default: // Ignore\n    }\n  }\n\n  private completeTransitions_(): void {\n    switch (this._state) {\n      case InternalTaskState.PAUSING:\n        this._transition(InternalTaskState.PAUSED);\n        break;\n      case InternalTaskState.CANCELING:\n        this._transition(InternalTaskState.CANCELED);\n        break;\n      case InternalTaskState.RUNNING:\n        this._start();\n        break;\n      default:\n        // TODO(andysoto): assert(false);\n        break;\n    }\n  }\n\n  /**\n   * A snapshot of the current task state.\n   */\n  get snapshot(): UploadTaskSnapshot {\n    const externalState = taskStateFromInternalTaskState(this._state);\n    return {\n      bytesTransferred: this._transferred,\n      totalBytes: this._blob.size(),\n      state: externalState,\n      metadata: this._metadata!,\n      task: this,\n      ref: this._ref\n    };\n  }\n\n  /**\n   * Adds a callback for an event.\n   * @param type - The type of event to listen for.\n   * @param nextOrObserver -\n   *     The `next` function, which gets called for each item in\n   *     the event stream, or an observer object with some or all of these three\n   *     properties (`next`, `error`, `complete`).\n   * @param error - A function that gets called with a `StorageError`\n   *     if the event stream ends due to an error.\n   * @param completed - A function that gets called if the\n   *     event stream ends normally.\n   * @returns\n   *     If only the event argument is passed, returns a function you can use to\n   *     add callbacks (see the examples above). If more than just the event\n   *     argument is passed, returns a function you can call to unregister the\n   *     callbacks.\n   */\n  on(\n    type: TaskEvent,\n    nextOrObserver?:\n      | StorageObserver<UploadTaskSnapshot>\n      | null\n      | ((snapshot: UploadTaskSnapshot) => unknown),\n    error?: ((a: StorageError) => unknown) | null,\n    completed?: CompleteFn | null\n  ): Unsubscribe | Subscribe<UploadTaskSnapshot> {\n    // Note: `type` isn't being used. Its type is also incorrect. TaskEvent should not be a string.\n    const observer = new Observer(\n      (nextOrObserver as\n        | StorageObserverInternal<UploadTaskSnapshot>\n        | NextFn<UploadTaskSnapshot>) || undefined,\n      error || undefined,\n      completed || undefined\n    );\n    this._addObserver(observer);\n    return () => {\n      this._removeObserver(observer);\n    };\n  }\n\n  /**\n   * This object behaves like a Promise, and resolves with its snapshot data\n   * when the upload completes.\n   * @param onFulfilled - The fulfillment callback. Promise chaining works as normal.\n   * @param onRejected - The rejection callback.\n   */\n  then<U>(\n    onFulfilled?: ((value: UploadTaskSnapshot) => U | Promise<U>) | null,\n    onRejected?: ((error: StorageError) => U | Promise<U>) | null\n  ): Promise<U> {\n    // These casts are needed so that TypeScript can infer the types of the\n    // resulting Promise.\n    return this._promise.then<U>(\n      onFulfilled as (value: UploadTaskSnapshot) => U | Promise<U>,\n      onRejected as ((error: unknown) => Promise<never>) | null\n    );\n  }\n\n  /**\n   * Equivalent to calling `then(null, onRejected)`.\n   */\n  catch<T>(onRejected: (p1: StorageError) => T | Promise<T>): Promise<T> {\n    return this.then(null, onRejected);\n  }\n\n  /**\n   * Adds the given observer.\n   */\n  private _addObserver(observer: Observer<UploadTaskSnapshot>): void {\n    this._observers.push(observer);\n    this._notifyObserver(observer);\n  }\n\n  /**\n   * Removes the given observer.\n   */\n  private _removeObserver(observer: Observer<UploadTaskSnapshot>): void {\n    const i = this._observers.indexOf(observer);\n    if (i !== -1) {\n      this._observers.splice(i, 1);\n    }\n  }\n\n  private _notifyObservers(): void {\n    this._finishPromise();\n    const observers = this._observers.slice();\n    observers.forEach(observer => {\n      this._notifyObserver(observer);\n    });\n  }\n\n  private _finishPromise(): void {\n    if (this._resolve !== undefined) {\n      let triggered = true;\n      switch (taskStateFromInternalTaskState(this._state)) {\n        case TaskState.SUCCESS:\n          fbsAsync(this._resolve.bind(null, this.snapshot))();\n          break;\n        case TaskState.CANCELED:\n        case TaskState.ERROR:\n          const toCall = this._reject as (p1: StorageError) => void;\n          fbsAsync(toCall.bind(null, this._error as StorageError))();\n          break;\n        default:\n          triggered = false;\n          break;\n      }\n      if (triggered) {\n        this._resolve = undefined;\n        this._reject = undefined;\n      }\n    }\n  }\n\n  private _notifyObserver(observer: Observer<UploadTaskSnapshot>): void {\n    const externalState = taskStateFromInternalTaskState(this._state);\n    switch (externalState) {\n      case TaskState.RUNNING:\n      case TaskState.PAUSED:\n        if (observer.next) {\n          fbsAsync(observer.next.bind(observer, this.snapshot))();\n        }\n        break;\n      case TaskState.SUCCESS:\n        if (observer.complete) {\n          fbsAsync(observer.complete.bind(observer))();\n        }\n        break;\n      case TaskState.CANCELED:\n      case TaskState.ERROR:\n        if (observer.error) {\n          fbsAsync(\n            observer.error.bind(observer, this._error as StorageError)\n          )();\n        }\n        break;\n      default:\n        // TODO(andysoto): assert(false);\n        if (observer.error) {\n          fbsAsync(\n            observer.error.bind(observer, this._error as StorageError)\n          )();\n        }\n    }\n  }\n\n  /**\n   * Resumes a paused task. Has no effect on a currently running or failed task.\n   * @returns True if the operation took effect, false if ignored.\n   */\n  resume(): boolean {\n    const valid =\n      this._state === InternalTaskState.PAUSED ||\n      this._state === InternalTaskState.PAUSING;\n    if (valid) {\n      this._transition(InternalTaskState.RUNNING);\n    }\n    return valid;\n  }\n\n  /**\n   * Pauses a currently running task. Has no effect on a paused or failed task.\n   * @returns True if the operation took effect, false if ignored.\n   */\n  pause(): boolean {\n    const valid = this._state === InternalTaskState.RUNNING;\n    if (valid) {\n      this._transition(InternalTaskState.PAUSING);\n    }\n    return valid;\n  }\n\n  /**\n   * Cancels a currently running or paused task. Has no effect on a complete or\n   * failed task.\n   * @returns True if the operation took effect, false if ignored.\n   */\n  cancel(): boolean {\n    const valid =\n      this._state === InternalTaskState.RUNNING ||\n      this._state === InternalTaskState.PAUSING;\n    if (valid) {\n      this._transition(InternalTaskState.CANCELING);\n    }\n    return valid;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines the Firebase StorageReference class.\n */\n\nimport { PassThrough, Transform, TransformOptions } from 'stream';\n\nimport { FbsBlob } from './implementation/blob';\nimport { Location } from './implementation/location';\nimport { getMappings } from './implementation/metadata';\nimport { child, lastComponent, parent } from './implementation/path';\nimport {\n  deleteObject as requestsDeleteObject,\n  getBytes,\n  getDownloadUrl as requestsGetDownloadUrl,\n  getMetadata as requestsGetMetadata,\n  list as requestsList,\n  multipartUpload,\n  updateMetadata as requestsUpdateMetadata\n} from './implementation/requests';\nimport { ListOptions, UploadResult } from './public-types';\nimport { dataFromString, StringFormat } from './implementation/string';\nimport { Metadata } from './metadata';\nimport { FirebaseStorageImpl } from './service';\nimport { ListResult } from './list';\nimport { UploadTask } from './task';\nimport { invalidRootOperation, noDownloadURL } from './implementation/error';\nimport { validateNumber } from './implementation/type';\nimport {\n  newBlobConnection,\n  newBytesConnection,\n  newStreamConnection,\n  newTextConnection\n} from './platform/connection';\n\n/**\n * Provides methods to interact with a bucket in the Firebase Storage service.\n * @internal\n * @param _location - An fbs.location, or the URL at\n *     which to base this object, in one of the following forms:\n *         gs://<bucket>/<object-path>\n *         http[s]://firebasestorage.googleapis.com/\n *                     <api-version>/b/<bucket>/o/<object-path>\n *     Any query or fragment strings will be ignored in the http[s]\n *     format. If no value is passed, the storage object will use a URL based on\n *     the project ID of the base firebase.App instance.\n */\nexport class Reference {\n  _location: Location;\n\n  constructor(\n    private _service: FirebaseStorageImpl,\n    location: string | Location\n  ) {\n    if (location instanceof Location) {\n      this._location = location;\n    } else {\n      this._location = Location.makeFromUrl(location, _service.host);\n    }\n  }\n\n  /**\n   * Returns the URL for the bucket and path this object references,\n   *     in the form gs://<bucket>/<object-path>\n   * @override\n   */\n  toString(): string {\n    return 'gs://' + this._location.bucket + '/' + this._location.path;\n  }\n\n  protected _newRef(\n    service: FirebaseStorageImpl,\n    location: Location\n  ): Reference {\n    return new Reference(service, location);\n  }\n\n  /**\n   * A reference to the root of this object's bucket.\n   */\n  get root(): Reference {\n    const location = new Location(this._location.bucket, '');\n    return this._newRef(this._service, location);\n  }\n\n  /**\n   * The name of the bucket containing this reference's object.\n   */\n  get bucket(): string {\n    return this._location.bucket;\n  }\n\n  /**\n   * The full path of this object.\n   */\n  get fullPath(): string {\n    return this._location.path;\n  }\n\n  /**\n   * The short name of this object, which is the last component of the full path.\n   * For example, if fullPath is 'full/path/image.png', name is 'image.png'.\n   */\n  get name(): string {\n    return lastComponent(this._location.path);\n  }\n\n  /**\n   * The `StorageService` instance this `StorageReference` is associated with.\n   */\n  get storage(): FirebaseStorageImpl {\n    return this._service;\n  }\n\n  /**\n   * A `StorageReference` pointing to the parent location of this `StorageReference`, or null if\n   * this reference is the root.\n   */\n  get parent(): Reference | null {\n    const newPath = parent(this._location.path);\n    if (newPath === null) {\n      return null;\n    }\n    const location = new Location(this._location.bucket, newPath);\n    return new Reference(this._service, location);\n  }\n\n  /**\n   * Utility function to throw an error in methods that do not accept a root reference.\n   */\n  _throwIfRoot(name: string): void {\n    if (this._location.path === '') {\n      throw invalidRootOperation(name);\n    }\n  }\n}\n\n/**\n * Download the bytes at the object's location.\n * @returns A Promise containing the downloaded bytes.\n */\nexport function getBytesInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): Promise<ArrayBuffer> {\n  ref._throwIfRoot('getBytes');\n  const requestInfo = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newBytesConnection)\n    .then(bytes =>\n      maxDownloadSizeBytes !== undefined\n        ? // GCS may not honor the Range header for small files\n          (bytes as ArrayBuffer).slice(0, maxDownloadSizeBytes)\n        : (bytes as ArrayBuffer)\n    );\n}\n\n/**\n * Download the bytes at the object's location.\n * @returns A Promise containing the downloaded blob.\n */\nexport function getBlobInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): Promise<Blob> {\n  ref._throwIfRoot('getBlob');\n  const requestInfo = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newBlobConnection)\n    .then(blob =>\n      maxDownloadSizeBytes !== undefined\n        ? // GCS may not honor the Range header for small files\n          (blob as Blob).slice(0, maxDownloadSizeBytes)\n        : (blob as Blob)\n    );\n}\n\n/** Stream the bytes at the object's location. */\nexport function getStreamInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): NodeJS.ReadableStream {\n  ref._throwIfRoot('getStream');\n  const requestInfo = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n\n  /** A transformer that passes through the first n bytes. */\n  const newMaxSizeTransform: (n: number) => TransformOptions = n => {\n    let missingBytes = n;\n    return {\n      transform(chunk, encoding, callback) {\n        // GCS may not honor the Range header for small files\n        if (chunk.length < missingBytes) {\n          this.push(chunk);\n          missingBytes -= chunk.length;\n        } else {\n          this.push(chunk.slice(0, missingBytes));\n          this.emit('end');\n        }\n        callback();\n      }\n    } as TransformOptions;\n  };\n\n  const result =\n    maxDownloadSizeBytes !== undefined\n      ? new Transform(newMaxSizeTransform(maxDownloadSizeBytes))\n      : new PassThrough();\n\n  ref.storage\n    .makeRequestWithTokens(requestInfo, newStreamConnection)\n    .then(stream => (stream as NodeJS.ReadableStream).pipe(result))\n    .catch(e => result.destroy(e));\n  return result;\n}\n\n/**\n * Uploads data to this object's location.\n * The upload is not resumable.\n *\n * @param ref - StorageReference where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the newly uploaded data.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadBytes(\n  ref: Reference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: Metadata\n): Promise<UploadResult> {\n  ref._throwIfRoot('uploadBytes');\n  const requestInfo = multipartUpload(\n    ref.storage,\n    ref._location,\n    getMappings(),\n    new FbsBlob(data, true),\n    metadata\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newTextConnection)\n    .then(finalMetadata => {\n      return {\n        metadata: finalMetadata,\n        ref\n      };\n    });\n}\n\n/**\n * Uploads data to this object's location.\n * The upload can be paused and resumed, and exposes progress updates.\n * @public\n * @param ref - StorageReference where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the newly uploaded data.\n * @returns An UploadTask\n */\nexport function uploadBytesResumable(\n  ref: Reference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: Metadata\n): UploadTask {\n  ref._throwIfRoot('uploadBytesResumable');\n  return new UploadTask(ref, new FbsBlob(data), metadata);\n}\n\n/**\n * Uploads a string to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - StorageReference where string should be uploaded.\n * @param value - The string to upload.\n * @param format - The format of the string to upload.\n * @param metadata - Metadata for the newly uploaded string.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadString(\n  ref: Reference,\n  value: string,\n  format: StringFormat = StringFormat.RAW,\n  metadata?: Metadata\n): Promise<UploadResult> {\n  ref._throwIfRoot('uploadString');\n  const data = dataFromString(format, value);\n  const metadataClone = { ...metadata } as Metadata;\n  if (metadataClone['contentType'] == null && data.contentType != null) {\n    metadataClone['contentType'] = data.contentType!;\n  }\n  return uploadBytes(ref, data.data, metadataClone);\n}\n\n/**\n * List all items (files) and prefixes (folders) under this storage reference.\n *\n * This is a helper method for calling list() repeatedly until there are\n * no more results. The default pagination size is 1000.\n *\n * Note: The results may not be consistent if objects are changed while this\n * operation is running.\n *\n * Warning: listAll may potentially consume too many resources if there are\n * too many results.\n * @public\n * @param ref - StorageReference to get list from.\n *\n * @returns A Promise that resolves with all the items and prefixes under\n *      the current storage reference. `prefixes` contains references to\n *      sub-directories and `items` contains references to objects in this\n *      folder. `nextPageToken` is never returned.\n */\nexport function listAll(ref: Reference): Promise<ListResult> {\n  const accumulator: ListResult = {\n    prefixes: [],\n    items: []\n  };\n  return listAllHelper(ref, accumulator).then(() => accumulator);\n}\n\n/**\n * Separated from listAll because async functions can't use \"arguments\".\n * @param ref\n * @param accumulator\n * @param pageToken\n */\nasync function listAllHelper(\n  ref: Reference,\n  accumulator: ListResult,\n  pageToken?: string\n): Promise<void> {\n  const opt: ListOptions = {\n    // maxResults is 1000 by default.\n    pageToken\n  };\n  const nextPage = await list(ref, opt);\n  accumulator.prefixes.push(...nextPage.prefixes);\n  accumulator.items.push(...nextPage.items);\n  if (nextPage.nextPageToken != null) {\n    await listAllHelper(ref, accumulator, nextPage.nextPageToken);\n  }\n}\n\n/**\n * List items (files) and prefixes (folders) under this storage reference.\n *\n * List API is only available for Firebase Rules Version 2.\n *\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\n * delimited folder structure.\n * Refer to GCS's List API if you want to learn more.\n *\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\n * support objects whose paths end with \"/\" or contain two consecutive\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\n * list() may fail if there are too many unsupported objects in the bucket.\n * @public\n *\n * @param ref - StorageReference to get list from.\n * @param options - See ListOptions for details.\n * @returns A Promise that resolves with the items and prefixes.\n *      `prefixes` contains references to sub-folders and `items`\n *      contains references to objects in this folder. `nextPageToken`\n *      can be used to get the rest of the results.\n */\nexport function list(\n  ref: Reference,\n  options?: ListOptions | null\n): Promise<ListResult> {\n  if (options != null) {\n    if (typeof options.maxResults === 'number') {\n      validateNumber(\n        'options.maxResults',\n        /* minValue= */ 1,\n        /* maxValue= */ 1000,\n        options.maxResults\n      );\n    }\n  }\n  const op = options || {};\n  const requestInfo = requestsList(\n    ref.storage,\n    ref._location,\n    /*delimiter= */ '/',\n    op.pageToken,\n    op.maxResults\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * A `Promise` that resolves with the metadata for this object. If this\n * object doesn't exist or metadata cannot be retreived, the promise is\n * rejected.\n * @public\n * @param ref - StorageReference to get metadata from.\n */\nexport function getMetadata(ref: Reference): Promise<Metadata> {\n  ref._throwIfRoot('getMetadata');\n  const requestInfo = requestsGetMetadata(\n    ref.storage,\n    ref._location,\n    getMappings()\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Updates the metadata for this object.\n * @public\n * @param ref - StorageReference to update metadata for.\n * @param metadata - The new metadata for the object.\n *     Only values that have been explicitly set will be changed. Explicitly\n *     setting a value to null will remove the metadata.\n * @returns A `Promise` that resolves\n *     with the new metadata for this object.\n *     See `firebaseStorage.Reference.prototype.getMetadata`\n */\nexport function updateMetadata(\n  ref: Reference,\n  metadata: Partial<Metadata>\n): Promise<Metadata> {\n  ref._throwIfRoot('updateMetadata');\n  const requestInfo = requestsUpdateMetadata(\n    ref.storage,\n    ref._location,\n    metadata,\n    getMappings()\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Returns the download URL for the given Reference.\n * @public\n * @returns A `Promise` that resolves with the download\n *     URL for this object.\n */\nexport function getDownloadURL(ref: Reference): Promise<string> {\n  ref._throwIfRoot('getDownloadURL');\n  const requestInfo = requestsGetDownloadUrl(\n    ref.storage,\n    ref._location,\n    getMappings()\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newTextConnection)\n    .then(url => {\n      if (url === null) {\n        throw noDownloadURL();\n      }\n      return url;\n    });\n}\n\n/**\n * Deletes the object at this location.\n * @public\n * @param ref - StorageReference for object to delete.\n * @returns A `Promise` that resolves if the deletion succeeds.\n */\nexport function deleteObject(ref: Reference): Promise<void> {\n  ref._throwIfRoot('deleteObject');\n  const requestInfo = requestsDeleteObject(ref.storage, ref._location);\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Returns reference for object obtained by appending `childPath` to `ref`.\n *\n * @param ref - StorageReference to get child of.\n * @param childPath - Child path from provided ref.\n * @returns A reference to the object obtained by\n * appending childPath, removing any duplicate, beginning, or trailing\n * slashes.\n *\n */\nexport function _getChild(ref: Reference, childPath: string): Reference {\n  const newPath = child(ref._location.path, childPath);\n  const location = new Location(ref._location.bucket, newPath);\n  return new Reference(ref.storage, location);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Location } from './implementation/location';\nimport { FailRequest } from './implementation/failrequest';\nimport { Request, makeRequest } from './implementation/request';\nimport { RequestInfo } from './implementation/requestinfo';\nimport { Reference, _getChild } from './reference';\nimport { Provider } from '@firebase/component';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { AppCheckInternalComponentName } from '@firebase/app-check-interop-types';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { FirebaseApp, FirebaseOptions } from '@firebase/app';\nimport {\n  CONFIG_STORAGE_BUCKET_KEY,\n  DEFAULT_HOST,\n  DEFAULT_MAX_OPERATION_RETRY_TIME,\n  DEFAULT_MAX_UPLOAD_RETRY_TIME\n} from './implementation/constants';\nimport {\n  invalidArgument,\n  appDeleted,\n  noDefaultBucket\n} from './implementation/error';\nimport { validateNumber } from './implementation/type';\nimport { FirebaseStorage } from './public-types';\nimport { createMockUserToken, EmulatorMockTokenOptions } from '@firebase/util';\nimport { Connection, ConnectionType } from './implementation/connection';\n\nexport function isUrl(path?: string): boolean {\n  return /^[A-Za-z]+:\\/\\//.test(path as string);\n}\n\n/**\n * Returns a firebaseStorage.Reference for the given url.\n */\nfunction refFromURL(service: FirebaseStorageImpl, url: string): Reference {\n  return new Reference(service, url);\n}\n\n/**\n * Returns a firebaseStorage.Reference for the given path in the default\n * bucket.\n */\nfunction refFromPath(\n  ref: FirebaseStorageImpl | Reference,\n  path?: string\n): Reference {\n  if (ref instanceof FirebaseStorageImpl) {\n    const service = ref;\n    if (service._bucket == null) {\n      throw noDefaultBucket();\n    }\n    const reference = new Reference(service, service._bucket!);\n    if (path != null) {\n      return refFromPath(reference, path);\n    } else {\n      return reference;\n    }\n  } else {\n    // ref is a Reference\n    if (path !== undefined) {\n      return _getChild(ref, path);\n    } else {\n      return ref;\n    }\n  }\n}\n\n/**\n * Returns a storage Reference for the given url.\n * @param storage - `Storage` instance.\n * @param url - URL. If empty, returns root reference.\n * @public\n */\nexport function ref(storage: FirebaseStorageImpl, url?: string): Reference;\n/**\n * Returns a storage Reference for the given path in the\n * default bucket.\n * @param storageOrRef - `Storage` service or storage `Reference`.\n * @param pathOrUrlStorage - path. If empty, returns root reference (if Storage\n * instance provided) or returns same reference (if Reference provided).\n * @public\n */\nexport function ref(\n  storageOrRef: FirebaseStorageImpl | Reference,\n  path?: string\n): Reference;\nexport function ref(\n  serviceOrRef: FirebaseStorageImpl | Reference,\n  pathOrUrl?: string\n): Reference | null {\n  if (pathOrUrl && isUrl(pathOrUrl)) {\n    if (serviceOrRef instanceof FirebaseStorageImpl) {\n      return refFromURL(serviceOrRef, pathOrUrl);\n    } else {\n      throw invalidArgument(\n        'To use ref(service, url), the first argument must be a Storage instance.'\n      );\n    }\n  } else {\n    return refFromPath(serviceOrRef, pathOrUrl);\n  }\n}\n\nfunction extractBucket(\n  host: string,\n  config?: FirebaseOptions\n): Location | null {\n  const bucketString = config?.[CONFIG_STORAGE_BUCKET_KEY];\n  if (bucketString == null) {\n    return null;\n  }\n  return Location.makeFromBucketSpec(bucketString, host);\n}\n\nexport function connectStorageEmulator(\n  storage: FirebaseStorageImpl,\n  host: string,\n  port: number,\n  options: {\n    mockUserToken?: EmulatorMockTokenOptions | string;\n  } = {}\n): void {\n  storage.host = `${host}:${port}`;\n  storage._protocol = 'http';\n  const { mockUserToken } = options;\n  if (mockUserToken) {\n    storage._overrideAuthToken =\n      typeof mockUserToken === 'string'\n        ? mockUserToken\n        : createMockUserToken(mockUserToken, storage.app.options.projectId);\n  }\n}\n\n/**\n * A service that provides Firebase Storage Reference instances.\n * @param opt_url - gs:// url to a custom Storage Bucket\n *\n * @internal\n */\nexport class FirebaseStorageImpl implements FirebaseStorage {\n  _bucket: Location | null = null;\n  /**\n   * This string can be in the formats:\n   * - host\n   * - host:port\n   */\n  private _host: string = DEFAULT_HOST;\n  _protocol: string = 'https';\n  protected readonly _appId: string | null = null;\n  private readonly _requests: Set<Request<unknown>>;\n  private _deleted: boolean = false;\n  private _maxOperationRetryTime: number;\n  private _maxUploadRetryTime: number;\n  _overrideAuthToken?: string;\n\n  constructor(\n    /**\n     * FirebaseApp associated with this StorageService instance.\n     */\n    readonly app: FirebaseApp,\n    readonly _authProvider: Provider<FirebaseAuthInternalName>,\n    /**\n     * @internal\n     */\n    readonly _appCheckProvider: Provider<AppCheckInternalComponentName>,\n    /**\n     * @internal\n     */\n    readonly _url?: string,\n    readonly _firebaseVersion?: string\n  ) {\n    this._maxOperationRetryTime = DEFAULT_MAX_OPERATION_RETRY_TIME;\n    this._maxUploadRetryTime = DEFAULT_MAX_UPLOAD_RETRY_TIME;\n    this._requests = new Set();\n    if (_url != null) {\n      this._bucket = Location.makeFromBucketSpec(_url, this._host);\n    } else {\n      this._bucket = extractBucket(this._host, this.app.options);\n    }\n  }\n\n  /**\n   * The host string for this service, in the form of `host` or\n   * `host:port`.\n   */\n  get host(): string {\n    return this._host;\n  }\n\n  set host(host: string) {\n    this._host = host;\n    if (this._url != null) {\n      this._bucket = Location.makeFromBucketSpec(this._url, host);\n    } else {\n      this._bucket = extractBucket(host, this.app.options);\n    }\n  }\n\n  /**\n   * The maximum time to retry uploads in milliseconds.\n   */\n  get maxUploadRetryTime(): number {\n    return this._maxUploadRetryTime;\n  }\n\n  set maxUploadRetryTime(time: number) {\n    validateNumber(\n      'time',\n      /* minValue=*/ 0,\n      /* maxValue= */ Number.POSITIVE_INFINITY,\n      time\n    );\n    this._maxUploadRetryTime = time;\n  }\n\n  /**\n   * The maximum time to retry operations other than uploads or downloads in\n   * milliseconds.\n   */\n  get maxOperationRetryTime(): number {\n    return this._maxOperationRetryTime;\n  }\n\n  set maxOperationRetryTime(time: number) {\n    validateNumber(\n      'time',\n      /* minValue=*/ 0,\n      /* maxValue= */ Number.POSITIVE_INFINITY,\n      time\n    );\n    this._maxOperationRetryTime = time;\n  }\n\n  async _getAuthToken(): Promise<string | null> {\n    if (this._overrideAuthToken) {\n      return this._overrideAuthToken;\n    }\n    const auth = this._authProvider.getImmediate({ optional: true });\n    if (auth) {\n      const tokenData = await auth.getToken();\n      if (tokenData !== null) {\n        return tokenData.accessToken;\n      }\n    }\n    return null;\n  }\n\n  async _getAppCheckToken(): Promise<string | null> {\n    const appCheck = this._appCheckProvider.getImmediate({ optional: true });\n    if (appCheck) {\n      const result = await appCheck.getToken();\n      // TODO: What do we want to do if there is an error getting the token?\n      // Context: appCheck.getToken() will never throw even if an error happened. In the error case, a dummy token will be\n      // returned along with an error field describing the error. In general, we shouldn't care about the error condition and just use\n      // the token (actual or dummy) to send requests.\n      return result.token;\n    }\n    return null;\n  }\n\n  /**\n   * Stop running requests and prevent more from being created.\n   */\n  _delete(): Promise<void> {\n    if (!this._deleted) {\n      this._deleted = true;\n      this._requests.forEach(request => request.cancel());\n      this._requests.clear();\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Returns a new firebaseStorage.Reference object referencing this StorageService\n   * at the given Location.\n   */\n  _makeStorageReference(loc: Location): Reference {\n    return new Reference(this, loc);\n  }\n\n  /**\n   * @param requestInfo - HTTP RequestInfo object\n   * @param authToken - Firebase auth token\n   */\n  _makeRequest<I extends ConnectionType, O>(\n    requestInfo: RequestInfo<I, O>,\n    requestFactory: () => Connection<I>,\n    authToken: string | null,\n    appCheckToken: string | null,\n    retry = true\n  ): Request<O> {\n    if (!this._deleted) {\n      const request = makeRequest(\n        requestInfo,\n        this._appId,\n        authToken,\n        appCheckToken,\n        requestFactory,\n        this._firebaseVersion,\n        retry\n      );\n      this._requests.add(request);\n      // Request removes itself from set when complete.\n      request.getPromise().then(\n        () => this._requests.delete(request),\n        () => this._requests.delete(request)\n      );\n      return request;\n    } else {\n      return new FailRequest(appDeleted());\n    }\n  }\n\n  async makeRequestWithTokens<I extends ConnectionType, O>(\n    requestInfo: RequestInfo<I, O>,\n    requestFactory: () => Connection<I>\n  ): Promise<O> {\n    const [authToken, appCheckToken] = await Promise.all([\n      this._getAuthToken(),\n      this._getAppCheckToken()\n    ]);\n\n    return this._makeRequest(\n      requestInfo,\n      requestFactory,\n      authToken,\n      appCheckToken\n    ).getPromise();\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Type constant for Firebase Storage.\n */\nexport const STORAGE_TYPE = 'storage';\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { _getProvider, FirebaseApp, getApp } from '@firebase/app';\n\nimport {\n  ref as refInternal,\n  FirebaseStorageImpl,\n  connectStorageEmulator as connectEmulatorInternal\n} from './service';\nimport { Provider } from '@firebase/component';\n\nimport {\n  StorageReference,\n  FirebaseStorage,\n  UploadResult,\n  ListOptions,\n  ListResult,\n  UploadTask,\n  SettableMetadata,\n  UploadMetadata,\n  FullMetadata\n} from './public-types';\nimport { Metadata as MetadataInternal } from './metadata';\nimport {\n  uploadBytes as uploadBytesInternal,\n  uploadBytesResumable as uploadBytesResumableInternal,\n  uploadString as uploadStringInternal,\n  getMetadata as getMetadataInternal,\n  updateMetadata as updateMetadataInternal,\n  list as listInternal,\n  listAll as listAllInternal,\n  getDownloadURL as getDownloadURLInternal,\n  deleteObject as deleteObjectInternal,\n  Reference,\n  _getChild as _getChildInternal,\n  getBytesInternal\n} from './reference';\nimport { STORAGE_TYPE } from './constants';\nimport {\n  EmulatorMockTokenOptions,\n  getModularInstance,\n  getDefaultEmulatorHostnameAndPort\n} from '@firebase/util';\nimport { StringFormat } from './implementation/string';\n\nexport { EmulatorMockTokenOptions } from '@firebase/util';\n\nexport { StorageError, StorageErrorCode } from './implementation/error';\n\n/**\n * Public types.\n */\nexport * from './public-types';\n\nexport { Location as _Location } from './implementation/location';\nexport { UploadTask as _UploadTask } from './task';\nexport type { Reference as _Reference } from './reference';\nexport type { FirebaseStorageImpl as _FirebaseStorageImpl } from './service';\nexport { FbsBlob as _FbsBlob } from './implementation/blob';\nexport { dataFromString as _dataFromString } from './implementation/string';\nexport {\n  invalidRootOperation as _invalidRootOperation,\n  invalidArgument as _invalidArgument\n} from './implementation/error';\nexport {\n  TaskEvent as _TaskEvent,\n  TaskState as _TaskState\n} from './implementation/taskenums';\nexport { StringFormat };\n\n/**\n * Downloads the data at the object's location. Returns an error if the object\n * is not found.\n *\n * To use this functionality, you have to whitelist your app's origin in your\n * Cloud Storage bucket. See also\n * https://cloud.google.com/storage/docs/configuring-cors\n *\n * @public\n * @param ref - StorageReference where data should be downloaded.\n * @param maxDownloadSizeBytes - If set, the maximum allowed size in bytes to\n * retrieve.\n * @returns A Promise containing the object's bytes\n */\nexport function getBytes(\n  ref: StorageReference,\n  maxDownloadSizeBytes?: number\n): Promise<ArrayBuffer> {\n  ref = getModularInstance(ref);\n  return getBytesInternal(ref as Reference, maxDownloadSizeBytes);\n}\n\n/**\n * Uploads data to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - {@link StorageReference} where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the data to upload.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadBytes(\n  ref: StorageReference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: UploadMetadata\n): Promise<UploadResult> {\n  ref = getModularInstance(ref);\n  return uploadBytesInternal(\n    ref as Reference,\n    data,\n    metadata as MetadataInternal\n  );\n}\n\n/**\n * Uploads a string to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - {@link StorageReference} where string should be uploaded.\n * @param value - The string to upload.\n * @param format - The format of the string to upload.\n * @param metadata - Metadata for the string to upload.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadString(\n  ref: StorageReference,\n  value: string,\n  format?: StringFormat,\n  metadata?: UploadMetadata\n): Promise<UploadResult> {\n  ref = getModularInstance(ref);\n  return uploadStringInternal(\n    ref as Reference,\n    value,\n    format,\n    metadata as MetadataInternal\n  );\n}\n\n/**\n * Uploads data to this object's location.\n * The upload can be paused and resumed, and exposes progress updates.\n * @public\n * @param ref - {@link StorageReference} where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the data to upload.\n * @returns An UploadTask\n */\nexport function uploadBytesResumable(\n  ref: StorageReference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: UploadMetadata\n): UploadTask {\n  ref = getModularInstance(ref);\n  return uploadBytesResumableInternal(\n    ref as Reference,\n    data,\n    metadata as MetadataInternal\n  ) as UploadTask;\n}\n\n/**\n * A `Promise` that resolves with the metadata for this object. If this\n * object doesn't exist or metadata cannot be retreived, the promise is\n * rejected.\n * @public\n * @param ref - {@link StorageReference} to get metadata from.\n */\nexport function getMetadata(ref: StorageReference): Promise<FullMetadata> {\n  ref = getModularInstance(ref);\n  return getMetadataInternal(ref as Reference) as Promise<FullMetadata>;\n}\n\n/**\n * Updates the metadata for this object.\n * @public\n * @param ref - {@link StorageReference} to update metadata for.\n * @param metadata - The new metadata for the object.\n *     Only values that have been explicitly set will be changed. Explicitly\n *     setting a value to null will remove the metadata.\n * @returns A `Promise` that resolves with the new metadata for this object.\n */\nexport function updateMetadata(\n  ref: StorageReference,\n  metadata: SettableMetadata\n): Promise<FullMetadata> {\n  ref = getModularInstance(ref);\n  return updateMetadataInternal(\n    ref as Reference,\n    metadata as Partial<MetadataInternal>\n  ) as Promise<FullMetadata>;\n}\n\n/**\n * List items (files) and prefixes (folders) under this storage reference.\n *\n * List API is only available for Firebase Rules Version 2.\n *\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\n * delimited folder structure.\n * Refer to GCS's List API if you want to learn more.\n *\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\n * support objects whose paths end with \"/\" or contain two consecutive\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\n * list() may fail if there are too many unsupported objects in the bucket.\n * @public\n *\n * @param ref - {@link StorageReference} to get list from.\n * @param options - See {@link ListOptions} for details.\n * @returns A `Promise` that resolves with the items and prefixes.\n *      `prefixes` contains references to sub-folders and `items`\n *      contains references to objects in this folder. `nextPageToken`\n *      can be used to get the rest of the results.\n */\nexport function list(\n  ref: StorageReference,\n  options?: ListOptions\n): Promise<ListResult> {\n  ref = getModularInstance(ref);\n  return listInternal(ref as Reference, options);\n}\n\n/**\n * List all items (files) and prefixes (folders) under this storage reference.\n *\n * This is a helper method for calling list() repeatedly until there are\n * no more results. The default pagination size is 1000.\n *\n * Note: The results may not be consistent if objects are changed while this\n * operation is running.\n *\n * Warning: `listAll` may potentially consume too many resources if there are\n * too many results.\n * @public\n * @param ref - {@link StorageReference} to get list from.\n *\n * @returns A `Promise` that resolves with all the items and prefixes under\n *      the current storage reference. `prefixes` contains references to\n *      sub-directories and `items` contains references to objects in this\n *      folder. `nextPageToken` is never returned.\n */\nexport function listAll(ref: StorageReference): Promise<ListResult> {\n  ref = getModularInstance(ref);\n  return listAllInternal(ref as Reference);\n}\n\n/**\n * Returns the download URL for the given {@link StorageReference}.\n * @public\n * @param ref - {@link StorageReference} to get the download URL for.\n * @returns A `Promise` that resolves with the download\n *     URL for this object.\n */\nexport function getDownloadURL(ref: StorageReference): Promise<string> {\n  ref = getModularInstance(ref);\n  return getDownloadURLInternal(ref as Reference);\n}\n\n/**\n * Deletes the object at this location.\n * @public\n * @param ref - {@link StorageReference} for object to delete.\n * @returns A `Promise` that resolves if the deletion succeeds.\n */\nexport function deleteObject(ref: StorageReference): Promise<void> {\n  ref = getModularInstance(ref);\n  return deleteObjectInternal(ref as Reference);\n}\n\n/**\n * Returns a {@link StorageReference} for the given url.\n * @param storage - {@link FirebaseStorage} instance.\n * @param url - URL. If empty, returns root reference.\n * @public\n */\nexport function ref(storage: FirebaseStorage, url?: string): StorageReference;\n/**\n * Returns a {@link StorageReference} for the given path in the\n * default bucket.\n * @param storageOrRef - {@link FirebaseStorage} or {@link StorageReference}.\n * @param pathOrUrlStorage - path. If empty, returns root reference (if {@link FirebaseStorage}\n * instance provided) or returns same reference (if {@link StorageReference} provided).\n * @public\n */\nexport function ref(\n  storageOrRef: FirebaseStorage | StorageReference,\n  path?: string\n): StorageReference;\nexport function ref(\n  serviceOrRef: FirebaseStorage | StorageReference,\n  pathOrUrl?: string\n): StorageReference | null {\n  serviceOrRef = getModularInstance(serviceOrRef);\n  return refInternal(\n    serviceOrRef as FirebaseStorageImpl | Reference,\n    pathOrUrl\n  );\n}\n\n/**\n * @internal\n */\nexport function _getChild(ref: StorageReference, childPath: string): Reference {\n  return _getChildInternal(ref as Reference, childPath);\n}\n\n/**\n * Gets a {@link FirebaseStorage} instance for the given Firebase app.\n * @public\n * @param app - Firebase app to get {@link FirebaseStorage} instance for.\n * @param bucketUrl - The gs:// url to your Firebase Storage Bucket.\n * If not passed, uses the app's default Storage Bucket.\n * @returns A {@link FirebaseStorage} instance.\n */\nexport function getStorage(\n  app: FirebaseApp = getApp(),\n  bucketUrl?: string\n): FirebaseStorage {\n  app = getModularInstance(app);\n  const storageProvider: Provider<'storage'> = _getProvider(app, STORAGE_TYPE);\n  const storageInstance = storageProvider.getImmediate({\n    identifier: bucketUrl\n  });\n  const emulator = getDefaultEmulatorHostnameAndPort('storage');\n  if (emulator) {\n    connectStorageEmulator(storageInstance, ...emulator);\n  }\n  return storageInstance;\n}\n\n/**\n * Modify this {@link FirebaseStorage} instance to communicate with the Cloud Storage emulator.\n *\n * @param storage - The {@link FirebaseStorage} instance\n * @param host - The emulator host (ex: localhost)\n * @param port - The emulator port (ex: 5001)\n * @param options - Emulator options. `options.mockUserToken` is the mock auth\n * token to use for unit testing Security Rules.\n * @public\n */\nexport function connectStorageEmulator(\n  storage: FirebaseStorage,\n  host: string,\n  port: number,\n  options: {\n    mockUserToken?: EmulatorMockTokenOptions | string;\n  } = {}\n): void {\n  connectEmulatorInternal(storage as FirebaseStorageImpl, host, port, options);\n}\n","/**\n * Cloud Storage for Firebase\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  _registerComponent,\n  registerVersion,\n  SDK_VERSION\n} from '@firebase/app';\n\nimport { FirebaseStorageImpl } from '../src/service';\nimport {\n  Component,\n  ComponentType,\n  ComponentContainer,\n  InstanceFactoryOptions\n} from '@firebase/component';\n\nimport { name, version } from '../package.json';\n\nimport { FirebaseStorage } from './public-types';\nimport { STORAGE_TYPE } from './constants';\n\nexport * from './api';\nexport * from './api.browser';\n\nfunction factory(\n  container: ComponentContainer,\n  { instanceIdentifier: url }: InstanceFactoryOptions\n): FirebaseStorage {\n  const app = container.getProvider('app').getImmediate();\n  const authProvider = container.getProvider('auth-internal');\n  const appCheckProvider = container.getProvider('app-check-internal');\n\n  return new FirebaseStorageImpl(\n    app,\n    authProvider,\n    appCheckProvider,\n    url,\n    SDK_VERSION\n  );\n}\n\nfunction registerStorage(): void {\n  _registerComponent(\n    new Component(\n      STORAGE_TYPE,\n      factory,\n      ComponentType.PUBLIC\n    ).setMultipleInstances(true)\n  );\n  //RUNTIME_ENV will be replaced during the compilation to \"node\" for nodejs and an empty string for browser\n  registerVersion(name, version, '__RUNTIME_ENV__');\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n}\n\nregisterStorage();\n","/*\n  Copyright 2019 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nconst logger = (process.env.NODE_ENV === 'production'\n    ? null\n    : (() => {\n        // Don't overwrite this value if it's already set.\n        // See https://github.com/GoogleChrome/workbox/pull/2284#issuecomment-560470923\n        if (!('__WB_DISABLE_DEV_LOGS' in self)) {\n            self.__WB_DISABLE_DEV_LOGS = false;\n        }\n        let inGroup = false;\n        const methodToColorMap = {\n            debug: `#7f8c8d`,\n            log: `#2ecc71`,\n            warn: `#f39c12`,\n            error: `#c0392b`,\n            groupCollapsed: `#3498db`,\n            groupEnd: null, // No colored prefix on groupEnd\n        };\n        const print = function (method, args) {\n            if (self.__WB_DISABLE_DEV_LOGS) {\n                return;\n            }\n            if (method === 'groupCollapsed') {\n                // Safari doesn't print all console.groupCollapsed() arguments:\n                // https://bugs.webkit.org/show_bug.cgi?id=182754\n                if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n                    console[method](...args);\n                    return;\n                }\n            }\n            const styles = [\n                `background: ${methodToColorMap[method]}`,\n                `border-radius: 0.5em`,\n                `color: white`,\n                `font-weight: bold`,\n                `padding: 2px 0.5em`,\n            ];\n            // When in a group, the workbox prefix is not displayed.\n            const logPrefix = inGroup ? [] : ['%cworkbox', styles.join(';')];\n            console[method](...logPrefix, ...args);\n            if (method === 'groupCollapsed') {\n                inGroup = true;\n            }\n            if (method === 'groupEnd') {\n                inGroup = false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        const api = {};\n        const loggerMethods = Object.keys(methodToColorMap);\n        for (const key of loggerMethods) {\n            const method = key;\n            api[method] = (...args) => {\n                print(method, args);\n            };\n        }\n        return api;\n    })());\nexport { logger };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { messages } from './messages.js';\nimport '../../_version.js';\nconst fallback = (code, ...args) => {\n    let msg = code;\n    if (args.length > 0) {\n        msg += ` :: ${JSON.stringify(args)}`;\n    }\n    return msg;\n};\nconst generatorFunction = (code, details = {}) => {\n    const message = messages[code];\n    if (!message) {\n        throw new Error(`Unable to find message for code '${code}'.`);\n    }\n    return message(details);\n};\nexport const messageGenerator = process.env.NODE_ENV === 'production' ? fallback : generatorFunction;\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { messageGenerator } from '../models/messages/messageGenerator.js';\nimport '../_version.js';\n/**\n * Workbox errors should be thrown with this class.\n * This allows use to ensure the type easily in tests,\n * helps developers identify errors from workbox\n * easily and allows use to optimise error\n * messages correctly.\n *\n * @private\n */\nclass WorkboxError extends Error {\n    /**\n     *\n     * @param {string} errorCode The error code that\n     * identifies this particular error.\n     * @param {Object=} details Any relevant arguments\n     * that will help developers identify issues should\n     * be added as a key on the context object.\n     */\n    constructor(errorCode, details) {\n        const message = messageGenerator(errorCode, details);\n        super(message);\n        this.name = errorCode;\n        this.details = details;\n    }\n}\nexport { WorkboxError };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n// Callbacks to be executed whenever there's a quota error.\n// Can't change Function type right now.\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst quotaErrorCallbacks = new Set();\nexport { quotaErrorCallbacks };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nconst _cacheNameDetails = {\n    googleAnalytics: 'googleAnalytics',\n    precache: 'precache-v2',\n    prefix: 'workbox',\n    runtime: 'runtime',\n    suffix: typeof registration !== 'undefined' ? registration.scope : '',\n};\nconst _createCacheName = (cacheName) => {\n    return [_cacheNameDetails.prefix, cacheName, _cacheNameDetails.suffix]\n        .filter((value) => value && value.length > 0)\n        .join('-');\n};\nconst eachCacheNameDetail = (fn) => {\n    for (const key of Object.keys(_cacheNameDetails)) {\n        fn(key);\n    }\n};\nexport const cacheNames = {\n    updateDetails: (details) => {\n        eachCacheNameDetail((key) => {\n            if (typeof details[key] === 'string') {\n                _cacheNameDetails[key] = details[key];\n            }\n        });\n    },\n    getGoogleAnalyticsName: (userCacheName) => {\n        return userCacheName || _createCacheName(_cacheNameDetails.googleAnalytics);\n    },\n    getPrecacheName: (userCacheName) => {\n        return userCacheName || _createCacheName(_cacheNameDetails.precache);\n    },\n    getPrefix: () => {\n        return _cacheNameDetails.prefix;\n    },\n    getRuntimeName: (userCacheName) => {\n        return userCacheName || _createCacheName(_cacheNameDetails.runtime);\n    },\n    getSuffix: () => {\n        return _cacheNameDetails.suffix;\n    },\n};\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nlet supportStatus;\n/**\n * A utility function that determines whether the current browser supports\n * constructing a new `Response` from a `response.body` stream.\n *\n * @return {boolean} `true`, if the current browser can successfully\n *     construct a `Response` from a `response.body` stream, `false` otherwise.\n *\n * @private\n */\nfunction canConstructResponseFromBodyStream() {\n    if (supportStatus === undefined) {\n        const testResponse = new Response('');\n        if ('body' in testResponse) {\n            try {\n                new Response(testResponse.body);\n                supportStatus = true;\n            }\n            catch (error) {\n                supportStatus = false;\n            }\n        }\n        supportStatus = false;\n    }\n    return supportStatus;\n}\nexport { canConstructResponseFromBodyStream };\n","/*\n  Copyright 2020 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nfunction stripParams(fullURL, ignoreParams) {\n    const strippedURL = new URL(fullURL);\n    for (const param of ignoreParams) {\n        strippedURL.searchParams.delete(param);\n    }\n    return strippedURL.href;\n}\n/**\n * Matches an item in the cache, ignoring specific URL params. This is similar\n * to the `ignoreSearch` option, but it allows you to ignore just specific\n * params (while continuing to match on the others).\n *\n * @private\n * @param {Cache} cache\n * @param {Request} request\n * @param {Object} matchOptions\n * @param {Array<string>} ignoreParams\n * @return {Promise<Response|undefined>}\n */\nasync function cacheMatchIgnoreParams(cache, request, ignoreParams, matchOptions) {\n    const strippedRequestURL = stripParams(request.url, ignoreParams);\n    // If the request doesn't include any ignored params, match as normal.\n    if (request.url === strippedRequestURL) {\n        return cache.match(request, matchOptions);\n    }\n    // Otherwise, match by comparing keys\n    const keysOptions = Object.assign(Object.assign({}, matchOptions), { ignoreSearch: true });\n    const cacheKeys = await cache.keys(request, keysOptions);\n    for (const cacheKey of cacheKeys) {\n        const strippedCacheKeyURL = stripParams(cacheKey.url, ignoreParams);\n        if (strippedRequestURL === strippedCacheKeyURL) {\n            return cache.match(cacheKey, matchOptions);\n        }\n    }\n    return;\n}\nexport { cacheMatchIgnoreParams };\n","/*\n  Copyright 2019 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * A helper function that prevents a promise from being flagged as unused.\n *\n * @private\n **/\nexport function dontWaitFor(promise) {\n    // Effective no-op.\n    void promise.then(() => { });\n}\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * The Deferred class composes Promises in a way that allows for them to be\n * resolved or rejected from outside the constructor. In most cases promises\n * should be used directly, but Deferreds can be necessary when the logic to\n * resolve a promise must be separate.\n *\n * @private\n */\nclass Deferred {\n    /**\n     * Creates a promise and exposes its resolve and reject functions as methods.\n     */\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\nexport { Deferred };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { logger } from '../_private/logger.js';\nimport { quotaErrorCallbacks } from '../models/quotaErrorCallbacks.js';\nimport '../_version.js';\n/**\n * Runs all of the callback functions, one at a time sequentially, in the order\n * in which they were registered.\n *\n * @memberof workbox-core\n * @private\n */\nasync function executeQuotaErrorCallbacks() {\n    if (process.env.NODE_ENV !== 'production') {\n        logger.log(`About to run ${quotaErrorCallbacks.size} ` +\n            `callbacks to clean up caches.`);\n    }\n    for (const callback of quotaErrorCallbacks) {\n        await callback();\n        if (process.env.NODE_ENV !== 'production') {\n            logger.log(callback, 'is complete.');\n        }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n        logger.log('Finished running callbacks.');\n    }\n}\nexport { executeQuotaErrorCallbacks };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nconst getFriendlyURL = (url) => {\n    const urlObj = new URL(String(url), location.href);\n    // See https://github.com/GoogleChrome/workbox/issues/2323\n    // We want to include everything, except for the origin if it's same-origin.\n    return urlObj.href.replace(new RegExp(`^${location.origin}`), '');\n};\nexport { getFriendlyURL };\n","/*\n  Copyright 2019 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * Returns a promise that resolves and the passed number of milliseconds.\n * This utility is an async/await-friendly version of `setTimeout`.\n *\n * @param {number} ms\n * @return {Promise}\n * @private\n */\nexport function timeout(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\n","/*\n  Copyright 2020 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * A utility method that makes it easier to use `event.waitUntil` with\n * async functions and return the result.\n *\n * @param {ExtendableEvent} event\n * @param {Function} asyncFn\n * @return {Function}\n * @private\n */\nfunction waitUntil(event, asyncFn) {\n    const returnPromise = asyncFn();\n    event.waitUntil(returnPromise);\n    return returnPromise;\n}\nexport { waitUntil };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { canConstructResponseFromBodyStream } from './_private/canConstructResponseFromBodyStream.js';\nimport { WorkboxError } from './_private/WorkboxError.js';\nimport './_version.js';\n/**\n * Allows developers to copy a response and modify its `headers`, `status`,\n * or `statusText` values (the values settable via a\n * [`ResponseInit`]{@link https://developer.mozilla.org/en-US/docs/Web/API/Response/Response#Syntax}\n * object in the constructor).\n * To modify these values, pass a function as the second argument. That\n * function will be invoked with a single object with the response properties\n * `{headers, status, statusText}`. The return value of this function will\n * be used as the `ResponseInit` for the new `Response`. To change the values\n * either modify the passed parameter(s) and return it, or return a totally\n * new object.\n *\n * This method is intentionally limited to same-origin responses, regardless of\n * whether CORS was used or not.\n *\n * @param {Response} response\n * @param {Function} modifier\n * @memberof workbox-core\n */\nasync function copyResponse(response, modifier) {\n    let origin = null;\n    // If response.url isn't set, assume it's cross-origin and keep origin null.\n    if (response.url) {\n        const responseURL = new URL(response.url);\n        origin = responseURL.origin;\n    }\n    if (origin !== self.location.origin) {\n        throw new WorkboxError('cross-origin-copy-response', { origin });\n    }\n    const clonedResponse = response.clone();\n    // Create a fresh `ResponseInit` object by cloning the headers.\n    const responseInit = {\n        headers: new Headers(clonedResponse.headers),\n        status: clonedResponse.status,\n        statusText: clonedResponse.statusText,\n    };\n    // Apply any user modifications.\n    const modifiedResponseInit = modifier ? modifier(responseInit) : responseInit;\n    // Create the new response from the body stream and `ResponseInit`\n    // modifications. Note: not all browsers support the Response.body stream,\n    // so fall back to reading the entire body into memory as a blob.\n    const body = canConstructResponseFromBodyStream()\n        ? clonedResponse.body\n        : await clonedResponse.blob();\n    return new Response(body, modifiedResponseInit);\n}\nexport { copyResponse };\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { openDB, deleteDB } from 'idb';\nimport '../_version.js';\nconst DB_NAME = 'workbox-expiration';\nconst CACHE_OBJECT_STORE = 'cache-entries';\nconst normalizeURL = (unNormalizedUrl) => {\n    const url = new URL(unNormalizedUrl, location.href);\n    url.hash = '';\n    return url.href;\n};\n/**\n * Returns the timestamp model.\n *\n * @private\n */\nclass CacheTimestampsModel {\n    /**\n     *\n     * @param {string} cacheName\n     *\n     * @private\n     */\n    constructor(cacheName) {\n        this._db = null;\n        this._cacheName = cacheName;\n    }\n    /**\n     * Performs an upgrade of indexedDB.\n     *\n     * @param {IDBPDatabase<CacheDbSchema>} db\n     *\n     * @private\n     */\n    _upgradeDb(db) {\n        // TODO(philipwalton): EdgeHTML doesn't support arrays as a keyPath, so we\n        // have to use the `id` keyPath here and create our own values (a\n        // concatenation of `url + cacheName`) instead of simply using\n        // `keyPath: ['url', 'cacheName']`, which is supported in other browsers.\n        const objStore = db.createObjectStore(CACHE_OBJECT_STORE, { keyPath: 'id' });\n        // TODO(philipwalton): once we don't have to support EdgeHTML, we can\n        // create a single index with the keyPath `['cacheName', 'timestamp']`\n        // instead of doing both these indexes.\n        objStore.createIndex('cacheName', 'cacheName', { unique: false });\n        objStore.createIndex('timestamp', 'timestamp', { unique: false });\n    }\n    /**\n     * Performs an upgrade of indexedDB and deletes deprecated DBs.\n     *\n     * @param {IDBPDatabase<CacheDbSchema>} db\n     *\n     * @private\n     */\n    _upgradeDbAndDeleteOldDbs(db) {\n        this._upgradeDb(db);\n        if (this._cacheName) {\n            void deleteDB(this._cacheName);\n        }\n    }\n    /**\n     * @param {string} url\n     * @param {number} timestamp\n     *\n     * @private\n     */\n    async setTimestamp(url, timestamp) {\n        url = normalizeURL(url);\n        const entry = {\n            url,\n            timestamp,\n            cacheName: this._cacheName,\n            // Creating an ID from the URL and cache name won't be necessary once\n            // Edge switches to Chromium and all browsers we support work with\n            // array keyPaths.\n            id: this._getId(url),\n        };\n        const db = await this.getDb();\n        const tx = db.transaction(CACHE_OBJECT_STORE, 'readwrite', {\n            durability: 'relaxed',\n        });\n        await tx.store.put(entry);\n        await tx.done;\n    }\n    /**\n     * Returns the timestamp stored for a given URL.\n     *\n     * @param {string} url\n     * @return {number | undefined}\n     *\n     * @private\n     */\n    async getTimestamp(url) {\n        const db = await this.getDb();\n        const entry = await db.get(CACHE_OBJECT_STORE, this._getId(url));\n        return entry === null || entry === void 0 ? void 0 : entry.timestamp;\n    }\n    /**\n     * Iterates through all the entries in the object store (from newest to\n     * oldest) and removes entries once either `maxCount` is reached or the\n     * entry's timestamp is less than `minTimestamp`.\n     *\n     * @param {number} minTimestamp\n     * @param {number} maxCount\n     * @return {Array<string>}\n     *\n     * @private\n     */\n    async expireEntries(minTimestamp, maxCount) {\n        const db = await this.getDb();\n        let cursor = await db\n            .transaction(CACHE_OBJECT_STORE)\n            .store.index('timestamp')\n            .openCursor(null, 'prev');\n        const entriesToDelete = [];\n        let entriesNotDeletedCount = 0;\n        while (cursor) {\n            const result = cursor.value;\n            // TODO(philipwalton): once we can use a multi-key index, we\n            // won't have to check `cacheName` here.\n            if (result.cacheName === this._cacheName) {\n                // Delete an entry if it's older than the max age or\n                // if we already have the max number allowed.\n                if ((minTimestamp && result.timestamp < minTimestamp) ||\n                    (maxCount && entriesNotDeletedCount >= maxCount)) {\n                    // TODO(philipwalton): we should be able to delete the\n                    // entry right here, but doing so causes an iteration\n                    // bug in Safari stable (fixed in TP). Instead we can\n                    // store the keys of the entries to delete, and then\n                    // delete the separate transactions.\n                    // https://github.com/GoogleChrome/workbox/issues/1978\n                    // cursor.delete();\n                    // We only need to return the URL, not the whole entry.\n                    entriesToDelete.push(cursor.value);\n                }\n                else {\n                    entriesNotDeletedCount++;\n                }\n            }\n            cursor = await cursor.continue();\n        }\n        // TODO(philipwalton): once the Safari bug in the following issue is fixed,\n        // we should be able to remove this loop and do the entry deletion in the\n        // cursor loop above:\n        // https://github.com/GoogleChrome/workbox/issues/1978\n        const urlsDeleted = [];\n        for (const entry of entriesToDelete) {\n            await db.delete(CACHE_OBJECT_STORE, entry.id);\n            urlsDeleted.push(entry.url);\n        }\n        return urlsDeleted;\n    }\n    /**\n     * Takes a URL and returns an ID that will be unique in the object store.\n     *\n     * @param {string} url\n     * @return {string}\n     *\n     * @private\n     */\n    _getId(url) {\n        // Creating an ID from the URL and cache name won't be necessary once\n        // Edge switches to Chromium and all browsers we support work with\n        // array keyPaths.\n        return this._cacheName + '|' + normalizeURL(url);\n    }\n    /**\n     * Returns an open connection to the database.\n     *\n     * @private\n     */\n    async getDb() {\n        if (!this._db) {\n            this._db = await openDB(DB_NAME, 1, {\n                upgrade: this._upgradeDbAndDeleteOldDbs.bind(this),\n            });\n        }\n        return this._db;\n    }\n}\nexport { CacheTimestampsModel };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { dontWaitFor } from 'workbox-core/_private/dontWaitFor.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { CacheTimestampsModel } from './models/CacheTimestampsModel.js';\nimport './_version.js';\n/**\n * The `CacheExpiration` class allows you define an expiration and / or\n * limit on the number of responses stored in a\n * [`Cache`](https://developer.mozilla.org/en-US/docs/Web/API/Cache).\n *\n * @memberof workbox-expiration\n */\nclass CacheExpiration {\n    /**\n     * To construct a new CacheExpiration instance you must provide at least\n     * one of the `config` properties.\n     *\n     * @param {string} cacheName Name of the cache to apply restrictions to.\n     * @param {Object} config\n     * @param {number} [config.maxEntries] The maximum number of entries to cache.\n     * Entries used the least will be removed as the maximum is reached.\n     * @param {number} [config.maxAgeSeconds] The maximum age of an entry before\n     * it's treated as stale and removed.\n     * @param {Object} [config.matchOptions] The [`CacheQueryOptions`](https://developer.mozilla.org/en-US/docs/Web/API/Cache/delete#Parameters)\n     * that will be used when calling `delete()` on the cache.\n     */\n    constructor(cacheName, config = {}) {\n        this._isRunning = false;\n        this._rerunRequested = false;\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isType(cacheName, 'string', {\n                moduleName: 'workbox-expiration',\n                className: 'CacheExpiration',\n                funcName: 'constructor',\n                paramName: 'cacheName',\n            });\n            if (!(config.maxEntries || config.maxAgeSeconds)) {\n                throw new WorkboxError('max-entries-or-age-required', {\n                    moduleName: 'workbox-expiration',\n                    className: 'CacheExpiration',\n                    funcName: 'constructor',\n                });\n            }\n            if (config.maxEntries) {\n                assert.isType(config.maxEntries, 'number', {\n                    moduleName: 'workbox-expiration',\n                    className: 'CacheExpiration',\n                    funcName: 'constructor',\n                    paramName: 'config.maxEntries',\n                });\n            }\n            if (config.maxAgeSeconds) {\n                assert.isType(config.maxAgeSeconds, 'number', {\n                    moduleName: 'workbox-expiration',\n                    className: 'CacheExpiration',\n                    funcName: 'constructor',\n                    paramName: 'config.maxAgeSeconds',\n                });\n            }\n        }\n        this._maxEntries = config.maxEntries;\n        this._maxAgeSeconds = config.maxAgeSeconds;\n        this._matchOptions = config.matchOptions;\n        this._cacheName = cacheName;\n        this._timestampModel = new CacheTimestampsModel(cacheName);\n    }\n    /**\n     * Expires entries for the given cache and given criteria.\n     */\n    async expireEntries() {\n        if (this._isRunning) {\n            this._rerunRequested = true;\n            return;\n        }\n        this._isRunning = true;\n        const minTimestamp = this._maxAgeSeconds\n            ? Date.now() - this._maxAgeSeconds * 1000\n            : 0;\n        const urlsExpired = await this._timestampModel.expireEntries(minTimestamp, this._maxEntries);\n        // Delete URLs from the cache\n        const cache = await self.caches.open(this._cacheName);\n        for (const url of urlsExpired) {\n            await cache.delete(url, this._matchOptions);\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (urlsExpired.length > 0) {\n                logger.groupCollapsed(`Expired ${urlsExpired.length} ` +\n                    `${urlsExpired.length === 1 ? 'entry' : 'entries'} and removed ` +\n                    `${urlsExpired.length === 1 ? 'it' : 'them'} from the ` +\n                    `'${this._cacheName}' cache.`);\n                logger.log(`Expired the following ${urlsExpired.length === 1 ? 'URL' : 'URLs'}:`);\n                urlsExpired.forEach((url) => logger.log(`    ${url}`));\n                logger.groupEnd();\n            }\n            else {\n                logger.debug(`Cache expiration ran and found no entries to remove.`);\n            }\n        }\n        this._isRunning = false;\n        if (this._rerunRequested) {\n            this._rerunRequested = false;\n            dontWaitFor(this.expireEntries());\n        }\n    }\n    /**\n     * Update the timestamp for the given URL. This ensures the when\n     * removing entries based on maximum entries, most recently used\n     * is accurate or when expiring, the timestamp is up-to-date.\n     *\n     * @param {string} url\n     */\n    async updateTimestamp(url) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isType(url, 'string', {\n                moduleName: 'workbox-expiration',\n                className: 'CacheExpiration',\n                funcName: 'updateTimestamp',\n                paramName: 'url',\n            });\n        }\n        await this._timestampModel.setTimestamp(url, Date.now());\n    }\n    /**\n     * Can be used to check if a URL has expired or not before it's used.\n     *\n     * This requires a look up from IndexedDB, so can be slow.\n     *\n     * Note: This method will not remove the cached entry, call\n     * `expireEntries()` to remove indexedDB and Cache entries.\n     *\n     * @param {string} url\n     * @return {boolean}\n     */\n    async isURLExpired(url) {\n        if (!this._maxAgeSeconds) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new WorkboxError(`expired-test-without-max-age`, {\n                    methodName: 'isURLExpired',\n                    paramName: 'maxAgeSeconds',\n                });\n            }\n            return false;\n        }\n        else {\n            const timestamp = await this._timestampModel.getTimestamp(url);\n            const expireOlderThan = Date.now() - this._maxAgeSeconds * 1000;\n            return timestamp !== undefined ? timestamp < expireOlderThan : true;\n        }\n    }\n    /**\n     * Removes the IndexedDB object store used to keep track of cache expiration\n     * metadata.\n     */\n    async delete() {\n        // Make sure we don't attempt another rerun if we're called in the middle of\n        // a cache expiration.\n        this._rerunRequested = false;\n        await this._timestampModel.expireEntries(Infinity); // Expires all.\n    }\n}\nexport { CacheExpiration };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { cacheNames } from 'workbox-core/_private/cacheNames.js';\nimport { dontWaitFor } from 'workbox-core/_private/dontWaitFor.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { registerQuotaErrorCallback } from 'workbox-core/registerQuotaErrorCallback.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { CacheExpiration } from './CacheExpiration.js';\nimport './_version.js';\n/**\n * This plugin can be used in a `workbox-strategy` to regularly enforce a\n * limit on the age and / or the number of cached requests.\n *\n * It can only be used with `workbox-strategy` instances that have a\n * [custom `cacheName` property set](/web/tools/workbox/guides/configure-workbox#custom_cache_names_in_strategies).\n * In other words, it can't be used to expire entries in strategy that uses the\n * default runtime cache name.\n *\n * Whenever a cached response is used or updated, this plugin will look\n * at the associated cache and remove any old or extra responses.\n *\n * When using `maxAgeSeconds`, responses may be used *once* after expiring\n * because the expiration clean up will not have occurred until *after* the\n * cached response has been used. If the response has a \"Date\" header, then\n * a light weight expiration check is performed and the response will not be\n * used immediately.\n *\n * When using `maxEntries`, the entry least-recently requested will be removed\n * from the cache first.\n *\n * @memberof workbox-expiration\n */\nclass ExpirationPlugin {\n    /**\n     * @param {ExpirationPluginOptions} config\n     * @param {number} [config.maxEntries] The maximum number of entries to cache.\n     * Entries used the least will be removed as the maximum is reached.\n     * @param {number} [config.maxAgeSeconds] The maximum age of an entry before\n     * it's treated as stale and removed.\n     * @param {Object} [config.matchOptions] The [`CacheQueryOptions`](https://developer.mozilla.org/en-US/docs/Web/API/Cache/delete#Parameters)\n     * that will be used when calling `delete()` on the cache.\n     * @param {boolean} [config.purgeOnQuotaError] Whether to opt this cache in to\n     * automatic deletion if the available storage quota has been exceeded.\n     */\n    constructor(config = {}) {\n        /**\n         * A \"lifecycle\" callback that will be triggered automatically by the\n         * `workbox-strategies` handlers when a `Response` is about to be returned\n         * from a [Cache](https://developer.mozilla.org/en-US/docs/Web/API/Cache) to\n         * the handler. It allows the `Response` to be inspected for freshness and\n         * prevents it from being used if the `Response`'s `Date` header value is\n         * older than the configured `maxAgeSeconds`.\n         *\n         * @param {Object} options\n         * @param {string} options.cacheName Name of the cache the response is in.\n         * @param {Response} options.cachedResponse The `Response` object that's been\n         *     read from a cache and whose freshness should be checked.\n         * @return {Response} Either the `cachedResponse`, if it's\n         *     fresh, or `null` if the `Response` is older than `maxAgeSeconds`.\n         *\n         * @private\n         */\n        this.cachedResponseWillBeUsed = async ({ event, request, cacheName, cachedResponse, }) => {\n            if (!cachedResponse) {\n                return null;\n            }\n            const isFresh = this._isResponseDateFresh(cachedResponse);\n            // Expire entries to ensure that even if the expiration date has\n            // expired, it'll only be used once.\n            const cacheExpiration = this._getCacheExpiration(cacheName);\n            dontWaitFor(cacheExpiration.expireEntries());\n            // Update the metadata for the request URL to the current timestamp,\n            // but don't `await` it as we don't want to block the response.\n            const updateTimestampDone = cacheExpiration.updateTimestamp(request.url);\n            if (event) {\n                try {\n                    event.waitUntil(updateTimestampDone);\n                }\n                catch (error) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        // The event may not be a fetch event; only log the URL if it is.\n                        if ('request' in event) {\n                            logger.warn(`Unable to ensure service worker stays alive when ` +\n                                `updating cache entry for ` +\n                                `'${getFriendlyURL(event.request.url)}'.`);\n                        }\n                    }\n                }\n            }\n            return isFresh ? cachedResponse : null;\n        };\n        /**\n         * A \"lifecycle\" callback that will be triggered automatically by the\n         * `workbox-strategies` handlers when an entry is added to a cache.\n         *\n         * @param {Object} options\n         * @param {string} options.cacheName Name of the cache that was updated.\n         * @param {string} options.request The Request for the cached entry.\n         *\n         * @private\n         */\n        this.cacheDidUpdate = async ({ cacheName, request, }) => {\n            if (process.env.NODE_ENV !== 'production') {\n                assert.isType(cacheName, 'string', {\n                    moduleName: 'workbox-expiration',\n                    className: 'Plugin',\n                    funcName: 'cacheDidUpdate',\n                    paramName: 'cacheName',\n                });\n                assert.isInstance(request, Request, {\n                    moduleName: 'workbox-expiration',\n                    className: 'Plugin',\n                    funcName: 'cacheDidUpdate',\n                    paramName: 'request',\n                });\n            }\n            const cacheExpiration = this._getCacheExpiration(cacheName);\n            await cacheExpiration.updateTimestamp(request.url);\n            await cacheExpiration.expireEntries();\n        };\n        if (process.env.NODE_ENV !== 'production') {\n            if (!(config.maxEntries || config.maxAgeSeconds)) {\n                throw new WorkboxError('max-entries-or-age-required', {\n                    moduleName: 'workbox-expiration',\n                    className: 'Plugin',\n                    funcName: 'constructor',\n                });\n            }\n            if (config.maxEntries) {\n                assert.isType(config.maxEntries, 'number', {\n                    moduleName: 'workbox-expiration',\n                    className: 'Plugin',\n                    funcName: 'constructor',\n                    paramName: 'config.maxEntries',\n                });\n            }\n            if (config.maxAgeSeconds) {\n                assert.isType(config.maxAgeSeconds, 'number', {\n                    moduleName: 'workbox-expiration',\n                    className: 'Plugin',\n                    funcName: 'constructor',\n                    paramName: 'config.maxAgeSeconds',\n                });\n            }\n        }\n        this._config = config;\n        this._maxAgeSeconds = config.maxAgeSeconds;\n        this._cacheExpirations = new Map();\n        if (config.purgeOnQuotaError) {\n            registerQuotaErrorCallback(() => this.deleteCacheAndMetadata());\n        }\n    }\n    /**\n     * A simple helper method to return a CacheExpiration instance for a given\n     * cache name.\n     *\n     * @param {string} cacheName\n     * @return {CacheExpiration}\n     *\n     * @private\n     */\n    _getCacheExpiration(cacheName) {\n        if (cacheName === cacheNames.getRuntimeName()) {\n            throw new WorkboxError('expire-custom-caches-only');\n        }\n        let cacheExpiration = this._cacheExpirations.get(cacheName);\n        if (!cacheExpiration) {\n            cacheExpiration = new CacheExpiration(cacheName, this._config);\n            this._cacheExpirations.set(cacheName, cacheExpiration);\n        }\n        return cacheExpiration;\n    }\n    /**\n     * @param {Response} cachedResponse\n     * @return {boolean}\n     *\n     * @private\n     */\n    _isResponseDateFresh(cachedResponse) {\n        if (!this._maxAgeSeconds) {\n            // We aren't expiring by age, so return true, it's fresh\n            return true;\n        }\n        // Check if the 'date' header will suffice a quick expiration check.\n        // See https://github.com/GoogleChromeLabs/sw-toolbox/issues/164 for\n        // discussion.\n        const dateHeaderTimestamp = this._getDateHeaderTimestamp(cachedResponse);\n        if (dateHeaderTimestamp === null) {\n            // Unable to parse date, so assume it's fresh.\n            return true;\n        }\n        // If we have a valid headerTime, then our response is fresh iff the\n        // headerTime plus maxAgeSeconds is greater than the current time.\n        const now = Date.now();\n        return dateHeaderTimestamp >= now - this._maxAgeSeconds * 1000;\n    }\n    /**\n     * This method will extract the data header and parse it into a useful\n     * value.\n     *\n     * @param {Response} cachedResponse\n     * @return {number|null}\n     *\n     * @private\n     */\n    _getDateHeaderTimestamp(cachedResponse) {\n        if (!cachedResponse.headers.has('date')) {\n            return null;\n        }\n        const dateHeader = cachedResponse.headers.get('date');\n        const parsedDate = new Date(dateHeader);\n        const headerTime = parsedDate.getTime();\n        // If the Date header was invalid for some reason, parsedDate.getTime()\n        // will return NaN.\n        if (isNaN(headerTime)) {\n            return null;\n        }\n        return headerTime;\n    }\n    /**\n     * This is a helper method that performs two operations:\n     *\n     * - Deletes *all* the underlying Cache instances associated with this plugin\n     * instance, by calling caches.delete() on your behalf.\n     * - Deletes the metadata from IndexedDB used to keep track of expiration\n     * details for each Cache instance.\n     *\n     * When using cache expiration, calling this method is preferable to calling\n     * `caches.delete()` directly, since this will ensure that the IndexedDB\n     * metadata is also cleanly removed and open IndexedDB instances are deleted.\n     *\n     * Note that if you're *not* using cache expiration for a given cache, calling\n     * `caches.delete()` and passing in the cache's name should be sufficient.\n     * There is no Workbox-specific method needed for cleanup in that case.\n     */\n    async deleteCacheAndMetadata() {\n        // Do this one at a time instead of all at once via `Promise.all()` to\n        // reduce the chance of inconsistency if a promise rejects.\n        for (const [cacheName, cacheExpiration] of this._cacheExpirations) {\n            await self.caches.delete(cacheName);\n            await cacheExpiration.delete();\n        }\n        // Reset this._cacheExpirations to its initial state.\n        this._cacheExpirations = new Map();\n    }\n}\nexport { ExpirationPlugin };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { logger } from './_private/logger.js';\nimport { assert } from './_private/assert.js';\nimport { quotaErrorCallbacks } from './models/quotaErrorCallbacks.js';\nimport './_version.js';\n/**\n * Adds a function to the set of quotaErrorCallbacks that will be executed if\n * there's a quota error.\n *\n * @param {Function} callback\n * @memberof workbox-core\n */\n// Can't change Function type\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction registerQuotaErrorCallback(callback) {\n    if (process.env.NODE_ENV !== 'production') {\n        assert.isType(callback, 'function', {\n            moduleName: 'workbox-core',\n            funcName: 'register',\n            paramName: 'callback',\n        });\n    }\n    quotaErrorCallbacks.add(callback);\n    if (process.env.NODE_ENV !== 'production') {\n        logger.log('Registered a callback to respond to quota errors.', callback);\n    }\n}\nexport { registerQuotaErrorCallback };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport '../_version.js';\n// Name of the search parameter used to store revision info.\nconst REVISION_SEARCH_PARAM = '__WB_REVISION__';\n/**\n * Converts a manifest entry into a versioned URL suitable for precaching.\n *\n * @param {Object|string} entry\n * @return {string} A URL with versioning info.\n *\n * @private\n * @memberof workbox-precaching\n */\nexport function createCacheKey(entry) {\n    if (!entry) {\n        throw new WorkboxError('add-to-cache-list-unexpected-type', { entry });\n    }\n    // If a precache manifest entry is a string, it's assumed to be a versioned\n    // URL, like '/app.abcd1234.js'. Return as-is.\n    if (typeof entry === 'string') {\n        const urlObject = new URL(entry, location.href);\n        return {\n            cacheKey: urlObject.href,\n            url: urlObject.href,\n        };\n    }\n    const { revision, url } = entry;\n    if (!url) {\n        throw new WorkboxError('add-to-cache-list-unexpected-type', { entry });\n    }\n    // If there's just a URL and no revision, then it's also assumed to be a\n    // versioned URL.\n    if (!revision) {\n        const urlObject = new URL(url, location.href);\n        return {\n            cacheKey: urlObject.href,\n            url: urlObject.href,\n        };\n    }\n    // Otherwise, construct a properly versioned URL using the custom Workbox\n    // search parameter along with the revision info.\n    const cacheKeyURL = new URL(url, location.href);\n    const originalURL = new URL(url, location.href);\n    cacheKeyURL.searchParams.set(REVISION_SEARCH_PARAM, revision);\n    return {\n        cacheKey: cacheKeyURL.href,\n        url: originalURL.href,\n    };\n}\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * A plugin, designed to be used with PrecacheController, to determine the\n * of assets that were updated (or not updated) during the install event.\n *\n * @private\n */\nclass PrecacheInstallReportPlugin {\n    constructor() {\n        this.updatedURLs = [];\n        this.notUpdatedURLs = [];\n        this.handlerWillStart = async ({ request, state, }) => {\n            // TODO: `state` should never be undefined...\n            if (state) {\n                state.originalRequest = request;\n            }\n        };\n        this.cachedResponseWillBeUsed = async ({ event, state, cachedResponse, }) => {\n            if (event.type === 'install') {\n                if (state &&\n                    state.originalRequest &&\n                    state.originalRequest instanceof Request) {\n                    // TODO: `state` should never be undefined...\n                    const url = state.originalRequest.url;\n                    if (cachedResponse) {\n                        this.notUpdatedURLs.push(url);\n                    }\n                    else {\n                        this.updatedURLs.push(url);\n                    }\n                }\n            }\n            return cachedResponse;\n        };\n    }\n}\nexport { PrecacheInstallReportPlugin };\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * A plugin, designed to be used with PrecacheController, to translate URLs into\n * the corresponding cache key, based on the current revision info.\n *\n * @private\n */\nclass PrecacheCacheKeyPlugin {\n    constructor({ precacheController }) {\n        this.cacheKeyWillBeUsed = async ({ request, params, }) => {\n            // Params is type any, can't change right now.\n            /* eslint-disable */\n            const cacheKey = (params === null || params === void 0 ? void 0 : params.cacheKey) ||\n                this._precacheController.getCacheKeyForURL(request.url);\n            /* eslint-enable */\n            return cacheKey\n                ? new Request(cacheKey, { headers: request.headers })\n                : request;\n        };\n        this._precacheController = precacheController;\n    }\n}\nexport { PrecacheCacheKeyPlugin };\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { cacheMatchIgnoreParams } from 'workbox-core/_private/cacheMatchIgnoreParams.js';\nimport { Deferred } from 'workbox-core/_private/Deferred.js';\nimport { executeQuotaErrorCallbacks } from 'workbox-core/_private/executeQuotaErrorCallbacks.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { timeout } from 'workbox-core/_private/timeout.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport './_version.js';\nfunction toRequest(input) {\n    return typeof input === 'string' ? new Request(input) : input;\n}\n/**\n * A class created every time a Strategy instance instance calls\n * {@link workbox-strategies.Strategy~handle} or\n * {@link workbox-strategies.Strategy~handleAll} that wraps all fetch and\n * cache actions around plugin callbacks and keeps track of when the strategy\n * is \"done\" (i.e. all added `event.waitUntil()` promises have resolved).\n *\n * @memberof workbox-strategies\n */\nclass StrategyHandler {\n    /**\n     * Creates a new instance associated with the passed strategy and event\n     * that's handling the request.\n     *\n     * The constructor also initializes the state that will be passed to each of\n     * the plugins handling this request.\n     *\n     * @param {workbox-strategies.Strategy} strategy\n     * @param {Object} options\n     * @param {Request|string} options.request A request to run this strategy for.\n     * @param {ExtendableEvent} options.event The event associated with the\n     *     request.\n     * @param {URL} [options.url]\n     * @param {*} [options.params] The return value from the\n     *     {@link workbox-routing~matchCallback} (if applicable).\n     */\n    constructor(strategy, options) {\n        this._cacheKeys = {};\n        /**\n         * The request the strategy is performing (passed to the strategy's\n         * `handle()` or `handleAll()` method).\n         * @name request\n         * @instance\n         * @type {Request}\n         * @memberof workbox-strategies.StrategyHandler\n         */\n        /**\n         * The event associated with this request.\n         * @name event\n         * @instance\n         * @type {ExtendableEvent}\n         * @memberof workbox-strategies.StrategyHandler\n         */\n        /**\n         * A `URL` instance of `request.url` (if passed to the strategy's\n         * `handle()` or `handleAll()` method).\n         * Note: the `url` param will be present if the strategy was invoked\n         * from a workbox `Route` object.\n         * @name url\n         * @instance\n         * @type {URL|undefined}\n         * @memberof workbox-strategies.StrategyHandler\n         */\n        /**\n         * A `param` value (if passed to the strategy's\n         * `handle()` or `handleAll()` method).\n         * Note: the `param` param will be present if the strategy was invoked\n         * from a workbox `Route` object and the\n         * {@link workbox-routing~matchCallback} returned\n         * a truthy value (it will be that value).\n         * @name params\n         * @instance\n         * @type {*|undefined}\n         * @memberof workbox-strategies.StrategyHandler\n         */\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isInstance(options.event, ExtendableEvent, {\n                moduleName: 'workbox-strategies',\n                className: 'StrategyHandler',\n                funcName: 'constructor',\n                paramName: 'options.event',\n            });\n        }\n        Object.assign(this, options);\n        this.event = options.event;\n        this._strategy = strategy;\n        this._handlerDeferred = new Deferred();\n        this._extendLifetimePromises = [];\n        // Copy the plugins list (since it's mutable on the strategy),\n        // so any mutations don't affect this handler instance.\n        this._plugins = [...strategy.plugins];\n        this._pluginStateMap = new Map();\n        for (const plugin of this._plugins) {\n            this._pluginStateMap.set(plugin, {});\n        }\n        this.event.waitUntil(this._handlerDeferred.promise);\n    }\n    /**\n     * Fetches a given request (and invokes any applicable plugin callback\n     * methods) using the `fetchOptions` (for non-navigation requests) and\n     * `plugins` defined on the `Strategy` object.\n     *\n     * The following plugin lifecycle methods are invoked when using this method:\n     * - `requestWillFetch()`\n     * - `fetchDidSucceed()`\n     * - `fetchDidFail()`\n     *\n     * @param {Request|string} input The URL or request to fetch.\n     * @return {Promise<Response>}\n     */\n    async fetch(input) {\n        const { event } = this;\n        let request = toRequest(input);\n        if (request.mode === 'navigate' &&\n            event instanceof FetchEvent &&\n            event.preloadResponse) {\n            const possiblePreloadResponse = (await event.preloadResponse);\n            if (possiblePreloadResponse) {\n                if (process.env.NODE_ENV !== 'production') {\n                    logger.log(`Using a preloaded navigation response for ` +\n                        `'${getFriendlyURL(request.url)}'`);\n                }\n                return possiblePreloadResponse;\n            }\n        }\n        // If there is a fetchDidFail plugin, we need to save a clone of the\n        // original request before it's either modified by a requestWillFetch\n        // plugin or before the original request's body is consumed via fetch().\n        const originalRequest = this.hasCallback('fetchDidFail')\n            ? request.clone()\n            : null;\n        try {\n            for (const cb of this.iterateCallbacks('requestWillFetch')) {\n                request = await cb({ request: request.clone(), event });\n            }\n        }\n        catch (err) {\n            if (err instanceof Error) {\n                throw new WorkboxError('plugin-error-request-will-fetch', {\n                    thrownErrorMessage: err.message,\n                });\n            }\n        }\n        // The request can be altered by plugins with `requestWillFetch` making\n        // the original request (most likely from a `fetch` event) different\n        // from the Request we make. Pass both to `fetchDidFail` to aid debugging.\n        const pluginFilteredRequest = request.clone();\n        try {\n            let fetchResponse;\n            // See https://github.com/GoogleChrome/workbox/issues/1796\n            fetchResponse = await fetch(request, request.mode === 'navigate' ? undefined : this._strategy.fetchOptions);\n            if (process.env.NODE_ENV !== 'production') {\n                logger.debug(`Network request for ` +\n                    `'${getFriendlyURL(request.url)}' returned a response with ` +\n                    `status '${fetchResponse.status}'.`);\n            }\n            for (const callback of this.iterateCallbacks('fetchDidSucceed')) {\n                fetchResponse = await callback({\n                    event,\n                    request: pluginFilteredRequest,\n                    response: fetchResponse,\n                });\n            }\n            return fetchResponse;\n        }\n        catch (error) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.log(`Network request for ` +\n                    `'${getFriendlyURL(request.url)}' threw an error.`, error);\n            }\n            // `originalRequest` will only exist if a `fetchDidFail` callback\n            // is being used (see above).\n            if (originalRequest) {\n                await this.runCallbacks('fetchDidFail', {\n                    error: error,\n                    event,\n                    originalRequest: originalRequest.clone(),\n                    request: pluginFilteredRequest.clone(),\n                });\n            }\n            throw error;\n        }\n    }\n    /**\n     * Calls `this.fetch()` and (in the background) runs `this.cachePut()` on\n     * the response generated by `this.fetch()`.\n     *\n     * The call to `this.cachePut()` automatically invokes `this.waitUntil()`,\n     * so you do not have to manually call `waitUntil()` on the event.\n     *\n     * @param {Request|string} input The request or URL to fetch and cache.\n     * @return {Promise<Response>}\n     */\n    async fetchAndCachePut(input) {\n        const response = await this.fetch(input);\n        const responseClone = response.clone();\n        void this.waitUntil(this.cachePut(input, responseClone));\n        return response;\n    }\n    /**\n     * Matches a request from the cache (and invokes any applicable plugin\n     * callback methods) using the `cacheName`, `matchOptions`, and `plugins`\n     * defined on the strategy object.\n     *\n     * The following plugin lifecycle methods are invoked when using this method:\n     * - cacheKeyWillByUsed()\n     * - cachedResponseWillByUsed()\n     *\n     * @param {Request|string} key The Request or URL to use as the cache key.\n     * @return {Promise<Response|undefined>} A matching response, if found.\n     */\n    async cacheMatch(key) {\n        const request = toRequest(key);\n        let cachedResponse;\n        const { cacheName, matchOptions } = this._strategy;\n        const effectiveRequest = await this.getCacheKey(request, 'read');\n        const multiMatchOptions = Object.assign(Object.assign({}, matchOptions), { cacheName });\n        cachedResponse = await caches.match(effectiveRequest, multiMatchOptions);\n        if (process.env.NODE_ENV !== 'production') {\n            if (cachedResponse) {\n                logger.debug(`Found a cached response in '${cacheName}'.`);\n            }\n            else {\n                logger.debug(`No cached response found in '${cacheName}'.`);\n            }\n        }\n        for (const callback of this.iterateCallbacks('cachedResponseWillBeUsed')) {\n            cachedResponse =\n                (await callback({\n                    cacheName,\n                    matchOptions,\n                    cachedResponse,\n                    request: effectiveRequest,\n                    event: this.event,\n                })) || undefined;\n        }\n        return cachedResponse;\n    }\n    /**\n     * Puts a request/response pair in the cache (and invokes any applicable\n     * plugin callback methods) using the `cacheName` and `plugins` defined on\n     * the strategy object.\n     *\n     * The following plugin lifecycle methods are invoked when using this method:\n     * - cacheKeyWillByUsed()\n     * - cacheWillUpdate()\n     * - cacheDidUpdate()\n     *\n     * @param {Request|string} key The request or URL to use as the cache key.\n     * @param {Response} response The response to cache.\n     * @return {Promise<boolean>} `false` if a cacheWillUpdate caused the response\n     * not be cached, and `true` otherwise.\n     */\n    async cachePut(key, response) {\n        const request = toRequest(key);\n        // Run in the next task to avoid blocking other cache reads.\n        // https://github.com/w3c/ServiceWorker/issues/1397\n        await timeout(0);\n        const effectiveRequest = await this.getCacheKey(request, 'write');\n        if (process.env.NODE_ENV !== 'production') {\n            if (effectiveRequest.method && effectiveRequest.method !== 'GET') {\n                throw new WorkboxError('attempt-to-cache-non-get-request', {\n                    url: getFriendlyURL(effectiveRequest.url),\n                    method: effectiveRequest.method,\n                });\n            }\n            // See https://github.com/GoogleChrome/workbox/issues/2818\n            const vary = response.headers.get('Vary');\n            if (vary) {\n                logger.debug(`The response for ${getFriendlyURL(effectiveRequest.url)} ` +\n                    `has a 'Vary: ${vary}' header. ` +\n                    `Consider setting the {ignoreVary: true} option on your strategy ` +\n                    `to ensure cache matching and deletion works as expected.`);\n            }\n        }\n        if (!response) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.error(`Cannot cache non-existent response for ` +\n                    `'${getFriendlyURL(effectiveRequest.url)}'.`);\n            }\n            throw new WorkboxError('cache-put-with-no-response', {\n                url: getFriendlyURL(effectiveRequest.url),\n            });\n        }\n        const responseToCache = await this._ensureResponseSafeToCache(response);\n        if (!responseToCache) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.debug(`Response '${getFriendlyURL(effectiveRequest.url)}' ` +\n                    `will not be cached.`, responseToCache);\n            }\n            return false;\n        }\n        const { cacheName, matchOptions } = this._strategy;\n        const cache = await self.caches.open(cacheName);\n        const hasCacheUpdateCallback = this.hasCallback('cacheDidUpdate');\n        const oldResponse = hasCacheUpdateCallback\n            ? await cacheMatchIgnoreParams(\n            // TODO(philipwalton): the `__WB_REVISION__` param is a precaching\n            // feature. Consider into ways to only add this behavior if using\n            // precaching.\n            cache, effectiveRequest.clone(), ['__WB_REVISION__'], matchOptions)\n            : null;\n        if (process.env.NODE_ENV !== 'production') {\n            logger.debug(`Updating the '${cacheName}' cache with a new Response ` +\n                `for ${getFriendlyURL(effectiveRequest.url)}.`);\n        }\n        try {\n            await cache.put(effectiveRequest, hasCacheUpdateCallback ? responseToCache.clone() : responseToCache);\n        }\n        catch (error) {\n            if (error instanceof Error) {\n                // See https://developer.mozilla.org/en-US/docs/Web/API/DOMException#exception-QuotaExceededError\n                if (error.name === 'QuotaExceededError') {\n                    await executeQuotaErrorCallbacks();\n                }\n                throw error;\n            }\n        }\n        for (const callback of this.iterateCallbacks('cacheDidUpdate')) {\n            await callback({\n                cacheName,\n                oldResponse,\n                newResponse: responseToCache.clone(),\n                request: effectiveRequest,\n                event: this.event,\n            });\n        }\n        return true;\n    }\n    /**\n     * Checks the list of plugins for the `cacheKeyWillBeUsed` callback, and\n     * executes any of those callbacks found in sequence. The final `Request`\n     * object returned by the last plugin is treated as the cache key for cache\n     * reads and/or writes. If no `cacheKeyWillBeUsed` plugin callbacks have\n     * been registered, the passed request is returned unmodified\n     *\n     * @param {Request} request\n     * @param {string} mode\n     * @return {Promise<Request>}\n     */\n    async getCacheKey(request, mode) {\n        const key = `${request.url} | ${mode}`;\n        if (!this._cacheKeys[key]) {\n            let effectiveRequest = request;\n            for (const callback of this.iterateCallbacks('cacheKeyWillBeUsed')) {\n                effectiveRequest = toRequest(await callback({\n                    mode,\n                    request: effectiveRequest,\n                    event: this.event,\n                    // params has a type any can't change right now.\n                    params: this.params, // eslint-disable-line\n                }));\n            }\n            this._cacheKeys[key] = effectiveRequest;\n        }\n        return this._cacheKeys[key];\n    }\n    /**\n     * Returns true if the strategy has at least one plugin with the given\n     * callback.\n     *\n     * @param {string} name The name of the callback to check for.\n     * @return {boolean}\n     */\n    hasCallback(name) {\n        for (const plugin of this._strategy.plugins) {\n            if (name in plugin) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Runs all plugin callbacks matching the given name, in order, passing the\n     * given param object (merged ith the current plugin state) as the only\n     * argument.\n     *\n     * Note: since this method runs all plugins, it's not suitable for cases\n     * where the return value of a callback needs to be applied prior to calling\n     * the next callback. See\n     * {@link workbox-strategies.StrategyHandler#iterateCallbacks}\n     * below for how to handle that case.\n     *\n     * @param {string} name The name of the callback to run within each plugin.\n     * @param {Object} param The object to pass as the first (and only) param\n     *     when executing each callback. This object will be merged with the\n     *     current plugin state prior to callback execution.\n     */\n    async runCallbacks(name, param) {\n        for (const callback of this.iterateCallbacks(name)) {\n            // TODO(philipwalton): not sure why `any` is needed. It seems like\n            // this should work with `as WorkboxPluginCallbackParam[C]`.\n            await callback(param);\n        }\n    }\n    /**\n     * Accepts a callback and returns an iterable of matching plugin callbacks,\n     * where each callback is wrapped with the current handler state (i.e. when\n     * you call each callback, whatever object parameter you pass it will\n     * be merged with the plugin's current state).\n     *\n     * @param {string} name The name fo the callback to run\n     * @return {Array<Function>}\n     */\n    *iterateCallbacks(name) {\n        for (const plugin of this._strategy.plugins) {\n            if (typeof plugin[name] === 'function') {\n                const state = this._pluginStateMap.get(plugin);\n                const statefulCallback = (param) => {\n                    const statefulParam = Object.assign(Object.assign({}, param), { state });\n                    // TODO(philipwalton): not sure why `any` is needed. It seems like\n                    // this should work with `as WorkboxPluginCallbackParam[C]`.\n                    return plugin[name](statefulParam);\n                };\n                yield statefulCallback;\n            }\n        }\n    }\n    /**\n     * Adds a promise to the\n     * [extend lifetime promises]{@link https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises}\n     * of the event event associated with the request being handled (usually a\n     * `FetchEvent`).\n     *\n     * Note: you can await\n     * {@link workbox-strategies.StrategyHandler~doneWaiting}\n     * to know when all added promises have settled.\n     *\n     * @param {Promise} promise A promise to add to the extend lifetime promises\n     *     of the event that triggered the request.\n     */\n    waitUntil(promise) {\n        this._extendLifetimePromises.push(promise);\n        return promise;\n    }\n    /**\n     * Returns a promise that resolves once all promises passed to\n     * {@link workbox-strategies.StrategyHandler~waitUntil}\n     * have settled.\n     *\n     * Note: any work done after `doneWaiting()` settles should be manually\n     * passed to an event's `waitUntil()` method (not this handler's\n     * `waitUntil()` method), otherwise the service worker thread my be killed\n     * prior to your work completing.\n     */\n    async doneWaiting() {\n        let promise;\n        while ((promise = this._extendLifetimePromises.shift())) {\n            await promise;\n        }\n    }\n    /**\n     * Stops running the strategy and immediately resolves any pending\n     * `waitUntil()` promises.\n     */\n    destroy() {\n        this._handlerDeferred.resolve(null);\n    }\n    /**\n     * This method will call cacheWillUpdate on the available plugins (or use\n     * status === 200) to determine if the Response is safe and valid to cache.\n     *\n     * @param {Request} options.request\n     * @param {Response} options.response\n     * @return {Promise<Response|undefined>}\n     *\n     * @private\n     */\n    async _ensureResponseSafeToCache(response) {\n        let responseToCache = response;\n        let pluginsUsed = false;\n        for (const callback of this.iterateCallbacks('cacheWillUpdate')) {\n            responseToCache =\n                (await callback({\n                    request: this.request,\n                    response: responseToCache,\n                    event: this.event,\n                })) || undefined;\n            pluginsUsed = true;\n            if (!responseToCache) {\n                break;\n            }\n        }\n        if (!pluginsUsed) {\n            if (responseToCache && responseToCache.status !== 200) {\n                responseToCache = undefined;\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (responseToCache) {\n                    if (responseToCache.status !== 200) {\n                        if (responseToCache.status === 0) {\n                            logger.warn(`The response for '${this.request.url}' ` +\n                                `is an opaque response. The caching strategy that you're ` +\n                                `using will not cache opaque responses by default.`);\n                        }\n                        else {\n                            logger.debug(`The response for '${this.request.url}' ` +\n                                `returned a status code of '${response.status}' and won't ` +\n                                `be cached as a result.`);\n                        }\n                    }\n                }\n            }\n        }\n        return responseToCache;\n    }\n}\nexport { StrategyHandler };\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { cacheNames } from 'workbox-core/_private/cacheNames.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { StrategyHandler } from './StrategyHandler.js';\nimport './_version.js';\n/**\n * An abstract base class that all other strategy classes must extend from:\n *\n * @memberof workbox-strategies\n */\nclass Strategy {\n    /**\n     * Creates a new instance of the strategy and sets all documented option\n     * properties as public instance properties.\n     *\n     * Note: if a custom strategy class extends the base Strategy class and does\n     * not need more than these properties, it does not need to define its own\n     * constructor.\n     *\n     * @param {Object} [options]\n     * @param {string} [options.cacheName] Cache name to store and retrieve\n     * requests. Defaults to the cache names provided by\n     * {@link workbox-core.cacheNames}.\n     * @param {Array<Object>} [options.plugins] [Plugins]{@link https://developers.google.com/web/tools/workbox/guides/using-plugins}\n     * to use in conjunction with this caching strategy.\n     * @param {Object} [options.fetchOptions] Values passed along to the\n     * [`init`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters)\n     * of [non-navigation](https://github.com/GoogleChrome/workbox/issues/1796)\n     * `fetch()` requests made by this strategy.\n     * @param {Object} [options.matchOptions] The\n     * [`CacheQueryOptions`]{@link https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions}\n     * for any `cache.match()` or `cache.put()` calls made by this strategy.\n     */\n    constructor(options = {}) {\n        /**\n         * Cache name to store and retrieve\n         * requests. Defaults to the cache names provided by\n         * {@link workbox-core.cacheNames}.\n         *\n         * @type {string}\n         */\n        this.cacheName = cacheNames.getRuntimeName(options.cacheName);\n        /**\n         * The list\n         * [Plugins]{@link https://developers.google.com/web/tools/workbox/guides/using-plugins}\n         * used by this strategy.\n         *\n         * @type {Array<Object>}\n         */\n        this.plugins = options.plugins || [];\n        /**\n         * Values passed along to the\n         * [`init`]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters}\n         * of all fetch() requests made by this strategy.\n         *\n         * @type {Object}\n         */\n        this.fetchOptions = options.fetchOptions;\n        /**\n         * The\n         * [`CacheQueryOptions`]{@link https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions}\n         * for any `cache.match()` or `cache.put()` calls made by this strategy.\n         *\n         * @type {Object}\n         */\n        this.matchOptions = options.matchOptions;\n    }\n    /**\n     * Perform a request strategy and returns a `Promise` that will resolve with\n     * a `Response`, invoking all relevant plugin callbacks.\n     *\n     * When a strategy instance is registered with a Workbox\n     * {@link workbox-routing.Route}, this method is automatically\n     * called when the route matches.\n     *\n     * Alternatively, this method can be used in a standalone `FetchEvent`\n     * listener by passing it to `event.respondWith()`.\n     *\n     * @param {FetchEvent|Object} options A `FetchEvent` or an object with the\n     *     properties listed below.\n     * @param {Request|string} options.request A request to run this strategy for.\n     * @param {ExtendableEvent} options.event The event associated with the\n     *     request.\n     * @param {URL} [options.url]\n     * @param {*} [options.params]\n     */\n    handle(options) {\n        const [responseDone] = this.handleAll(options);\n        return responseDone;\n    }\n    /**\n     * Similar to {@link workbox-strategies.Strategy~handle}, but\n     * instead of just returning a `Promise` that resolves to a `Response` it\n     * it will return an tuple of `[response, done]` promises, where the former\n     * (`response`) is equivalent to what `handle()` returns, and the latter is a\n     * Promise that will resolve once any promises that were added to\n     * `event.waitUntil()` as part of performing the strategy have completed.\n     *\n     * You can await the `done` promise to ensure any extra work performed by\n     * the strategy (usually caching responses) completes successfully.\n     *\n     * @param {FetchEvent|Object} options A `FetchEvent` or an object with the\n     *     properties listed below.\n     * @param {Request|string} options.request A request to run this strategy for.\n     * @param {ExtendableEvent} options.event The event associated with the\n     *     request.\n     * @param {URL} [options.url]\n     * @param {*} [options.params]\n     * @return {Array<Promise>} A tuple of [response, done]\n     *     promises that can be used to determine when the response resolves as\n     *     well as when the handler has completed all its work.\n     */\n    handleAll(options) {\n        // Allow for flexible options to be passed.\n        if (options instanceof FetchEvent) {\n            options = {\n                event: options,\n                request: options.request,\n            };\n        }\n        const event = options.event;\n        const request = typeof options.request === 'string'\n            ? new Request(options.request)\n            : options.request;\n        const params = 'params' in options ? options.params : undefined;\n        const handler = new StrategyHandler(this, { event, request, params });\n        const responseDone = this._getResponse(handler, request, event);\n        const handlerDone = this._awaitComplete(responseDone, handler, request, event);\n        // Return an array of promises, suitable for use with Promise.all().\n        return [responseDone, handlerDone];\n    }\n    async _getResponse(handler, request, event) {\n        await handler.runCallbacks('handlerWillStart', { event, request });\n        let response = undefined;\n        try {\n            response = await this._handle(request, handler);\n            // The \"official\" Strategy subclasses all throw this error automatically,\n            // but in case a third-party Strategy doesn't, ensure that we have a\n            // consistent failure when there's no response or an error response.\n            if (!response || response.type === 'error') {\n                throw new WorkboxError('no-response', { url: request.url });\n            }\n        }\n        catch (error) {\n            if (error instanceof Error) {\n                for (const callback of handler.iterateCallbacks('handlerDidError')) {\n                    response = await callback({ error, event, request });\n                    if (response) {\n                        break;\n                    }\n                }\n            }\n            if (!response) {\n                throw error;\n            }\n            else if (process.env.NODE_ENV !== 'production') {\n                logger.log(`While responding to '${getFriendlyURL(request.url)}', ` +\n                    `an ${error instanceof Error ? error.toString() : ''} error occurred. Using a fallback response provided by ` +\n                    `a handlerDidError plugin.`);\n            }\n        }\n        for (const callback of handler.iterateCallbacks('handlerWillRespond')) {\n            response = await callback({ event, request, response });\n        }\n        return response;\n    }\n    async _awaitComplete(responseDone, handler, request, event) {\n        let response;\n        let error;\n        try {\n            response = await responseDone;\n        }\n        catch (error) {\n            // Ignore errors, as response errors should be caught via the `response`\n            // promise above. The `done` promise will only throw for errors in\n            // promises passed to `handler.waitUntil()`.\n        }\n        try {\n            await handler.runCallbacks('handlerDidRespond', {\n                event,\n                request,\n                response,\n            });\n            await handler.doneWaiting();\n        }\n        catch (waitUntilError) {\n            if (waitUntilError instanceof Error) {\n                error = waitUntilError;\n            }\n        }\n        await handler.runCallbacks('handlerDidComplete', {\n            event,\n            request,\n            response,\n            error: error,\n        });\n        handler.destroy();\n        if (error) {\n            throw error;\n        }\n    }\n}\nexport { Strategy };\n/**\n * Classes extending the `Strategy` based class should implement this method,\n * and leverage the {@link workbox-strategies.StrategyHandler}\n * arg to perform all fetching and cache logic, which will ensure all relevant\n * cache, cache options, fetch options and plugins are used (per the current\n * strategy instance).\n *\n * @name _handle\n * @instance\n * @abstract\n * @function\n * @param {Request} request\n * @param {workbox-strategies.StrategyHandler} handler\n * @return {Promise<Response>}\n *\n * @memberof workbox-strategies.Strategy\n */\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { copyResponse } from 'workbox-core/copyResponse.js';\nimport { cacheNames } from 'workbox-core/_private/cacheNames.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { Strategy } from 'workbox-strategies/Strategy.js';\nimport './_version.js';\n/**\n * A {@link workbox-strategies.Strategy} implementation\n * specifically designed to work with\n * {@link workbox-precaching.PrecacheController}\n * to both cache and fetch precached assets.\n *\n * Note: an instance of this class is created automatically when creating a\n * `PrecacheController`; it's generally not necessary to create this yourself.\n *\n * @extends workbox-strategies.Strategy\n * @memberof workbox-precaching\n */\nclass PrecacheStrategy extends Strategy {\n    /**\n     *\n     * @param {Object} [options]\n     * @param {string} [options.cacheName] Cache name to store and retrieve\n     * requests. Defaults to the cache names provided by\n     * {@link workbox-core.cacheNames}.\n     * @param {Array<Object>} [options.plugins] {@link https://developers.google.com/web/tools/workbox/guides/using-plugins|Plugins}\n     * to use in conjunction with this caching strategy.\n     * @param {Object} [options.fetchOptions] Values passed along to the\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters|init}\n     * of all fetch() requests made by this strategy.\n     * @param {Object} [options.matchOptions] The\n     * {@link https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions|CacheQueryOptions}\n     * for any `cache.match()` or `cache.put()` calls made by this strategy.\n     * @param {boolean} [options.fallbackToNetwork=true] Whether to attempt to\n     * get the response from the network if there's a precache miss.\n     */\n    constructor(options = {}) {\n        options.cacheName = cacheNames.getPrecacheName(options.cacheName);\n        super(options);\n        this._fallbackToNetwork =\n            options.fallbackToNetwork === false ? false : true;\n        // Redirected responses cannot be used to satisfy a navigation request, so\n        // any redirected response must be \"copied\" rather than cloned, so the new\n        // response doesn't contain the `redirected` flag. See:\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=669363&desc=2#c1\n        this.plugins.push(PrecacheStrategy.copyRedirectedCacheableResponsesPlugin);\n    }\n    /**\n     * @private\n     * @param {Request|string} request A request to run this strategy for.\n     * @param {workbox-strategies.StrategyHandler} handler The event that\n     *     triggered the request.\n     * @return {Promise<Response>}\n     */\n    async _handle(request, handler) {\n        const response = await handler.cacheMatch(request);\n        if (response) {\n            return response;\n        }\n        // If this is an `install` event for an entry that isn't already cached,\n        // then populate the cache.\n        if (handler.event && handler.event.type === 'install') {\n            return await this._handleInstall(request, handler);\n        }\n        // Getting here means something went wrong. An entry that should have been\n        // precached wasn't found in the cache.\n        return await this._handleFetch(request, handler);\n    }\n    async _handleFetch(request, handler) {\n        let response;\n        const params = (handler.params || {});\n        // Fall back to the network if we're configured to do so.\n        if (this._fallbackToNetwork) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.warn(`The precached response for ` +\n                    `${getFriendlyURL(request.url)} in ${this.cacheName} was not ` +\n                    `found. Falling back to the network.`);\n            }\n            const integrityInManifest = params.integrity;\n            const integrityInRequest = request.integrity;\n            const noIntegrityConflict = !integrityInRequest || integrityInRequest === integrityInManifest;\n            // Do not add integrity if the original request is no-cors\n            // See https://github.com/GoogleChrome/workbox/issues/3096\n            response = await handler.fetch(new Request(request, {\n                integrity: request.mode !== 'no-cors'\n                    ? integrityInRequest || integrityInManifest\n                    : undefined,\n            }));\n            // It's only \"safe\" to repair the cache if we're using SRI to guarantee\n            // that the response matches the precache manifest's expectations,\n            // and there's either a) no integrity property in the incoming request\n            // or b) there is an integrity, and it matches the precache manifest.\n            // See https://github.com/GoogleChrome/workbox/issues/2858\n            // Also if the original request users no-cors we don't use integrity.\n            // See https://github.com/GoogleChrome/workbox/issues/3096\n            if (integrityInManifest &&\n                noIntegrityConflict &&\n                request.mode !== 'no-cors') {\n                this._useDefaultCacheabilityPluginIfNeeded();\n                const wasCached = await handler.cachePut(request, response.clone());\n                if (process.env.NODE_ENV !== 'production') {\n                    if (wasCached) {\n                        logger.log(`A response for ${getFriendlyURL(request.url)} ` +\n                            `was used to \"repair\" the precache.`);\n                    }\n                }\n            }\n        }\n        else {\n            // This shouldn't normally happen, but there are edge cases:\n            // https://github.com/GoogleChrome/workbox/issues/1441\n            throw new WorkboxError('missing-precache-entry', {\n                cacheName: this.cacheName,\n                url: request.url,\n            });\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            const cacheKey = params.cacheKey || (await handler.getCacheKey(request, 'read'));\n            // Workbox is going to handle the route.\n            // print the routing details to the console.\n            logger.groupCollapsed(`Precaching is responding to: ` + getFriendlyURL(request.url));\n            logger.log(`Serving the precached url: ${getFriendlyURL(cacheKey instanceof Request ? cacheKey.url : cacheKey)}`);\n            logger.groupCollapsed(`View request details here.`);\n            logger.log(request);\n            logger.groupEnd();\n            logger.groupCollapsed(`View response details here.`);\n            logger.log(response);\n            logger.groupEnd();\n            logger.groupEnd();\n        }\n        return response;\n    }\n    async _handleInstall(request, handler) {\n        this._useDefaultCacheabilityPluginIfNeeded();\n        const response = await handler.fetch(request);\n        // Make sure we defer cachePut() until after we know the response\n        // should be cached; see https://github.com/GoogleChrome/workbox/issues/2737\n        const wasCached = await handler.cachePut(request, response.clone());\n        if (!wasCached) {\n            // Throwing here will lead to the `install` handler failing, which\n            // we want to do if *any* of the responses aren't safe to cache.\n            throw new WorkboxError('bad-precaching-response', {\n                url: request.url,\n                status: response.status,\n            });\n        }\n        return response;\n    }\n    /**\n     * This method is complex, as there a number of things to account for:\n     *\n     * The `plugins` array can be set at construction, and/or it might be added to\n     * to at any time before the strategy is used.\n     *\n     * At the time the strategy is used (i.e. during an `install` event), there\n     * needs to be at least one plugin that implements `cacheWillUpdate` in the\n     * array, other than `copyRedirectedCacheableResponsesPlugin`.\n     *\n     * - If this method is called and there are no suitable `cacheWillUpdate`\n     * plugins, we need to add `defaultPrecacheCacheabilityPlugin`.\n     *\n     * - If this method is called and there is exactly one `cacheWillUpdate`, then\n     * we don't have to do anything (this might be a previously added\n     * `defaultPrecacheCacheabilityPlugin`, or it might be a custom plugin).\n     *\n     * - If this method is called and there is more than one `cacheWillUpdate`,\n     * then we need to check if one is `defaultPrecacheCacheabilityPlugin`. If so,\n     * we need to remove it. (This situation is unlikely, but it could happen if\n     * the strategy is used multiple times, the first without a `cacheWillUpdate`,\n     * and then later on after manually adding a custom `cacheWillUpdate`.)\n     *\n     * See https://github.com/GoogleChrome/workbox/issues/2737 for more context.\n     *\n     * @private\n     */\n    _useDefaultCacheabilityPluginIfNeeded() {\n        let defaultPluginIndex = null;\n        let cacheWillUpdatePluginCount = 0;\n        for (const [index, plugin] of this.plugins.entries()) {\n            // Ignore the copy redirected plugin when determining what to do.\n            if (plugin === PrecacheStrategy.copyRedirectedCacheableResponsesPlugin) {\n                continue;\n            }\n            // Save the default plugin's index, in case it needs to be removed.\n            if (plugin === PrecacheStrategy.defaultPrecacheCacheabilityPlugin) {\n                defaultPluginIndex = index;\n            }\n            if (plugin.cacheWillUpdate) {\n                cacheWillUpdatePluginCount++;\n            }\n        }\n        if (cacheWillUpdatePluginCount === 0) {\n            this.plugins.push(PrecacheStrategy.defaultPrecacheCacheabilityPlugin);\n        }\n        else if (cacheWillUpdatePluginCount > 1 && defaultPluginIndex !== null) {\n            // Only remove the default plugin; multiple custom plugins are allowed.\n            this.plugins.splice(defaultPluginIndex, 1);\n        }\n        // Nothing needs to be done if cacheWillUpdatePluginCount is 1\n    }\n}\nPrecacheStrategy.defaultPrecacheCacheabilityPlugin = {\n    async cacheWillUpdate({ response }) {\n        if (!response || response.status >= 400) {\n            return null;\n        }\n        return response;\n    },\n};\nPrecacheStrategy.copyRedirectedCacheableResponsesPlugin = {\n    async cacheWillUpdate({ response }) {\n        return response.redirected ? await copyResponse(response) : response;\n    },\n};\nexport { PrecacheStrategy };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { cacheNames } from 'workbox-core/_private/cacheNames.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { waitUntil } from 'workbox-core/_private/waitUntil.js';\nimport { createCacheKey } from './utils/createCacheKey.js';\nimport { PrecacheInstallReportPlugin } from './utils/PrecacheInstallReportPlugin.js';\nimport { PrecacheCacheKeyPlugin } from './utils/PrecacheCacheKeyPlugin.js';\nimport { printCleanupDetails } from './utils/printCleanupDetails.js';\nimport { printInstallDetails } from './utils/printInstallDetails.js';\nimport { PrecacheStrategy } from './PrecacheStrategy.js';\nimport './_version.js';\n/**\n * Performs efficient precaching of assets.\n *\n * @memberof workbox-precaching\n */\nclass PrecacheController {\n    /**\n     * Create a new PrecacheController.\n     *\n     * @param {Object} [options]\n     * @param {string} [options.cacheName] The cache to use for precaching.\n     * @param {string} [options.plugins] Plugins to use when precaching as well\n     * as responding to fetch events for precached assets.\n     * @param {boolean} [options.fallbackToNetwork=true] Whether to attempt to\n     * get the response from the network if there's a precache miss.\n     */\n    constructor({ cacheName, plugins = [], fallbackToNetwork = true, } = {}) {\n        this._urlsToCacheKeys = new Map();\n        this._urlsToCacheModes = new Map();\n        this._cacheKeysToIntegrities = new Map();\n        this._strategy = new PrecacheStrategy({\n            cacheName: cacheNames.getPrecacheName(cacheName),\n            plugins: [\n                ...plugins,\n                new PrecacheCacheKeyPlugin({ precacheController: this }),\n            ],\n            fallbackToNetwork,\n        });\n        // Bind the install and activate methods to the instance.\n        this.install = this.install.bind(this);\n        this.activate = this.activate.bind(this);\n    }\n    /**\n     * @type {workbox-precaching.PrecacheStrategy} The strategy created by this controller and\n     * used to cache assets and respond to fetch events.\n     */\n    get strategy() {\n        return this._strategy;\n    }\n    /**\n     * Adds items to the precache list, removing any duplicates and\n     * stores the files in the\n     * {@link workbox-core.cacheNames|\"precache cache\"} when the service\n     * worker installs.\n     *\n     * This method can be called multiple times.\n     *\n     * @param {Array<Object|string>} [entries=[]] Array of entries to precache.\n     */\n    precache(entries) {\n        this.addToCacheList(entries);\n        if (!this._installAndActiveListenersAdded) {\n            self.addEventListener('install', this.install);\n            self.addEventListener('activate', this.activate);\n            this._installAndActiveListenersAdded = true;\n        }\n    }\n    /**\n     * This method will add items to the precache list, removing duplicates\n     * and ensuring the information is valid.\n     *\n     * @param {Array<workbox-precaching.PrecacheController.PrecacheEntry|string>} entries\n     *     Array of entries to precache.\n     */\n    addToCacheList(entries) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isArray(entries, {\n                moduleName: 'workbox-precaching',\n                className: 'PrecacheController',\n                funcName: 'addToCacheList',\n                paramName: 'entries',\n            });\n        }\n        const urlsToWarnAbout = [];\n        for (const entry of entries) {\n            // See https://github.com/GoogleChrome/workbox/issues/2259\n            if (typeof entry === 'string') {\n                urlsToWarnAbout.push(entry);\n            }\n            else if (entry && entry.revision === undefined) {\n                urlsToWarnAbout.push(entry.url);\n            }\n            const { cacheKey, url } = createCacheKey(entry);\n            const cacheMode = typeof entry !== 'string' && entry.revision ? 'reload' : 'default';\n            if (this._urlsToCacheKeys.has(url) &&\n                this._urlsToCacheKeys.get(url) !== cacheKey) {\n                throw new WorkboxError('add-to-cache-list-conflicting-entries', {\n                    firstEntry: this._urlsToCacheKeys.get(url),\n                    secondEntry: cacheKey,\n                });\n            }\n            if (typeof entry !== 'string' && entry.integrity) {\n                if (this._cacheKeysToIntegrities.has(cacheKey) &&\n                    this._cacheKeysToIntegrities.get(cacheKey) !== entry.integrity) {\n                    throw new WorkboxError('add-to-cache-list-conflicting-integrities', {\n                        url,\n                    });\n                }\n                this._cacheKeysToIntegrities.set(cacheKey, entry.integrity);\n            }\n            this._urlsToCacheKeys.set(url, cacheKey);\n            this._urlsToCacheModes.set(url, cacheMode);\n            if (urlsToWarnAbout.length > 0) {\n                const warningMessage = `Workbox is precaching URLs without revision ` +\n                    `info: ${urlsToWarnAbout.join(', ')}\\nThis is generally NOT safe. ` +\n                    `Learn more at https://bit.ly/wb-precache`;\n                if (process.env.NODE_ENV === 'production') {\n                    // Use console directly to display this warning without bloating\n                    // bundle sizes by pulling in all of the logger codebase in prod.\n                    console.warn(warningMessage);\n                }\n                else {\n                    logger.warn(warningMessage);\n                }\n            }\n        }\n    }\n    /**\n     * Precaches new and updated assets. Call this method from the service worker\n     * install event.\n     *\n     * Note: this method calls `event.waitUntil()` for you, so you do not need\n     * to call it yourself in your event handlers.\n     *\n     * @param {ExtendableEvent} event\n     * @return {Promise<workbox-precaching.InstallResult>}\n     */\n    install(event) {\n        // waitUntil returns Promise<any>\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return waitUntil(event, async () => {\n            const installReportPlugin = new PrecacheInstallReportPlugin();\n            this.strategy.plugins.push(installReportPlugin);\n            // Cache entries one at a time.\n            // See https://github.com/GoogleChrome/workbox/issues/2528\n            for (const [url, cacheKey] of this._urlsToCacheKeys) {\n                const integrity = this._cacheKeysToIntegrities.get(cacheKey);\n                const cacheMode = this._urlsToCacheModes.get(url);\n                const request = new Request(url, {\n                    integrity,\n                    cache: cacheMode,\n                    credentials: 'same-origin',\n                });\n                await Promise.all(this.strategy.handleAll({\n                    params: { cacheKey },\n                    request,\n                    event,\n                }));\n            }\n            const { updatedURLs, notUpdatedURLs } = installReportPlugin;\n            if (process.env.NODE_ENV !== 'production') {\n                printInstallDetails(updatedURLs, notUpdatedURLs);\n            }\n            return { updatedURLs, notUpdatedURLs };\n        });\n    }\n    /**\n     * Deletes assets that are no longer present in the current precache manifest.\n     * Call this method from the service worker activate event.\n     *\n     * Note: this method calls `event.waitUntil()` for you, so you do not need\n     * to call it yourself in your event handlers.\n     *\n     * @param {ExtendableEvent} event\n     * @return {Promise<workbox-precaching.CleanupResult>}\n     */\n    activate(event) {\n        // waitUntil returns Promise<any>\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return waitUntil(event, async () => {\n            const cache = await self.caches.open(this.strategy.cacheName);\n            const currentlyCachedRequests = await cache.keys();\n            const expectedCacheKeys = new Set(this._urlsToCacheKeys.values());\n            const deletedURLs = [];\n            for (const request of currentlyCachedRequests) {\n                if (!expectedCacheKeys.has(request.url)) {\n                    await cache.delete(request);\n                    deletedURLs.push(request.url);\n                }\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                printCleanupDetails(deletedURLs);\n            }\n            return { deletedURLs };\n        });\n    }\n    /**\n     * Returns a mapping of a precached URL to the corresponding cache key, taking\n     * into account the revision information for the URL.\n     *\n     * @return {Map<string, string>} A URL to cache key mapping.\n     */\n    getURLsToCacheKeys() {\n        return this._urlsToCacheKeys;\n    }\n    /**\n     * Returns a list of all the URLs that have been precached by the current\n     * service worker.\n     *\n     * @return {Array<string>} The precached URLs.\n     */\n    getCachedURLs() {\n        return [...this._urlsToCacheKeys.keys()];\n    }\n    /**\n     * Returns the cache key used for storing a given URL. If that URL is\n     * unversioned, like `/index.html', then the cache key will be the original\n     * URL with a search parameter appended to it.\n     *\n     * @param {string} url A URL whose cache key you want to look up.\n     * @return {string} The versioned URL that corresponds to a cache key\n     * for the original URL, or undefined if that URL isn't precached.\n     */\n    getCacheKeyForURL(url) {\n        const urlObject = new URL(url, location.href);\n        return this._urlsToCacheKeys.get(urlObject.href);\n    }\n    /**\n     * @param {string} url A cache key whose SRI you want to look up.\n     * @return {string} The subresource integrity associated with the cache key,\n     * or undefined if it's not set.\n     */\n    getIntegrityForCacheKey(cacheKey) {\n        return this._cacheKeysToIntegrities.get(cacheKey);\n    }\n    /**\n     * This acts as a drop-in replacement for\n     * [`cache.match()`](https://developer.mozilla.org/en-US/docs/Web/API/Cache/match)\n     * with the following differences:\n     *\n     * - It knows what the name of the precache is, and only checks in that cache.\n     * - It allows you to pass in an \"original\" URL without versioning parameters,\n     * and it will automatically look up the correct cache key for the currently\n     * active revision of that URL.\n     *\n     * E.g., `matchPrecache('index.html')` will find the correct precached\n     * response for the currently active service worker, even if the actual cache\n     * key is `'/index.html?__WB_REVISION__=1234abcd'`.\n     *\n     * @param {string|Request} request The key (without revisioning parameters)\n     * to look up in the precache.\n     * @return {Promise<Response|undefined>}\n     */\n    async matchPrecache(request) {\n        const url = request instanceof Request ? request.url : request;\n        const cacheKey = this.getCacheKeyForURL(url);\n        if (cacheKey) {\n            const cache = await self.caches.open(this.strategy.cacheName);\n            return cache.match(cacheKey);\n        }\n        return undefined;\n    }\n    /**\n     * Returns a function that looks up `url` in the precache (taking into\n     * account revision information), and returns the corresponding `Response`.\n     *\n     * @param {string} url The precached URL which will be used to lookup the\n     * `Response`.\n     * @return {workbox-routing~handlerCallback}\n     */\n    createHandlerBoundToURL(url) {\n        const cacheKey = this.getCacheKeyForURL(url);\n        if (!cacheKey) {\n            throw new WorkboxError('non-precached-url', { url });\n        }\n        return (options) => {\n            options.request = new Request(url);\n            options.params = Object.assign({ cacheKey }, options.params);\n            return this.strategy.handle(options);\n        };\n    }\n}\nexport { PrecacheController };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { PrecacheController } from '../PrecacheController.js';\nimport '../_version.js';\nlet precacheController;\n/**\n * @return {PrecacheController}\n * @private\n */\nexport const getOrCreatePrecacheController = () => {\n    if (!precacheController) {\n        precacheController = new PrecacheController();\n    }\n    return precacheController;\n};\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { Router } from '../Router.js';\nimport '../_version.js';\nlet defaultRouter;\n/**\n * Creates a new, singleton Router instance if one does not exist. If one\n * does already exist, that instance is returned.\n *\n * @private\n * @return {Router}\n */\nexport const getOrCreateDefaultRouter = () => {\n    if (!defaultRouter) {\n        defaultRouter = new Router();\n        // The helpers that use the default Router assume these listeners exist.\n        defaultRouter.addFetchListener();\n        defaultRouter.addCacheListener();\n    }\n    return defaultRouter;\n};\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * The default HTTP method, 'GET', used when there's no specific method\n * configured for a route.\n *\n * @type {string}\n *\n * @private\n */\nexport const defaultMethod = 'GET';\n/**\n * The list of valid HTTP methods associated with requests that could be routed.\n *\n * @type {Array<string>}\n *\n * @private\n */\nexport const validMethods = [\n    'DELETE',\n    'GET',\n    'HEAD',\n    'PATCH',\n    'POST',\n    'PUT',\n];\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport '../_version.js';\n/**\n * @param {function()|Object} handler Either a function, or an object with a\n * 'handle' method.\n * @return {Object} An object with a handle method.\n *\n * @private\n */\nexport const normalizeHandler = (handler) => {\n    if (handler && typeof handler === 'object') {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.hasMethod(handler, 'handle', {\n                moduleName: 'workbox-routing',\n                className: 'Route',\n                funcName: 'constructor',\n                paramName: 'handler',\n            });\n        }\n        return handler;\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isType(handler, 'function', {\n                moduleName: 'workbox-routing',\n                className: 'Route',\n                funcName: 'constructor',\n                paramName: 'handler',\n            });\n        }\n        return { handle: handler };\n    }\n};\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { defaultMethod, validMethods } from './utils/constants.js';\nimport { normalizeHandler } from './utils/normalizeHandler.js';\nimport './_version.js';\n/**\n * A `Route` consists of a pair of callback functions, \"match\" and \"handler\".\n * The \"match\" callback determine if a route should be used to \"handle\" a\n * request by returning a non-falsy value if it can. The \"handler\" callback\n * is called when there is a match and should return a Promise that resolves\n * to a `Response`.\n *\n * @memberof workbox-routing\n */\nclass Route {\n    /**\n     * Constructor for Route class.\n     *\n     * @param {workbox-routing~matchCallback} match\n     * A callback function that determines whether the route matches a given\n     * `fetch` event by returning a non-falsy value.\n     * @param {workbox-routing~handlerCallback} handler A callback\n     * function that returns a Promise resolving to a Response.\n     * @param {string} [method='GET'] The HTTP method to match the Route\n     * against.\n     */\n    constructor(match, handler, method = defaultMethod) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isType(match, 'function', {\n                moduleName: 'workbox-routing',\n                className: 'Route',\n                funcName: 'constructor',\n                paramName: 'match',\n            });\n            if (method) {\n                assert.isOneOf(method, validMethods, { paramName: 'method' });\n            }\n        }\n        // These values are referenced directly by Router so cannot be\n        // altered by minificaton.\n        this.handler = normalizeHandler(handler);\n        this.match = match;\n        this.method = method;\n    }\n    /**\n     *\n     * @param {workbox-routing-handlerCallback} handler A callback\n     * function that returns a Promise resolving to a Response\n     */\n    setCatchHandler(handler) {\n        this.catchHandler = normalizeHandler(handler);\n    }\n}\nexport { Route };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { Route } from './Route.js';\nimport './_version.js';\n/**\n * RegExpRoute makes it easy to create a regular expression based\n * {@link workbox-routing.Route}.\n *\n * For same-origin requests the RegExp only needs to match part of the URL. For\n * requests against third-party servers, you must define a RegExp that matches\n * the start of the URL.\n *\n * @memberof workbox-routing\n * @extends workbox-routing.Route\n */\nclass RegExpRoute extends Route {\n    /**\n     * If the regular expression contains\n     * [capture groups]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#grouping-back-references},\n     * the captured values will be passed to the\n     * {@link workbox-routing~handlerCallback} `params`\n     * argument.\n     *\n     * @param {RegExp} regExp The regular expression to match against URLs.\n     * @param {workbox-routing~handlerCallback} handler A callback\n     * function that returns a Promise resulting in a Response.\n     * @param {string} [method='GET'] The HTTP method to match the Route\n     * against.\n     */\n    constructor(regExp, handler, method) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isInstance(regExp, RegExp, {\n                moduleName: 'workbox-routing',\n                className: 'RegExpRoute',\n                funcName: 'constructor',\n                paramName: 'pattern',\n            });\n        }\n        const match = ({ url }) => {\n            const result = regExp.exec(url.href);\n            // Return immediately if there's no match.\n            if (!result) {\n                return;\n            }\n            // Require that the match start at the first character in the URL string\n            // if it's a cross-origin request.\n            // See https://github.com/GoogleChrome/workbox/issues/281 for the context\n            // behind this behavior.\n            if (url.origin !== location.origin && result.index !== 0) {\n                if (process.env.NODE_ENV !== 'production') {\n                    logger.debug(`The regular expression '${regExp.toString()}' only partially matched ` +\n                        `against the cross-origin URL '${url.toString()}'. RegExpRoute's will only ` +\n                        `handle cross-origin requests if they match the entire URL.`);\n                }\n                return;\n            }\n            // If the route matches, but there aren't any capture groups defined, then\n            // this will return [], which is truthy and therefore sufficient to\n            // indicate a match.\n            // If there are capture groups, then it will return their values.\n            return result.slice(1);\n        };\n        super(match, handler, method);\n    }\n}\nexport { RegExpRoute };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { defaultMethod } from './utils/constants.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { normalizeHandler } from './utils/normalizeHandler.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport './_version.js';\n/**\n * The Router can be used to process a `FetchEvent` using one or more\n * {@link workbox-routing.Route}, responding with a `Response` if\n * a matching route exists.\n *\n * If no route matches a given a request, the Router will use a \"default\"\n * handler if one is defined.\n *\n * Should the matching Route throw an error, the Router will use a \"catch\"\n * handler if one is defined to gracefully deal with issues and respond with a\n * Request.\n *\n * If a request matches multiple routes, the **earliest** registered route will\n * be used to respond to the request.\n *\n * @memberof workbox-routing\n */\nclass Router {\n    /**\n     * Initializes a new Router.\n     */\n    constructor() {\n        this._routes = new Map();\n        this._defaultHandlerMap = new Map();\n    }\n    /**\n     * @return {Map<string, Array<workbox-routing.Route>>} routes A `Map` of HTTP\n     * method name ('GET', etc.) to an array of all the corresponding `Route`\n     * instances that are registered.\n     */\n    get routes() {\n        return this._routes;\n    }\n    /**\n     * Adds a fetch event listener to respond to events when a route matches\n     * the event's request.\n     */\n    addFetchListener() {\n        // See https://github.com/Microsoft/TypeScript/issues/28357#issuecomment-436484705\n        self.addEventListener('fetch', ((event) => {\n            const { request } = event;\n            const responsePromise = this.handleRequest({ request, event });\n            if (responsePromise) {\n                event.respondWith(responsePromise);\n            }\n        }));\n    }\n    /**\n     * Adds a message event listener for URLs to cache from the window.\n     * This is useful to cache resources loaded on the page prior to when the\n     * service worker started controlling it.\n     *\n     * The format of the message data sent from the window should be as follows.\n     * Where the `urlsToCache` array may consist of URL strings or an array of\n     * URL string + `requestInit` object (the same as you'd pass to `fetch()`).\n     *\n     * ```\n     * {\n     *   type: 'CACHE_URLS',\n     *   payload: {\n     *     urlsToCache: [\n     *       './script1.js',\n     *       './script2.js',\n     *       ['./script3.js', {mode: 'no-cors'}],\n     *     ],\n     *   },\n     * }\n     * ```\n     */\n    addCacheListener() {\n        // See https://github.com/Microsoft/TypeScript/issues/28357#issuecomment-436484705\n        self.addEventListener('message', ((event) => {\n            // event.data is type 'any'\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            if (event.data && event.data.type === 'CACHE_URLS') {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                const { payload } = event.data;\n                if (process.env.NODE_ENV !== 'production') {\n                    logger.debug(`Caching URLs from the window`, payload.urlsToCache);\n                }\n                const requestPromises = Promise.all(payload.urlsToCache.map((entry) => {\n                    if (typeof entry === 'string') {\n                        entry = [entry];\n                    }\n                    const request = new Request(...entry);\n                    return this.handleRequest({ request, event });\n                    // TODO(philipwalton): TypeScript errors without this typecast for\n                    // some reason (probably a bug). The real type here should work but\n                    // doesn't: `Array<Promise<Response> | undefined>`.\n                })); // TypeScript\n                event.waitUntil(requestPromises);\n                // If a MessageChannel was used, reply to the message on success.\n                if (event.ports && event.ports[0]) {\n                    void requestPromises.then(() => event.ports[0].postMessage(true));\n                }\n            }\n        }));\n    }\n    /**\n     * Apply the routing rules to a FetchEvent object to get a Response from an\n     * appropriate Route's handler.\n     *\n     * @param {Object} options\n     * @param {Request} options.request The request to handle.\n     * @param {ExtendableEvent} options.event The event that triggered the\n     *     request.\n     * @return {Promise<Response>|undefined} A promise is returned if a\n     *     registered route can handle the request. If there is no matching\n     *     route and there's no `defaultHandler`, `undefined` is returned.\n     */\n    handleRequest({ request, event, }) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isInstance(request, Request, {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'handleRequest',\n                paramName: 'options.request',\n            });\n        }\n        const url = new URL(request.url, location.href);\n        if (!url.protocol.startsWith('http')) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.debug(`Workbox Router only supports URLs that start with 'http'.`);\n            }\n            return;\n        }\n        const sameOrigin = url.origin === location.origin;\n        const { params, route } = this.findMatchingRoute({\n            event,\n            request,\n            sameOrigin,\n            url,\n        });\n        let handler = route && route.handler;\n        const debugMessages = [];\n        if (process.env.NODE_ENV !== 'production') {\n            if (handler) {\n                debugMessages.push([`Found a route to handle this request:`, route]);\n                if (params) {\n                    debugMessages.push([\n                        `Passing the following params to the route's handler:`,\n                        params,\n                    ]);\n                }\n            }\n        }\n        // If we don't have a handler because there was no matching route, then\n        // fall back to defaultHandler if that's defined.\n        const method = request.method;\n        if (!handler && this._defaultHandlerMap.has(method)) {\n            if (process.env.NODE_ENV !== 'production') {\n                debugMessages.push(`Failed to find a matching route. Falling ` +\n                    `back to the default handler for ${method}.`);\n            }\n            handler = this._defaultHandlerMap.get(method);\n        }\n        if (!handler) {\n            if (process.env.NODE_ENV !== 'production') {\n                // No handler so Workbox will do nothing. If logs is set of debug\n                // i.e. verbose, we should print out this information.\n                logger.debug(`No route found for: ${getFriendlyURL(url)}`);\n            }\n            return;\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            // We have a handler, meaning Workbox is going to handle the route.\n            // print the routing details to the console.\n            logger.groupCollapsed(`Router is responding to: ${getFriendlyURL(url)}`);\n            debugMessages.forEach((msg) => {\n                if (Array.isArray(msg)) {\n                    logger.log(...msg);\n                }\n                else {\n                    logger.log(msg);\n                }\n            });\n            logger.groupEnd();\n        }\n        // Wrap in try and catch in case the handle method throws a synchronous\n        // error. It should still callback to the catch handler.\n        let responsePromise;\n        try {\n            responsePromise = handler.handle({ url, request, event, params });\n        }\n        catch (err) {\n            responsePromise = Promise.reject(err);\n        }\n        // Get route's catch handler, if it exists\n        const catchHandler = route && route.catchHandler;\n        if (responsePromise instanceof Promise &&\n            (this._catchHandler || catchHandler)) {\n            responsePromise = responsePromise.catch(async (err) => {\n                // If there's a route catch handler, process that first\n                if (catchHandler) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        // Still include URL here as it will be async from the console group\n                        // and may not make sense without the URL\n                        logger.groupCollapsed(`Error thrown when responding to: ` +\n                            ` ${getFriendlyURL(url)}. Falling back to route's Catch Handler.`);\n                        logger.error(`Error thrown by:`, route);\n                        logger.error(err);\n                        logger.groupEnd();\n                    }\n                    try {\n                        return await catchHandler.handle({ url, request, event, params });\n                    }\n                    catch (catchErr) {\n                        if (catchErr instanceof Error) {\n                            err = catchErr;\n                        }\n                    }\n                }\n                if (this._catchHandler) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        // Still include URL here as it will be async from the console group\n                        // and may not make sense without the URL\n                        logger.groupCollapsed(`Error thrown when responding to: ` +\n                            ` ${getFriendlyURL(url)}. Falling back to global Catch Handler.`);\n                        logger.error(`Error thrown by:`, route);\n                        logger.error(err);\n                        logger.groupEnd();\n                    }\n                    return this._catchHandler.handle({ url, request, event });\n                }\n                throw err;\n            });\n        }\n        return responsePromise;\n    }\n    /**\n     * Checks a request and URL (and optionally an event) against the list of\n     * registered routes, and if there's a match, returns the corresponding\n     * route along with any params generated by the match.\n     *\n     * @param {Object} options\n     * @param {URL} options.url\n     * @param {boolean} options.sameOrigin The result of comparing `url.origin`\n     *     against the current origin.\n     * @param {Request} options.request The request to match.\n     * @param {Event} options.event The corresponding event.\n     * @return {Object} An object with `route` and `params` properties.\n     *     They are populated if a matching route was found or `undefined`\n     *     otherwise.\n     */\n    findMatchingRoute({ url, sameOrigin, request, event, }) {\n        const routes = this._routes.get(request.method) || [];\n        for (const route of routes) {\n            let params;\n            // route.match returns type any, not possible to change right now.\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            const matchResult = route.match({ url, sameOrigin, request, event });\n            if (matchResult) {\n                if (process.env.NODE_ENV !== 'production') {\n                    // Warn developers that using an async matchCallback is almost always\n                    // not the right thing to do.\n                    if (matchResult instanceof Promise) {\n                        logger.warn(`While routing ${getFriendlyURL(url)}, an async ` +\n                            `matchCallback function was used. Please convert the ` +\n                            `following route to use a synchronous matchCallback function:`, route);\n                    }\n                }\n                // See https://github.com/GoogleChrome/workbox/issues/2079\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                params = matchResult;\n                if (Array.isArray(params) && params.length === 0) {\n                    // Instead of passing an empty array in as params, use undefined.\n                    params = undefined;\n                }\n                else if (matchResult.constructor === Object && // eslint-disable-line\n                    Object.keys(matchResult).length === 0) {\n                    // Instead of passing an empty object in as params, use undefined.\n                    params = undefined;\n                }\n                else if (typeof matchResult === 'boolean') {\n                    // For the boolean value true (rather than just something truth-y),\n                    // don't set params.\n                    // See https://github.com/GoogleChrome/workbox/pull/2134#issuecomment-513924353\n                    params = undefined;\n                }\n                // Return early if have a match.\n                return { route, params };\n            }\n        }\n        // If no match was found above, return and empty object.\n        return {};\n    }\n    /**\n     * Define a default `handler` that's called when no routes explicitly\n     * match the incoming request.\n     *\n     * Each HTTP method ('GET', 'POST', etc.) gets its own default handler.\n     *\n     * Without a default handler, unmatched requests will go against the\n     * network as if there were no service worker present.\n     *\n     * @param {workbox-routing~handlerCallback} handler A callback\n     * function that returns a Promise resulting in a Response.\n     * @param {string} [method='GET'] The HTTP method to associate with this\n     * default handler. Each method has its own default.\n     */\n    setDefaultHandler(handler, method = defaultMethod) {\n        this._defaultHandlerMap.set(method, normalizeHandler(handler));\n    }\n    /**\n     * If a Route throws an error while handling a request, this `handler`\n     * will be called and given a chance to provide a response.\n     *\n     * @param {workbox-routing~handlerCallback} handler A callback\n     * function that returns a Promise resulting in a Response.\n     */\n    setCatchHandler(handler) {\n        this._catchHandler = normalizeHandler(handler);\n    }\n    /**\n     * Registers a route with the router.\n     *\n     * @param {workbox-routing.Route} route The route to register.\n     */\n    registerRoute(route) {\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isType(route, 'object', {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'registerRoute',\n                paramName: 'route',\n            });\n            assert.hasMethod(route, 'match', {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'registerRoute',\n                paramName: 'route',\n            });\n            assert.isType(route.handler, 'object', {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'registerRoute',\n                paramName: 'route',\n            });\n            assert.hasMethod(route.handler, 'handle', {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'registerRoute',\n                paramName: 'route.handler',\n            });\n            assert.isType(route.method, 'string', {\n                moduleName: 'workbox-routing',\n                className: 'Router',\n                funcName: 'registerRoute',\n                paramName: 'route.method',\n            });\n        }\n        if (!this._routes.has(route.method)) {\n            this._routes.set(route.method, []);\n        }\n        // Give precedence to all of the earlier routes by adding this additional\n        // route to the end of the array.\n        this._routes.get(route.method).push(route);\n    }\n    /**\n     * Unregisters a route with the router.\n     *\n     * @param {workbox-routing.Route} route The route to unregister.\n     */\n    unregisterRoute(route) {\n        if (!this._routes.has(route.method)) {\n            throw new WorkboxError('unregister-route-but-not-found-with-method', {\n                method: route.method,\n            });\n        }\n        const routeIndex = this._routes.get(route.method).indexOf(route);\n        if (routeIndex > -1) {\n            this._routes.get(route.method).splice(routeIndex, 1);\n        }\n        else {\n            throw new WorkboxError('unregister-route-route-not-registered');\n        }\n    }\n}\nexport { Router };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { Route } from './Route.js';\nimport { RegExpRoute } from './RegExpRoute.js';\nimport { getOrCreateDefaultRouter } from './utils/getOrCreateDefaultRouter.js';\nimport './_version.js';\n/**\n * Easily register a RegExp, string, or function with a caching\n * strategy to a singleton Router instance.\n *\n * This method will generate a Route for you if needed and\n * call {@link workbox-routing.Router#registerRoute}.\n *\n * @param {RegExp|string|workbox-routing.Route~matchCallback|workbox-routing.Route} capture\n * If the capture param is a `Route`, all other arguments will be ignored.\n * @param {workbox-routing~handlerCallback} [handler] A callback\n * function that returns a Promise resulting in a Response. This parameter\n * is required if `capture` is not a `Route` object.\n * @param {string} [method='GET'] The HTTP method to match the Route\n * against.\n * @return {workbox-routing.Route} The generated `Route`.\n *\n * @memberof workbox-routing\n */\nfunction registerRoute(capture, handler, method) {\n    let route;\n    if (typeof capture === 'string') {\n        const captureUrl = new URL(capture, location.href);\n        if (process.env.NODE_ENV !== 'production') {\n            if (!(capture.startsWith('/') || capture.startsWith('http'))) {\n                throw new WorkboxError('invalid-string', {\n                    moduleName: 'workbox-routing',\n                    funcName: 'registerRoute',\n                    paramName: 'capture',\n                });\n            }\n            // We want to check if Express-style wildcards are in the pathname only.\n            // TODO: Remove this log message in v4.\n            const valueToCheck = capture.startsWith('http')\n                ? captureUrl.pathname\n                : capture;\n            // See https://github.com/pillarjs/path-to-regexp#parameters\n            const wildcards = '[*:?+]';\n            if (new RegExp(`${wildcards}`).exec(valueToCheck)) {\n                logger.debug(`The '$capture' parameter contains an Express-style wildcard ` +\n                    `character (${wildcards}). Strings are now always interpreted as ` +\n                    `exact matches; use a RegExp for partial or wildcard matches.`);\n            }\n        }\n        const matchCallback = ({ url }) => {\n            if (process.env.NODE_ENV !== 'production') {\n                if (url.pathname === captureUrl.pathname &&\n                    url.origin !== captureUrl.origin) {\n                    logger.debug(`${capture} only partially matches the cross-origin URL ` +\n                        `${url.toString()}. This route will only handle cross-origin requests ` +\n                        `if they match the entire URL.`);\n                }\n            }\n            return url.href === captureUrl.href;\n        };\n        // If `capture` is a string then `handler` and `method` must be present.\n        route = new Route(matchCallback, handler, method);\n    }\n    else if (capture instanceof RegExp) {\n        // If `capture` is a `RegExp` then `handler` and `method` must be present.\n        route = new RegExpRoute(capture, handler, method);\n    }\n    else if (typeof capture === 'function') {\n        // If `capture` is a function then `handler` and `method` must be present.\n        route = new Route(capture, handler, method);\n    }\n    else if (capture instanceof Route) {\n        route = capture;\n    }\n    else {\n        throw new WorkboxError('unsupported-route-type', {\n            moduleName: 'workbox-routing',\n            funcName: 'registerRoute',\n            paramName: 'capture',\n        });\n    }\n    const defaultRouter = getOrCreateDefaultRouter();\n    defaultRouter.registerRoute(route);\n    return route;\n}\nexport { registerRoute };\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\n/**\n * Removes any URL search parameters that should be ignored.\n *\n * @param {URL} urlObject The original URL.\n * @param {Array<RegExp>} ignoreURLParametersMatching RegExps to test against\n * each search parameter name. Matches mean that the search parameter should be\n * ignored.\n * @return {URL} The URL with any ignored search parameters removed.\n *\n * @private\n * @memberof workbox-precaching\n */\nexport function removeIgnoredSearchParams(urlObject, ignoreURLParametersMatching = []) {\n    // Convert the iterable into an array at the start of the loop to make sure\n    // deletion doesn't mess up iteration.\n    for (const paramName of [...urlObject.searchParams.keys()]) {\n        if (ignoreURLParametersMatching.some((regExp) => regExp.test(paramName))) {\n            urlObject.searchParams.delete(paramName);\n        }\n    }\n    return urlObject;\n}\n","/*\n  Copyright 2020 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport { Route } from 'workbox-routing/Route.js';\nimport { generateURLVariations } from './utils/generateURLVariations.js';\nimport './_version.js';\n/**\n * A subclass of {@link workbox-routing.Route} that takes a\n * {@link workbox-precaching.PrecacheController}\n * instance and uses it to match incoming requests and handle fetching\n * responses from the precache.\n *\n * @memberof workbox-precaching\n * @extends workbox-routing.Route\n */\nclass PrecacheRoute extends Route {\n    /**\n     * @param {PrecacheController} precacheController A `PrecacheController`\n     * instance used to both match requests and respond to fetch events.\n     * @param {Object} [options] Options to control how requests are matched\n     * against the list of precached URLs.\n     * @param {string} [options.directoryIndex=index.html] The `directoryIndex` will\n     * check cache entries for a URLs ending with '/' to see if there is a hit when\n     * appending the `directoryIndex` value.\n     * @param {Array<RegExp>} [options.ignoreURLParametersMatching=[/^utm_/, /^fbclid$/]] An\n     * array of regex's to remove search params when looking for a cache match.\n     * @param {boolean} [options.cleanURLs=true] The `cleanURLs` option will\n     * check the cache for the URL with a `.html` added to the end of the end.\n     * @param {workbox-precaching~urlManipulation} [options.urlManipulation]\n     * This is a function that should take a URL and return an array of\n     * alternative URLs that should be checked for precache matches.\n     */\n    constructor(precacheController, options) {\n        const match = ({ request, }) => {\n            const urlsToCacheKeys = precacheController.getURLsToCacheKeys();\n            for (const possibleURL of generateURLVariations(request.url, options)) {\n                const cacheKey = urlsToCacheKeys.get(possibleURL);\n                if (cacheKey) {\n                    const integrity = precacheController.getIntegrityForCacheKey(cacheKey);\n                    return { cacheKey, integrity };\n                }\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                logger.debug(`Precaching did not find a match for ` + getFriendlyURL(request.url));\n            }\n            return;\n        };\n        super(match, precacheController.strategy);\n    }\n}\nexport { PrecacheRoute };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { removeIgnoredSearchParams } from './removeIgnoredSearchParams.js';\nimport '../_version.js';\n/**\n * Generator function that yields possible variations on the original URL to\n * check, one at a time.\n *\n * @param {string} url\n * @param {Object} options\n *\n * @private\n * @memberof workbox-precaching\n */\nexport function* generateURLVariations(url, { ignoreURLParametersMatching = [/^utm_/, /^fbclid$/], directoryIndex = 'index.html', cleanURLs = true, urlManipulation, } = {}) {\n    const urlObject = new URL(url, location.href);\n    urlObject.hash = '';\n    yield urlObject.href;\n    const urlWithoutIgnoredParams = removeIgnoredSearchParams(urlObject, ignoreURLParametersMatching);\n    yield urlWithoutIgnoredParams.href;\n    if (directoryIndex && urlWithoutIgnoredParams.pathname.endsWith('/')) {\n        const directoryURL = new URL(urlWithoutIgnoredParams.href);\n        directoryURL.pathname += directoryIndex;\n        yield directoryURL.href;\n    }\n    if (cleanURLs) {\n        const cleanURL = new URL(urlWithoutIgnoredParams.href);\n        cleanURL.pathname += '.html';\n        yield cleanURL.href;\n    }\n    if (urlManipulation) {\n        const additionalURLs = urlManipulation({ url: urlObject });\n        for (const urlToAttempt of additionalURLs) {\n            yield urlToAttempt.href;\n        }\n    }\n}\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { getFriendlyURL } from 'workbox-core/_private/getFriendlyURL.js';\nimport '../_version.js';\nexport const messages = {\n    strategyStart: (strategyName, request) => `Using ${strategyName} to respond to '${getFriendlyURL(request.url)}'`,\n    printFinalResponse: (response) => {\n        if (response) {\n            logger.groupCollapsed(`View the final response here.`);\n            logger.log(response || '[No response returned]');\n            logger.groupEnd();\n        }\n    },\n};\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport '../_version.js';\nexport const cacheOkAndOpaquePlugin = {\n    /**\n     * Returns a valid response (to allow caching) if the status is 200 (OK) or\n     * 0 (opaque).\n     *\n     * @param {Object} options\n     * @param {Response} options.response\n     * @return {Response|null}\n     *\n     * @private\n     */\n    cacheWillUpdate: async ({ response }) => {\n        if (response.status === 200 || response.status === 0) {\n            return response;\n        }\n        return null;\n    },\n};\n","/*\n  Copyright 2018 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { assert } from 'workbox-core/_private/assert.js';\nimport { logger } from 'workbox-core/_private/logger.js';\nimport { WorkboxError } from 'workbox-core/_private/WorkboxError.js';\nimport { cacheOkAndOpaquePlugin } from './plugins/cacheOkAndOpaquePlugin.js';\nimport { Strategy } from './Strategy.js';\nimport { messages } from './utils/messages.js';\nimport './_version.js';\n/**\n * An implementation of a\n * [stale-while-revalidate](https://developer.chrome.com/docs/workbox/caching-strategies-overview/#stale-while-revalidate)\n * request strategy.\n *\n * Resources are requested from both the cache and the network in parallel.\n * The strategy will respond with the cached version if available, otherwise\n * wait for the network response. The cache is updated with the network response\n * with each successful request.\n *\n * By default, this strategy will cache responses with a 200 status code as\n * well as [opaque responses](https://developer.chrome.com/docs/workbox/caching-resources-during-runtime/#opaque-responses).\n * Opaque responses are cross-origin requests where the response doesn't\n * support [CORS](https://enable-cors.org/).\n *\n * If the network request fails, and there is no cache match, this will throw\n * a `WorkboxError` exception.\n *\n * @extends workbox-strategies.Strategy\n * @memberof workbox-strategies\n */\nclass StaleWhileRevalidate extends Strategy {\n    /**\n     * @param {Object} [options]\n     * @param {string} [options.cacheName] Cache name to store and retrieve\n     * requests. Defaults to cache names provided by\n     * {@link workbox-core.cacheNames}.\n     * @param {Array<Object>} [options.plugins] [Plugins]{@link https://developers.google.com/web/tools/workbox/guides/using-plugins}\n     * to use in conjunction with this caching strategy.\n     * @param {Object} [options.fetchOptions] Values passed along to the\n     * [`init`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters)\n     * of [non-navigation](https://github.com/GoogleChrome/workbox/issues/1796)\n     * `fetch()` requests made by this strategy.\n     * @param {Object} [options.matchOptions] [`CacheQueryOptions`](https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions)\n     */\n    constructor(options = {}) {\n        super(options);\n        // If this instance contains no plugins with a 'cacheWillUpdate' callback,\n        // prepend the `cacheOkAndOpaquePlugin` plugin to the plugins list.\n        if (!this.plugins.some((p) => 'cacheWillUpdate' in p)) {\n            this.plugins.unshift(cacheOkAndOpaquePlugin);\n        }\n    }\n    /**\n     * @private\n     * @param {Request|string} request A request to run this strategy for.\n     * @param {workbox-strategies.StrategyHandler} handler The event that\n     *     triggered the request.\n     * @return {Promise<Response>}\n     */\n    async _handle(request, handler) {\n        const logs = [];\n        if (process.env.NODE_ENV !== 'production') {\n            assert.isInstance(request, Request, {\n                moduleName: 'workbox-strategies',\n                className: this.constructor.name,\n                funcName: 'handle',\n                paramName: 'request',\n            });\n        }\n        const fetchAndCachePromise = handler.fetchAndCachePut(request).catch(() => {\n            // Swallow this error because a 'no-response' error will be thrown in\n            // main handler return flow. This will be in the `waitUntil()` flow.\n        });\n        void handler.waitUntil(fetchAndCachePromise);\n        let response = await handler.cacheMatch(request);\n        let error;\n        if (response) {\n            if (process.env.NODE_ENV !== 'production') {\n                logs.push(`Found a cached response in the '${this.cacheName}'` +\n                    ` cache. Will update with the network response in the background.`);\n            }\n        }\n        else {\n            if (process.env.NODE_ENV !== 'production') {\n                logs.push(`No response found in the '${this.cacheName}' cache. ` +\n                    `Will wait for the network response.`);\n            }\n            try {\n                // NOTE(philipwalton): Really annoying that we have to type cast here.\n                // https://github.com/microsoft/TypeScript/issues/20006\n                response = (await fetchAndCachePromise);\n            }\n            catch (err) {\n                if (err instanceof Error) {\n                    error = err;\n                }\n            }\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            logger.groupCollapsed(messages.strategyStart(this.constructor.name, request));\n            for (const log of logs) {\n                logger.log(log);\n            }\n            messages.printFinalResponse(response);\n            logger.groupEnd();\n        }\n        if (!response) {\n            throw new WorkboxError('no-response', { url: request.url, error });\n        }\n        return response;\n    }\n}\nexport { StaleWhileRevalidate };\n","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param {*} value - the value to check\n * @returns {boolean} true if the given value is a date\n * @throws {TypeError} 1 arguments required\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\n\nexport default function isDate(value) {\n  requiredArgs(1, arguments);\n  return value instanceof Date || _typeof(value) === 'object' && Object.prototype.toString.call(value) === '[object Date]';\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || _typeof(argument) === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import isDate from \"../isDate/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param {*} date - the date to check\n * @returns {Boolean} the date is valid\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertable into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\n\nexport default function isValid(dirtyDate) {\n  requiredArgs(1, arguments);\n\n  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {\n    return false;\n  }\n\n  var date = toDate(dirtyDate);\n  return !isNaN(Number(date));\n}","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","import addMilliseconds from \"../addMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\n/**\n * @name subMilliseconds\n * @category Millisecond Helpers\n * @summary Subtract the specified number of milliseconds from the given date.\n *\n * @description\n * Subtract the specified number of milliseconds from the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the milliseconds subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:\n * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:29.250\n */\n\nexport default function subMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, -amount);\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addMilliseconds\n * @category Millisecond Helpers\n * @summary Add the specified number of milliseconds to the given date.\n *\n * @description\n * Add the specified number of milliseconds to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the milliseconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 750 milliseconds to 10 July 2014 12:45:30.000:\n * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:30.750\n */\n\nexport default function addMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var timestamp = toDate(dirtyDate).getTime();\n  var amount = toInteger(dirtyAmount);\n  return new Date(timestamp + amount);\n}","import toDate from \"../../toDate/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nvar MILLISECONDS_IN_DAY = 86400000;\nexport default function getUTCDayOfYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var timestamp = date.getTime();\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n  var startOfYearTimestamp = date.getTime();\n  var difference = timestamp - startOfYearTimestamp;\n  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;\n}","import toDate from \"../../toDate/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nexport default function startOfUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var weekStartsOn = 1;\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}","import toDate from \"../../toDate/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nimport startOfUTCISOWeek from \"../startOfUTCISOWeek/index.js\";\nexport default function getUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var year = date.getUTCFullYear();\n  var fourthOfJanuaryOfNextYear = new Date(0);\n  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);\n  var fourthOfJanuaryOfThisYear = new Date(0);\n  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}","import toDate from \"../../toDate/index.js\";\nimport startOfUTCISOWeek from \"../startOfUTCISOWeek/index.js\";\nimport startOfUTCISOWeekYear from \"../startOfUTCISOWeekYear/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nvar MILLISECONDS_IN_WEEK = 604800000;\nexport default function getUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime(); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n}","import getUTCISOWeekYear from \"../getUTCISOWeekYear/index.js\";\nimport startOfUTCISOWeek from \"../startOfUTCISOWeek/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nexport default function startOfUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var year = getUTCISOWeekYear(dirtyDate);\n  var fourthOfJanuary = new Date(0);\n  fourthOfJanuary.setUTCFullYear(year, 0, 4);\n  fourthOfJanuary.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCISOWeek(fourthOfJanuary);\n  return date;\n}","var defaultOptions = {};\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}","import toDate from \"../../toDate/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nimport toInteger from \"../toInteger/index.js\";\nimport { getDefaultOptions } from \"../defaultOptions/index.js\";\nexport default function startOfUTCWeek(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n\n  requiredArgs(1, arguments);\n  var defaultOptions = getDefaultOptions();\n  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}","import toDate from \"../../toDate/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nimport startOfUTCWeek from \"../startOfUTCWeek/index.js\";\nimport toInteger from \"../toInteger/index.js\";\nimport { getDefaultOptions } from \"../defaultOptions/index.js\";\nexport default function getUTCWeekYear(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var year = date.getUTCFullYear();\n  var defaultOptions = getDefaultOptions();\n  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');\n  }\n\n  var firstWeekOfNextYear = new Date(0);\n  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);\n  var firstWeekOfThisYear = new Date(0);\n  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}","import toDate from \"../../toDate/index.js\";\nimport startOfUTCWeek from \"../startOfUTCWeek/index.js\";\nimport startOfUTCWeekYear from \"../startOfUTCWeekYear/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nvar MILLISECONDS_IN_WEEK = 604800000;\nexport default function getUTCWeek(dirtyDate, options) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime(); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n}","import getUTCWeekYear from \"../getUTCWeekYear/index.js\";\nimport requiredArgs from \"../requiredArgs/index.js\";\nimport startOfUTCWeek from \"../startOfUTCWeek/index.js\";\nimport toInteger from \"../toInteger/index.js\";\nimport { getDefaultOptions } from \"../defaultOptions/index.js\";\nexport default function startOfUTCWeekYear(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n\n  requiredArgs(1, arguments);\n  var defaultOptions = getDefaultOptions();\n  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);\n  var year = getUTCWeekYear(dirtyDate, options);\n  var firstWeek = new Date(0);\n  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCWeek(firstWeek, options);\n  return date;\n}","export default function addLeadingZeros(number, targetLength) {\n  var sign = number < 0 ? '-' : '';\n  var output = Math.abs(number).toString();\n\n  while (output.length < targetLength) {\n    output = '0' + output;\n  }\n\n  return sign + output;\n}","import addLeadingZeros from \"../../addLeadingZeros/index.js\";\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nvar formatters = {\n  // Year\n  y: function y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n    var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n    var year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);\n  },\n  // Month\n  M: function M(date, token) {\n    var month = date.getUTCMonth();\n    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d: function d(date, token) {\n    return addLeadingZeros(date.getUTCDate(), token.length);\n  },\n  // AM or PM\n  a: function a(date, token) {\n    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';\n\n    switch (token) {\n      case 'a':\n      case 'aa':\n        return dayPeriodEnumValue.toUpperCase();\n\n      case 'aaa':\n        return dayPeriodEnumValue;\n\n      case 'aaaaa':\n        return dayPeriodEnumValue[0];\n\n      case 'aaaa':\n      default:\n        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';\n    }\n  },\n  // Hour [1-12]\n  h: function h(date, token) {\n    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H: function H(date, token) {\n    return addLeadingZeros(date.getUTCHours(), token.length);\n  },\n  // Minute\n  m: function m(date, token) {\n    return addLeadingZeros(date.getUTCMinutes(), token.length);\n  },\n  // Second\n  s: function s(date, token) {\n    return addLeadingZeros(date.getUTCSeconds(), token.length);\n  },\n  // Fraction of second\n  S: function S(date, token) {\n    var numberOfDigits = token.length;\n    var milliseconds = date.getUTCMilliseconds();\n    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};\nexport default formatters;","import getUTCDayOfYear from \"../../../_lib/getUTCDayOfYear/index.js\";\nimport getUTCISOWeek from \"../../../_lib/getUTCISOWeek/index.js\";\nimport getUTCISOWeekYear from \"../../../_lib/getUTCISOWeekYear/index.js\";\nimport getUTCWeek from \"../../../_lib/getUTCWeek/index.js\";\nimport getUTCWeekYear from \"../../../_lib/getUTCWeekYear/index.js\";\nimport addLeadingZeros from \"../../addLeadingZeros/index.js\";\nimport lightFormatters from \"../lightFormatters/index.js\";\nvar dayPeriodEnum = {\n  am: 'am',\n  pm: 'pm',\n  midnight: 'midnight',\n  noon: 'noon',\n  morning: 'morning',\n  afternoon: 'afternoon',\n  evening: 'evening',\n  night: 'night'\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\nvar formatters = {\n  // Era\n  G: function G(date, token, localize) {\n    var era = date.getUTCFullYear() > 0 ? 1 : 0;\n\n    switch (token) {\n      // AD, BC\n      case 'G':\n      case 'GG':\n      case 'GGG':\n        return localize.era(era, {\n          width: 'abbreviated'\n        });\n      // A, B\n\n      case 'GGGGG':\n        return localize.era(era, {\n          width: 'narrow'\n        });\n      // Anno Domini, Before Christ\n\n      case 'GGGG':\n      default:\n        return localize.era(era, {\n          width: 'wide'\n        });\n    }\n  },\n  // Year\n  y: function y(date, token, localize) {\n    // Ordinal number\n    if (token === 'yo') {\n      var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n      var year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, {\n        unit: 'year'\n      });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function Y(date, token, localize, options) {\n    var signedWeekYear = getUTCWeekYear(date, options); // Returns 1 for 1 BC (which is year 0 in JavaScript)\n\n    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear; // Two digit year\n\n    if (token === 'YY') {\n      var twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    } // Ordinal number\n\n\n    if (token === 'Yo') {\n      return localize.ordinalNumber(weekYear, {\n        unit: 'year'\n      });\n    } // Padding\n\n\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function R(date, token) {\n    var isoWeekYear = getUTCISOWeekYear(date); // Padding\n\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function u(date, token) {\n    var year = date.getUTCFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function Q(date, token, localize) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'Q':\n        return String(quarter);\n      // 01, 02, 03, 04\n\n      case 'QQ':\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n\n      case 'Qo':\n        return localize.ordinalNumber(quarter, {\n          unit: 'quarter'\n        });\n      // Q1, Q2, Q3, Q4\n\n      case 'QQQ':\n        return localize.quarter(quarter, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n\n      case 'QQQQQ':\n        return localize.quarter(quarter, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // 1st quarter, 2nd quarter, ...\n\n      case 'QQQQ':\n      default:\n        return localize.quarter(quarter, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function q(date, token, localize) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'q':\n        return String(quarter);\n      // 01, 02, 03, 04\n\n      case 'qq':\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n\n      case 'qo':\n        return localize.ordinalNumber(quarter, {\n          unit: 'quarter'\n        });\n      // Q1, Q2, Q3, Q4\n\n      case 'qqq':\n        return localize.quarter(quarter, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n\n      case 'qqqqq':\n        return localize.quarter(quarter, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // 1st quarter, 2nd quarter, ...\n\n      case 'qqqq':\n      default:\n        return localize.quarter(quarter, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // Month\n  M: function M(date, token, localize) {\n    var month = date.getUTCMonth();\n\n    switch (token) {\n      case 'M':\n      case 'MM':\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n\n      case 'Mo':\n        return localize.ordinalNumber(month + 1, {\n          unit: 'month'\n        });\n      // Jan, Feb, ..., Dec\n\n      case 'MMM':\n        return localize.month(month, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // J, F, ..., D\n\n      case 'MMMMM':\n        return localize.month(month, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // January, February, ..., December\n\n      case 'MMMM':\n      default:\n        return localize.month(month, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone month\n  L: function L(date, token, localize) {\n    var month = date.getUTCMonth();\n\n    switch (token) {\n      // 1, 2, ..., 12\n      case 'L':\n        return String(month + 1);\n      // 01, 02, ..., 12\n\n      case 'LL':\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n\n      case 'Lo':\n        return localize.ordinalNumber(month + 1, {\n          unit: 'month'\n        });\n      // Jan, Feb, ..., Dec\n\n      case 'LLL':\n        return localize.month(month, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // J, F, ..., D\n\n      case 'LLLLL':\n        return localize.month(month, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // January, February, ..., December\n\n      case 'LLLL':\n      default:\n        return localize.month(month, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // Local week of year\n  w: function w(date, token, localize, options) {\n    var week = getUTCWeek(date, options);\n\n    if (token === 'wo') {\n      return localize.ordinalNumber(week, {\n        unit: 'week'\n      });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function I(date, token, localize) {\n    var isoWeek = getUTCISOWeek(date);\n\n    if (token === 'Io') {\n      return localize.ordinalNumber(isoWeek, {\n        unit: 'week'\n      });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function d(date, token, localize) {\n    if (token === 'do') {\n      return localize.ordinalNumber(date.getUTCDate(), {\n        unit: 'date'\n      });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n  // Day of year\n  D: function D(date, token, localize) {\n    var dayOfYear = getUTCDayOfYear(date);\n\n    if (token === 'Do') {\n      return localize.ordinalNumber(dayOfYear, {\n        unit: 'dayOfYear'\n      });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function E(date, token, localize) {\n    var dayOfWeek = date.getUTCDay();\n\n    switch (token) {\n      // Tue\n      case 'E':\n      case 'EE':\n      case 'EEE':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'EEEEE':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'EEEEEE':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'EEEE':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Local day of week\n  e: function e(date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case 'e':\n        return String(localDayOfWeek);\n      // Padded numerical value\n\n      case 'ee':\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n\n      case 'eo':\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: 'day'\n        });\n\n      case 'eee':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'eeeee':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'eeeeee':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'eeee':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function c(date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case 'c':\n        return String(localDayOfWeek);\n      // Padded numerical value\n\n      case 'cc':\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n\n      case 'co':\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: 'day'\n        });\n\n      case 'ccc':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'standalone'\n        });\n      // T\n\n      case 'ccccc':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'standalone'\n        });\n      // Tu\n\n      case 'cccccc':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'standalone'\n        });\n      // Tuesday\n\n      case 'cccc':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'standalone'\n        });\n    }\n  },\n  // ISO day of week\n  i: function i(date, token, localize) {\n    var dayOfWeek = date.getUTCDay();\n    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n\n    switch (token) {\n      // 2\n      case 'i':\n        return String(isoDayOfWeek);\n      // 02\n\n      case 'ii':\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n\n      case 'io':\n        return localize.ordinalNumber(isoDayOfWeek, {\n          unit: 'day'\n        });\n      // Tue\n\n      case 'iii':\n        return localize.day(dayOfWeek, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n      // T\n\n      case 'iiiii':\n        return localize.day(dayOfWeek, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n      // Tu\n\n      case 'iiiiii':\n        return localize.day(dayOfWeek, {\n          width: 'short',\n          context: 'formatting'\n        });\n      // Tuesday\n\n      case 'iiii':\n      default:\n        return localize.day(dayOfWeek, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // AM or PM\n  a: function a(date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';\n\n    switch (token) {\n      case 'a':\n      case 'aa':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'aaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        }).toLowerCase();\n\n      case 'aaaaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'aaaa':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function b(date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';\n    }\n\n    switch (token) {\n      case 'b':\n      case 'bb':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'bbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        }).toLowerCase();\n\n      case 'bbbbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'bbbb':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function B(date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case 'B':\n      case 'BB':\n      case 'BBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'abbreviated',\n          context: 'formatting'\n        });\n\n      case 'BBBBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'narrow',\n          context: 'formatting'\n        });\n\n      case 'BBBB':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: 'wide',\n          context: 'formatting'\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function h(date, token, localize) {\n    if (token === 'ho') {\n      var hours = date.getUTCHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n  // Hour [0-23]\n  H: function H(date, token, localize) {\n    if (token === 'Ho') {\n      return localize.ordinalNumber(date.getUTCHours(), {\n        unit: 'hour'\n      });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n  // Hour [0-11]\n  K: function K(date, token, localize) {\n    var hours = date.getUTCHours() % 12;\n\n    if (token === 'Ko') {\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function k(date, token, localize) {\n    var hours = date.getUTCHours();\n    if (hours === 0) hours = 24;\n\n    if (token === 'ko') {\n      return localize.ordinalNumber(hours, {\n        unit: 'hour'\n      });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function m(date, token, localize) {\n    if (token === 'mo') {\n      return localize.ordinalNumber(date.getUTCMinutes(), {\n        unit: 'minute'\n      });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n  // Second\n  s: function s(date, token, localize) {\n    if (token === 'so') {\n      return localize.ordinalNumber(date.getUTCSeconds(), {\n        unit: 'second'\n      });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n  // Fraction of second\n  S: function S(date, token) {\n    return lightFormatters.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function X(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return 'Z';\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'X':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n\n      case 'XXXX':\n      case 'XX':\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n\n      case 'XXXXX':\n      case 'XXX': // Hours and minutes with `:` delimiter\n\n      default:\n        return formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function x(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'x':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n\n      case 'xxxx':\n      case 'xx':\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n\n      case 'xxxxx':\n      case 'xxx': // Hours and minutes with `:` delimiter\n\n      default:\n        return formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (GMT)\n  O: function O(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'O':\n      case 'OO':\n      case 'OOO':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');\n      // Long\n\n      case 'OOOO':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Timezone (specific non-location)\n  z: function z(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'z':\n      case 'zz':\n      case 'zzz':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');\n      // Long\n\n      case 'zzzz':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':');\n    }\n  },\n  // Seconds timestamp\n  t: function t(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = Math.floor(originalDate.getTime() / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function T(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = originalDate.getTime();\n    return addLeadingZeros(timestamp, token.length);\n  }\n};\n\nfunction formatTimezoneShort(offset, dirtyDelimiter) {\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = Math.floor(absOffset / 60);\n  var minutes = absOffset % 60;\n\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n\n  var delimiter = dirtyDelimiter || '';\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {\n  if (offset % 60 === 0) {\n    var sign = offset > 0 ? '-' : '+';\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n\n  return formatTimezone(offset, dirtyDelimiter);\n}\n\nfunction formatTimezone(offset, dirtyDelimiter) {\n  var delimiter = dirtyDelimiter || '';\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);\n  var minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n\nexport default formatters;","var dateLongFormatter = function dateLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'P':\n      return formatLong.date({\n        width: 'short'\n      });\n\n    case 'PP':\n      return formatLong.date({\n        width: 'medium'\n      });\n\n    case 'PPP':\n      return formatLong.date({\n        width: 'long'\n      });\n\n    case 'PPPP':\n    default:\n      return formatLong.date({\n        width: 'full'\n      });\n  }\n};\n\nvar timeLongFormatter = function timeLongFormatter(pattern, formatLong) {\n  switch (pattern) {\n    case 'p':\n      return formatLong.time({\n        width: 'short'\n      });\n\n    case 'pp':\n      return formatLong.time({\n        width: 'medium'\n      });\n\n    case 'ppp':\n      return formatLong.time({\n        width: 'long'\n      });\n\n    case 'pppp':\n    default:\n      return formatLong.time({\n        width: 'full'\n      });\n  }\n};\n\nvar dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {\n  var matchResult = pattern.match(/(P+)(p+)?/) || [];\n  var datePattern = matchResult[1];\n  var timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  var dateTimeFormat;\n\n  switch (datePattern) {\n    case 'P':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'short'\n      });\n      break;\n\n    case 'PP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'medium'\n      });\n      break;\n\n    case 'PPP':\n      dateTimeFormat = formatLong.dateTime({\n        width: 'long'\n      });\n      break;\n\n    case 'PPPP':\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: 'full'\n      });\n      break;\n  }\n\n  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));\n};\n\nvar longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};\nexport default longFormatters;","var protectedDayOfYearTokens = ['D', 'DD'];\nvar protectedWeekYearTokens = ['YY', 'YYYY'];\nexport function isProtectedDayOfYearToken(token) {\n  return protectedDayOfYearTokens.indexOf(token) !== -1;\n}\nexport function isProtectedWeekYearToken(token) {\n  return protectedWeekYearTokens.indexOf(token) !== -1;\n}\nexport function throwProtectedError(token, format, input) {\n  if (token === 'YYYY') {\n    throw new RangeError(\"Use `yyyy` instead of `YYYY` (in `\".concat(format, \"`) for formatting years to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === 'YY') {\n    throw new RangeError(\"Use `yy` instead of `YY` (in `\".concat(format, \"`) for formatting years to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === 'D') {\n    throw new RangeError(\"Use `d` instead of `D` (in `\".concat(format, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === 'DD') {\n    throw new RangeError(\"Use `dd` instead of `DD` (in `\".concat(format, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  }\n}","var formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: 'less than a second',\n    other: 'less than {{count}} seconds'\n  },\n  xSeconds: {\n    one: '1 second',\n    other: '{{count}} seconds'\n  },\n  halfAMinute: 'half a minute',\n  lessThanXMinutes: {\n    one: 'less than a minute',\n    other: 'less than {{count}} minutes'\n  },\n  xMinutes: {\n    one: '1 minute',\n    other: '{{count}} minutes'\n  },\n  aboutXHours: {\n    one: 'about 1 hour',\n    other: 'about {{count}} hours'\n  },\n  xHours: {\n    one: '1 hour',\n    other: '{{count}} hours'\n  },\n  xDays: {\n    one: '1 day',\n    other: '{{count}} days'\n  },\n  aboutXWeeks: {\n    one: 'about 1 week',\n    other: 'about {{count}} weeks'\n  },\n  xWeeks: {\n    one: '1 week',\n    other: '{{count}} weeks'\n  },\n  aboutXMonths: {\n    one: 'about 1 month',\n    other: 'about {{count}} months'\n  },\n  xMonths: {\n    one: '1 month',\n    other: '{{count}} months'\n  },\n  aboutXYears: {\n    one: 'about 1 year',\n    other: 'about {{count}} years'\n  },\n  xYears: {\n    one: '1 year',\n    other: '{{count}} years'\n  },\n  overXYears: {\n    one: 'over 1 year',\n    other: 'over {{count}} years'\n  },\n  almostXYears: {\n    one: 'almost 1 year',\n    other: 'almost {{count}} years'\n  }\n};\n\nvar formatDistance = function formatDistance(token, count, options) {\n  var result;\n  var tokenValue = formatDistanceLocale[token];\n\n  if (typeof tokenValue === 'string') {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace('{{count}}', count.toString());\n  }\n\n  if (options !== null && options !== void 0 && options.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return 'in ' + result;\n    } else {\n      return result + ' ago';\n    }\n  }\n\n  return result;\n};\n\nexport default formatDistance;","export default function buildFormatLongFn(args) {\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // TODO: Remove String()\n    var width = options.width ? String(options.width) : args.defaultWidth;\n    var format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}","import buildFormatLongFn from \"../../../_lib/buildFormatLongFn/index.js\";\nvar dateFormats = {\n  full: 'EEEE, MMMM do, y',\n  long: 'MMMM do, y',\n  medium: 'MMM d, y',\n  short: 'MM/dd/yyyy'\n};\nvar timeFormats = {\n  full: 'h:mm:ss a zzzz',\n  long: 'h:mm:ss a z',\n  medium: 'h:mm:ss a',\n  short: 'h:mm a'\n};\nvar dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: '{{date}}, {{time}}',\n  short: '{{date}}, {{time}}'\n};\nvar formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: 'full'\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: 'full'\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: 'full'\n  })\n};\nexport default formatLong;","var formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: 'P'\n};\n\nvar formatRelative = function formatRelative(token, _date, _baseDate, _options) {\n  return formatRelativeLocale[token];\n};\n\nexport default formatRelative;","export default function buildLocalizeFn(args) {\n  return function (dirtyIndex, options) {\n    var context = options !== null && options !== void 0 && options.context ? String(options.context) : 'standalone';\n    var valuesArray;\n\n    if (context === 'formatting' && args.formattingValues) {\n      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      var _defaultWidth = args.defaultWidth;\n\n      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[_width] || args.values[_defaultWidth];\n    }\n\n    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex; // @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n\n    return valuesArray[index];\n  };\n}","import buildLocalizeFn from \"../../../_lib/buildLocalizeFn/index.js\";\nvar eraValues = {\n  narrow: ['B', 'A'],\n  abbreviated: ['BC', 'AD'],\n  wide: ['Before Christ', 'Anno Domini']\n};\nvar quarterValues = {\n  narrow: ['1', '2', '3', '4'],\n  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],\n  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']\n}; // Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\n\nvar monthValues = {\n  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],\n  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n};\nvar dayValues = {\n  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n};\nvar dayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  }\n};\nvar formattingDayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  }\n};\n\nvar ordinalNumber = function ordinalNumber(dirtyNumber, _options) {\n  var number = Number(dirtyNumber); // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  var rem100 = number % 100;\n\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st';\n\n      case 2:\n        return number + 'nd';\n\n      case 3:\n        return number + 'rd';\n    }\n  }\n\n  return number + 'th';\n};\n\nvar localize = {\n  ordinalNumber: ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: 'wide'\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: 'wide',\n    argumentCallback: function argumentCallback(quarter) {\n      return quarter - 1;\n    }\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: 'wide'\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: 'wide'\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: 'wide',\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: 'wide'\n  })\n};\nexport default localize;","export default function buildMatchFn(args) {\n  return function (string) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var width = options.width;\n    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    var matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n\n    var matchedString = matchResult[0];\n    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {\n      return pattern.test(matchedString);\n    }) : findKey(parsePatterns, function (pattern) {\n      return pattern.test(matchedString);\n    });\n    var value;\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    var rest = string.slice(matchedString.length);\n    return {\n      value: value,\n      rest: rest\n    };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (var key in object) {\n    if (object.hasOwnProperty(key) && predicate(object[key])) {\n      return key;\n    }\n  }\n\n  return undefined;\n}\n\nfunction findIndex(array, predicate) {\n  for (var key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n\n  return undefined;\n}","import buildMatchFn from \"../../../_lib/buildMatchFn/index.js\";\nimport buildMatchPatternFn from \"../../../_lib/buildMatchPatternFn/index.js\";\nvar matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nvar parseOrdinalNumberPattern = /\\d+/i;\nvar matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nvar parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nvar matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nvar parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nvar matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nvar parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nvar matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nvar parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nvar matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nvar parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nvar match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: function valueCallback(value) {\n      return parseInt(value, 10);\n    }\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: 'any'\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: 'any',\n    valueCallback: function valueCallback(index) {\n      return index + 1;\n    }\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: 'any'\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: 'any'\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: 'any',\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: 'any'\n  })\n};\nexport default match;","export default function buildMatchPatternFn(args) {\n  return function (string) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    var matchedString = matchResult[0];\n    var parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    var rest = string.slice(matchedString.length);\n    return {\n      value: value,\n      rest: rest\n    };\n  };\n}","import defaultLocale from \"../../locale/en-US/index.js\";\nexport default defaultLocale;","import formatDistance from \"./_lib/formatDistance/index.js\";\nimport formatLong from \"./_lib/formatLong/index.js\";\nimport formatRelative from \"./_lib/formatRelative/index.js\";\nimport localize from \"./_lib/localize/index.js\";\nimport match from \"./_lib/match/index.js\";\n\n/**\n * @type {Locale}\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}\n * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}\n */\nvar locale = {\n  code: 'en-US',\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0\n    /* Sunday */\n    ,\n    firstWeekContainsDate: 1\n  }\n};\nexport default locale;","import isValid from \"../isValid/index.js\";\nimport subMilliseconds from \"../subMilliseconds/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport formatters from \"../_lib/format/formatters/index.js\";\nimport longFormatters from \"../_lib/format/longFormatters/index.js\";\nimport getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport { isProtectedDayOfYearToken, isProtectedWeekYearToken, throwProtectedError } from \"../_lib/protectedTokens/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport { getDefaultOptions } from \"../_lib/defaultOptions/index.js\";\nimport defaultLocale from \"../_lib/defaultLocale/index.js\"; // This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\n\nvar formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g; // This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\n\nvar longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nvar escapedStringRegExp = /^'([^]*?)'?$/;\nvar doubleQuoteRegExp = /''/g;\nvar unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n/**\n * @name format\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * >  Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}\n *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param {Date|Number} date - the original date\n * @param {String} format - the string of tokens\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is\n * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;\n *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;\n *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @returns {String} the formatted date string\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `options.locale` must contain `localize` property\n * @throws {RangeError} `options.locale` must contain `formatLong` property\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7\n * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws {RangeError} format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\n\nexport default function format(dirtyDate, dirtyFormatStr, options) {\n  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;\n\n  requiredArgs(2, arguments);\n  var formatStr = String(dirtyFormatStr);\n  var defaultOptions = getDefaultOptions();\n  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;\n  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');\n  }\n\n  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  if (!locale.localize) {\n    throw new RangeError('locale must contain localize property');\n  }\n\n  if (!locale.formatLong) {\n    throw new RangeError('locale must contain formatLong property');\n  }\n\n  var originalDate = toDate(dirtyDate);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError('Invalid time value');\n  } // Convert the date in system timezone to the same date in UTC+00:00 timezone.\n  // This ensures that when UTC functions will be implemented, locales will be compatible with them.\n  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376\n\n\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);\n  var utcDate = subMilliseconds(originalDate, timezoneOffset);\n  var formatterOptions = {\n    firstWeekContainsDate: firstWeekContainsDate,\n    weekStartsOn: weekStartsOn,\n    locale: locale,\n    _originalDate: originalDate\n  };\n  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {\n    var firstCharacter = substring[0];\n\n    if (firstCharacter === 'p' || firstCharacter === 'P') {\n      var longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale.formatLong);\n    }\n\n    return substring;\n  }).join('').match(formattingTokensRegExp).map(function (substring) {\n    // Replace two single quote characters with one single quote character\n    if (substring === \"''\") {\n      return \"'\";\n    }\n\n    var firstCharacter = substring[0];\n\n    if (firstCharacter === \"'\") {\n      return cleanEscapedString(substring);\n    }\n\n    var formatter = formatters[firstCharacter];\n\n    if (formatter) {\n      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));\n      }\n\n      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));\n      }\n\n      return formatter(utcDate, substring, locale.localize, formatterOptions);\n    }\n\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');\n    }\n\n    return substring;\n  }).join('');\n  return result;\n}\n\nfunction cleanEscapedString(input) {\n  var matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}","/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport default function getTimezoneOffsetInMilliseconds(date) {\n  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n  utcDate.setUTCFullYear(date.getFullYear());\n  return date.getTime() - utcDate.getTime();\n}","import React, { useState, useRef, useEffect, Component } from \"react\"\nimport logo from \"./logo.jpg\"\n// @ts-ignore\nimport sound from \"./ding.mp3\"\nimport image1 from \"./test/1.jpeg\"\nimport image2 from \"./test/2.jpeg\"\nimport image3 from \"./test/3.jpeg\"\nimport image4 from \"./test/4.jpeg\"\n// @ts-ignore\nimport image5 from \"./test/5.jpeg\"\n// @ts-ignore\nimport image6 from \"./test/6.jpeg\"\n// @ts-ignore\nimport image7 from \"./test/7.jpeg\"\n// @ts-ignore\nimport image8 from \"./test/8.jpeg\"\n// @ts-ignore\nimport image9 from \"./test/9.jpeg\"\n// @ts-ignore\nimport test3 from \"./test/test3.png\"\n// @ts-ignore\nimport noise from \"./test/noise.jpeg\"\n// @ts-ignore\nimport line2 from \"./test/line2.png\"\n// @ts-ignore\nimport matt1 from \"./test/matt1.jpeg\"\n// @ts-ignore\nimport matt2 from \"./test/matt2.jpeg\"\n// @ts-ignore\nimport matt3 from \"./test/matt3.jpeg\"\n\n// @ts-ignore\nimport algoRef from \"./test/algoRef.jpeg\"\n// @ts-ignore\nimport algoRefLine from \"./test/algoRefLine.jpeg\"\n\n// @ts-ignore\nimport { compareImages } from \"./compareImages\"\nimport { format } from \"date-fns\"\n\nimport piexif from \"./piexifjs\"\n\nimport {\n\tModal,\n\tModalOverlay,\n\tModalContent,\n\tModalHeader,\n\tModalFooter,\n\tModalBody,\n\tModalCloseButton,\n\tuseDisclosure,\n\tButton,\n\tBox,\n\tFlex,\n\tText,\n\tHeading,\n\tuseRadio,\n\tuseRadioGroup,\n\tHStack,\n\tStack,\n\tCheckbox,\n\tNumberInput,\n\tNumberInputField,\n\tNumberInputStepper,\n\tNumberIncrementStepper,\n\tNumberDecrementStepper,\n\tFormControl,\n\tFormLabel,\n\tSwitch,\n} from \"@chakra-ui/react\"\n// @ts-ignore\nimport { getStorage, ref, uploadString } from \"firebase/storage\"\nimport { initializeApp } from \"firebase/app\"\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyBYAQRyqjZ-vjXT1FikWjmVNDpHe4tiyJs\",\n\n\tauthDomain: \"space-exposure-d0379.firebaseapp.com\",\n\n\tprojectId: \"space-exposure-d0379\",\n\n\tstorageBucket: \"space-exposure-d0379.appspot.com\",\n\n\tmessagingSenderId: \"963000608298\",\n\n\tappId: \"1:963000608298:web:985c5a76757cdd41f9c553\",\n}\n\n// Initialize Firebase\ninitializeApp(firebaseConfig)\n\n// @ts-ignore\nconst storageRef = getStorage()\n\nconst loadImage = (url) =>\n\tnew Promise((resolve, reject) => {\n\t\tconst img = new Image()\n\t\timg.addEventListener(\"load\", () => resolve(img))\n\t\timg.addEventListener(\"error\", (err) => reject(err))\n\t\timg.src = url\n\t})\n\nfunction sleep(ms) {\n\treturn new Promise((resolve) => setTimeout(resolve, ms))\n}\n// 1. Create a component that consumes the `useRadio` hook\nfunction RadioCard(props) {\n\tconst { getInputProps, getCheckboxProps } = useRadio(props)\n\n\tconst input = getInputProps()\n\tconst checkbox = getCheckboxProps()\n\n\treturn (\n\t\t<Box as=\"label\">\n\t\t\t<input {...input} />\n\t\t\t<Box\n\t\t\t\t{...checkbox}\n\t\t\t\tcursor=\"pointer\"\n\t\t\t\tborderWidth=\"1px\"\n\t\t\t\tborderRadius=\"md\"\n\t\t\t\tboxShadow=\"md\"\n\t\t\t\tfontSize=\"sm\"\n\t\t\t\tcolor=\"#2D3748\"\n\t\t\t\t_checked={{\n\t\t\t\t\tbg: \"#3182ce\",\n\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t// borderColor: '#3182ce',\n\t\t\t\t\t// borderWidth: '4px'\n\t\t\t\t}}\n\t\t\t\t_focus={{\n\t\t\t\t\tboxShadow: \"outline\",\n\t\t\t\t}}\n\t\t\t\tpx={5}\n\t\t\t\tpy={3}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nfunction lineAlgorithm(imageData, debug = false) {\n\t// Noise threshold\n\tvar centerPixel = (imageData.width / 2) * (imageData.height / 2) * 4\n\tvar PIXEL_SCORE_THRESHOLD =\n\t\t48 +\n\t\tMath.min(\n\t\t\t(imageData.data[centerPixel] +\n\t\t\t\timageData.data[centerPixel + 1] +\n\t\t\t\timageData.data[centerPixel + 2]) /\n\t\t\t\t3,\n\t\t\t80\n\t\t)\n\tconsole.log({ PIXEL_SCORE_THRESHOLD })\n\tlet rows = imageData.height\n\tlet cols = imageData.width\n\n\tlet c\n\tlet ctx\n\tlet imgData\n\n\tif (debug) {\n\t\tc = document.getElementById(\"debug2\")\n\t\t// @ts-ignore\n\t\tctx = c.getContext(\"2d\")\n\t\timgData = ctx.createImageData(imageData.width, imageData.height)\n\t\t// @ts-ignore\n\t\tc.width = imageData.width\n\t\t// @ts-ignore\n\t\tc.height = imageData.height\n\t}\n\n\tlet dp = Array(rows).fill({})\n\tlet objects = {}\n\tlet objectCount = 1\n\tlet longestObject = {\n\t\tistart: 0,\n\t\tiend: 0,\n\t\tjstart: 0,\n\t\tjend: 0,\n\t\tsize: 0,\n\t}\n\n\tfunction getSize(obj) {\n\t\treturn Math.sqrt(\n\t\t\t(obj.istart - obj.iend) ** 2 + (obj.jstart - obj.jend) ** 2\n\t\t)\n\t}\n\tlet count = 0\n\n\tfor (let i = 0; i < rows; i++) {\n\t\tif (count > 1000) {\n\t\t\tif (debug) {\n\t\t\t\tctx.putImageData(imgData, 0, 0)\n\t\t\t}\n\t\t\treturn { longestObject }\n\t\t}\n\t\tfor (let j = 0; j < cols; j++) {\n\t\t\tif (count > 1000) {\n\t\t\t\tif (debug) {\n\t\t\t\t\tctx.putImageData(imgData, 0, 0)\n\t\t\t\t}\n\t\t\t\treturn { longestObject }\n\t\t\t}\n\t\t\tlet k = (i * cols + j) * 4\n\t\t\tlet r = imageData.data[k]\n\t\t\tlet g = imageData.data[k + 1]\n\t\t\tlet b = imageData.data[k + 2]\n\t\t\tlet pixelScore = (r + g + b) / 3\n\n\t\t\tif (pixelScore >= PIXEL_SCORE_THRESHOLD) {\n\t\t\t\tif (debug) {\n\t\t\t\t\timgData.data[k] = 255\n\t\t\t\t\timgData.data[k + 1] = 0\n\t\t\t\t\timgData.data[k + 2] = 0\n\t\t\t\t\timgData.data[k + 3] = 255\n\t\t\t\t}\n\t\t\t\tcount++\n\t\t\t\tlet left\n\t\t\t\tlet topLeft\n\t\t\t\tlet top\n\t\t\t\tlet topRight\n\t\t\t\t// [0, 1, 0],\n\t\t\t\t// [0, 1, 0],\n\n\t\t\t\t// Add point to existing objects, or create if does not exist\n\t\t\t\tif (j > 0 && dp[i][j - 1]) {\n\t\t\t\t\t// console.log(\"LEFT\")\n\t\t\t\t\tleft = dp[i][j - 1]\n\t\t\t\t\tdp[i] = { ...dp[i], [j]: left }\n\t\t\t\t\tdp[i] = { ...dp[i], [j - 1]: left }\n\n\t\t\t\t\tleft.istart = Math.min(i, left.istart)\n\t\t\t\t\tleft.iend = Math.max(i, left.iend)\n\t\t\t\t\tleft.jstart = Math.min(j, left.jstart)\n\t\t\t\t\tleft.jend = Math.max(j, left.jend)\n\t\t\t\t\tleft.size = getSize(left)\n\t\t\t\t\t// Update longest Object i,j coordinates and size\n\t\t\t\t\tif (left.size > longestObject.size) {\n\t\t\t\t\t\tlongestObject = left\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i > 0 && j > 0 && dp[i - 1][j - 1]) {\n\t\t\t\t\t// console.log('TOP LEFT')\n\t\t\t\t\ttopLeft = dp[i - 1][j - 1]\n\t\t\t\t\tdp[i] = { ...dp[i], [j]: topLeft }\n\t\t\t\t\tdp[i] = { ...dp[i], [j - 1]: topLeft }\n\n\t\t\t\t\ttopLeft.istart = Math.min(i, topLeft.istart)\n\t\t\t\t\ttopLeft.iend = Math.max(i, topLeft.iend)\n\t\t\t\t\ttopLeft.jstart = Math.min(j, topLeft.jstart)\n\t\t\t\t\ttopLeft.jend = Math.max(j, topLeft.jend)\n\t\t\t\t\ttopLeft.size = getSize(topLeft)\n\n\t\t\t\t\t// Update longest Object i,j coordinates and size\n\t\t\t\t\tif (topLeft.size > longestObject.size) {\n\t\t\t\t\t\tlongestObject = topLeft\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i > 0 && dp[i - 1][j]) {\n\t\t\t\t\ttop = dp[i - 1][j]\n\t\t\t\t\tdp[i] = { ...dp[i], [j]: top }\n\t\t\t\t\tdp[i] = { ...dp[i], [j - 1]: top }\n\n\t\t\t\t\ttop.istart = Math.min(i, top.istart)\n\t\t\t\t\ttop.iend = Math.max(i, top.iend)\n\t\t\t\t\ttop.jstart = Math.min(j, top.jstart)\n\t\t\t\t\ttop.jend = Math.max(j, top.jend)\n\t\t\t\t\ttop.size = getSize(top)\n\n\t\t\t\t\t// Update longest Object i,j coordinates and size\n\t\t\t\t\tif (top.size > longestObject.size) {\n\t\t\t\t\t\tlongestObject = top\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i > 0 && j < cols - 1 && dp[i - 1][j + 1]) {\n\t\t\t\t\t// console.log(\"TOP RIGHT\")\n\t\t\t\t\ttopRight = dp[i - 1][j + 1]\n\t\t\t\t\tdp[i] = { ...dp[i], [j]: topRight }\n\t\t\t\t\tdp[i] = { ...dp[i], [j - 1]: topRight }\n\n\t\t\t\t\ttopRight.istart = Math.min(i, topRight.istart)\n\t\t\t\t\ttopRight.iend = Math.max(i, topRight.iend)\n\t\t\t\t\ttopRight.jstart = Math.min(j, topRight.jstart)\n\t\t\t\t\ttopRight.jend = Math.max(j, topRight.jend)\n\n\t\t\t\t\ttopRight.size = getSize(topRight)\n\n\t\t\t\t\t// Update longest Object i,j coordinates and size\n\t\t\t\t\tif (topRight.size > longestObject.size) {\n\t\t\t\t\t\tlongestObject = topRight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!left && !top && !topLeft && !topRight) {\n\t\t\t\t\t// console.log(\"NEW OBJECT\")\n\t\t\t\t\tconst newObject = {\n\t\t\t\t\t\tistart: i,\n\t\t\t\t\t\tiend: i,\n\t\t\t\t\t\tjstart: j,\n\t\t\t\t\t\tjend: j,\n\t\t\t\t\t\tsize: 1,\n\t\t\t\t\t}\n\t\t\t\t\tdp[i] = { ...dp[i], [j]: newObject }\n\t\t\t\t\tobjects = { ...objects, [objectCount]: newObject }\n\t\t\t\t\tobjectCount++\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// console.log({objects})\n\t// console.log({objectCount})\n\n\t// console.log({longestObject})\n\t// console.log(JSON.parse(JSON.stringify(dp)))\n\tif (debug) {\n\t\tctx.putImageData(imgData, 0, 0)\n\t}\n\tconsole.log({ count })\n\treturn { longestObject }\n}\n\n// async function onBitmap(\n// \tbitmap,\n// \tnumber = 0,\n// \tdate = new Date(),\n// \tgroupDate = new Date(),\n// \tlightenContext,\n// \tdifferenceContext\n// ) {\n// \tconsole.log(bitmap)\n// \tconst DOWNSAMPLE = 3\n\n// \tconst downWidth = bitmap.width / DOWNSAMPLE\n// \tconst downHeight = bitmap.height / DOWNSAMPLE\n\n// \t// If frames 0-3, just build up lighten and difference image\n// \tif (number % 3 !== 0) {\n// \t\tconsole.log(`drawing frame ${number}`)\n// \t\tlightenContext.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n// \t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n// \t}\n// \t// Do streak detection, save image if has streak, reset canvases\n// \telse if (number !== 0) {\n// \t\tconsole.log(`drawing frame ${number} and checking for streak`)\n// \t\tlightenContext.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n// \t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n\n// \t\tconst imageData = differenceContext.getImageData(\n// \t\t\t0,\n// \t\t\t0,\n// \t\t\tdownWidth,\n// \t\t\tdownHeight\n// \t\t)\n// \t\tconst { longestObject } = lineAlgorithm(imageData)\n// \t\tconsole.log({ longestObject })\n// \t\t// Streak found, create final image\n// \t\tif (longestObject.size > 10 && longestObject.size < 500) {\n// \t\t\tvar zeroth = {}\n// \t\t\tlet exif = {}\n// \t\t\tlet gps = {}\n// \t\t\texif[piexif.ExifIFD.DateTimeOriginal] = format(\n// \t\t\t\tnew Date(date),\n// \t\t\t\t\"yyyy:MM:dd HH:mm:SS\"\n// \t\t\t)\n// \t\t\texif[piexif.ExifIFD.ExposureTime] = 4\n// \t\t\texif[36880] = \"+08:00\"\n// \t\t\tvar lat = -32.05\n// \t\t\tvar lng = 115.9\n// \t\t\tgps[piexif.GPSIFD.GPSLatitudeRef] = lat < 0 ? \"S\" : \"N\"\n// \t\t\tgps[piexif.GPSIFD.GPSLatitude] = piexif.GPSHelper.degToDmsRational(lat)\n// \t\t\tgps[piexif.GPSIFD.GPSLongitudeRef] = lng < 0 ? \"W\" : \"E\"\n// \t\t\tgps[piexif.GPSIFD.GPSLongitude] = piexif.GPSHelper.degToDmsRational(lng)\n// \t\t\tvar exifObj = { \"0th\": zeroth, Exif: exif, GPS: gps }\n// \t\t\tvar exifbytes = piexif.dump(exifObj)\n\n// \t\t\t// @ts-ignore\n// \t\t\tconsole.log(offScreenCanvasLighten.current)\n\n// \t\t\tconst canvas = document.createElement(\"canvas\")\n// \t\t\tcanvas.width = bitmap.width\n// \t\t\tcanvas.height = bitmap.height\n// \t\t\tconst ctx = canvas.getContext(\"2d\")\n// \t\t\tctx.drawImage(\n// \t\t\t\toffScreenCanvasLighten.current,\n// \t\t\t\t0,\n// \t\t\t\t0,\n// \t\t\t\tbitmap.width,\n// \t\t\t\tbitmap.height\n// \t\t\t)\n\n// \t\t\tconst jpegData = canvas.toDataURL(\"image/jpeg\", 0.95)\n\n// \t\t\tvar newJpeg = piexif.insert(exifbytes, jpegData)\n\n// \t\t\tvar imagesRef = ref(\n// \t\t\t\tstorageRef,\n// \t\t\t\t`${groupDate}/${new Date(date).toString()}`\n// \t\t\t)\n// \t\t\tuploadString(imagesRef, newJpeg, \"data_url\")\n// \t\t\tconsole.log(\n// \t\t\t\t`uploaded to firebase ${groupDate}/${new Date(date).toString()}`\n// \t\t\t)\n// \t\t\t// var anchor = document.createElement(\"a\")\n// \t\t\t// anchor.href = newJpeg\n// \t\t\t// anchor.download = `${new Date(date)\n// \t\t\t// \t.toString()\n// \t\t\t// \t// @ts-ignore\n// \t\t\t// \t.replaceAll(\" \", \"_\")}.jpg`\n// \t\t\t// anchor.click()\n\n// \t\t\tconsole.log(\"pushing bitmap\")\n// \t\t\t// @ts-ignore\n// \t\t\treturn imageBMP.current.push({\n// \t\t\t\tjpeg: newJpeg,\n// \t\t\t\tdate,\n// \t\t\t\tlongestObject,\n// \t\t\t})\n// \t\t}\n// \t\t// reset canvases\n// \t\tlightenContext.clearRect(0, 0, bitmap.width, bitmap.height)\n// \t\tdifferenceContext.clearRect(0, 0, downWidth, downHeight)\n// \t}\n// \t// First frame, no streak logic\n// \telse if (number === 0) {\n// \t\tlightenContext.drawImage(bitmap, 0, 0)\n// \t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n// \t}\n\n// \t// Check for longest object\n\n// \t// \tif (frameCount === 8) {\n// \t// \t\tconst bitmap = await createImageBitmap(frame)\n// \t// \t\tlet width = bitmap.width / 3\n// \t// \t\tlet height = bitmap.height / 3\n// \t// \t\tcanvasLighten.width = width\n// \t// \t\tcanvasLighten.height = height\n// \t// \t\t// @ts-ignore\n// \t// \t\tctx.globalCompositeOperation = \"lighten\"\n// \t// \t}\n// \t// \tif (frameCount > 2 && frame.timestamp > last) {\n// \t// \t\tconst date = new Date()\n// \t// \t\tif (frameCount > 7) {\n// \t// \t\t\tconst bitmap = await createImageBitmap(frame)\n// \t// \t\t\tlet width = bitmap.width / 3\n// \t// \t\t\tlet height = bitmap.height / 3\n// \t// \t\t\tif (!bitmapLastvisible) {\n// \t// \t\t\t\tbitmapLastvisible = bitmap\n// \t// \t\t\t\t// @ts-ignore\n// \t// \t\t\t\tctx.drawImage(bitmapLastvisible, 0, 0, width, height)\n// \t// \t\t\t} else {\n// \t// \t\t\t\tconsole.log(\"drawing against ref\")\n// \t// \t\t\t\t// @ts-ignore\n// \t// \t\t\t\tctx.clearRect(0, 0, width, height)\n\n// \t// \t\t\t\t// @ts-ignore\n// \t// \t\t\t\tctx.drawImage(bitmapLastvisible, 0, 0, width, height)\n// \t// \t\t\t\t// @ts-ignore\n// \t// \t\t\t\tctx.drawImage(bitmap, 0, 0, width, height)\n// \t// \t\t\t}\n// \t// \t\t\t// @ts-ignore\n// \t// \t\t\tconsole.log(ctx.globalCompositeOperation)\n\n// \t// \t\t\t// @ts-ignore\n// \t// \t\t\tconst imageData = ctx.getImageData(0, 0, width, height)\n// \t// \t\t\tif (frameCount > 7) {\n// \t// \t\t\t\tconst { longestObject } = lineAlgorithm(imageData)\n// \t// \t\t\t\tif (longestObject.size > 100) {\n// \t// \t\t\t\t\tbitmapLastvisible = bitmap\n// \t// \t\t\t\t}\n// \t// \t\t\t\tif (longestObject.size > 10 && longestObject.size < 500) {\n// \t// \t\t\t\t\tconsole.log(\"OBJECT FOUND, PUSHING BMP\")\n// \t// \t\t\t\t\t// @ts-ignore\n// \t// \t\t\t\t\timageBMP.current.push({\n// \t// \t\t\t\t\t\tbitmap,\n// \t// \t\t\t\t\t\tdate,\n// \t// \t\t\t\t\t\tlongestObject,\n// \t// \t\t\t\t\t})\n// \t// \t\t\t\t\tcanvasDifference.width = bitmap.width\n// \t// \t\t\t\t\tcanvasDifference.height = bitmap.height\n// \t// \t\t\t\t\tconst ctxB = canvasDifference.getContext(\"2d\")\n// \t// \t\t\t\t\t// @ts-ignore\n// \t// \t\t\t\t\tctxB.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n\n// \t// \t\t\t\t\tcanvasDifference\n// \t// \t\t\t\t\t\t// @ts-ignore\n// \t// \t\t\t\t\t\t.convertToBlob({ type: \"image/jpeg\", quality: 0.95 })\n// \t// \t\t\t\t\t\t.then(async (res) => {\n// \t// \t\t\t\t\t\t\tlet exif = {}\n// \t// \t\t\t\t\t\t\tlet gps = {}\n// \t// \t\t\t\t\t\t\texif[piexif.ExifIFD.DateTimeOriginal] = format(\n// \t// \t\t\t\t\t\t\t\tnew Date(date),\n// \t// \t\t\t\t\t\t\t\t\"yyyy:MM:dd HH:mm:SS\"\n// \t// \t\t\t\t\t\t\t)\n// \t// \t\t\t\t\t\t\texif[piexif.ExifIFD.ExposureTime] = 4\n// \t// \t\t\t\t\t\t\texif[36880] = \"+08:00\"\n// \t// \t\t\t\t\t\t\tvar lat = -32.05\n// \t// \t\t\t\t\t\t\tvar lng = 115.9\n// \t// \t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLatitudeRef] = lat < 0 ? \"S\" : \"N\"\n// \t// \t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLatitude] =\n// \t// \t\t\t\t\t\t\t\tpiexif.GPSHelper.degToDmsRational(lat)\n// \t// \t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLongitudeRef] = lng < 0 ? \"W\" : \"E\"\n// \t// \t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLongitude] =\n// \t// \t\t\t\t\t\t\t\tpiexif.GPSHelper.degToDmsRational(lng)\n// \t// \t\t\t\t\t\t\tvar exifObj = { \"0th\": zeroth, Exif: exif, GPS: gps }\n// \t// \t\t\t\t\t\t\tvar exifbytes = piexif.dump(exifObj)\n\n// \t// \t\t\t\t\t\t\tvar newJpeg = piexif.insert(exifbytes, jpegData)\n// \t// \t\t\t\t\t\t\tvar imagesRef = ref(\n// \t// \t\t\t\t\t\t\t\tstorageRef,\n// \t// \t\t\t\t\t\t\t\t`${group}/${new Date(date).toString()}`\n// \t// \t\t\t\t\t\t\t)\n// \t// \t\t\t\t\t\t\tawait uploadBytes(imagesRef, newJpeg)\n// \t// \t\t\t\t\t\t\tconsole.log(\n// \t// \t\t\t\t\t\t\t\t`uploaded to firebase ${group}/${new Date(\n// \t// \t\t\t\t\t\t\t\t\tdate\n// \t// \t\t\t\t\t\t\t\t).toString()}`\n// \t// \t\t\t\t\t\t\t)\n// \t// \t\t\t\t\t\t})\n// \t// \t\t\t\t}\n// \t// \t\t\t}\n// \t// \t\t}\n// \t// }\n// }\n\nfunction App() {\n\tconst VIEW_WIDTH = Math.max(\n\t\tdocument.documentElement.clientWidth || 0,\n\t\twindow.innerWidth || 0\n\t)\n\tconst TIMER_VALUES = {\n\t\tduration: \"Duration (seconds)\",\n\t\timage_limit: \"Number of Images\",\n\t\tuntil_stopped: \"Until stopped\",\n\t}\n\tconst DOWNSAMPLE = 3\n\n\tconst [isRecording, setIsRecording] = useState(false)\n\n\tconst [isFinished, setIsFinished] = useState(false)\n\tconst [selectedTimer, setSelectedTimer] = useState(TIMER_VALUES.duration)\n\tconst [duration, setDuration] = useState(600)\n\tconst [numberOfImages, setNumberOfImages] = useState(5)\n\tconst [serviceWorkerActive, setServiceWorkerActive] = useState(false)\n\n\tconst [hasAlarm, setHasAlarm] = useState(true)\n\t// @ts-ignore\n\tconst [hasCountdown, setHasCountdown] = useState(true)\n\tconst [debugMessage, setDebugMessage] = useState(\"\")\n\tconst [framesCaptured, setFramesCaptured] = useState(null)\n\tconst [photosSaved, setPhotosSaved] = useState(null)\n\n\tconst [checkedItems, setCheckedItems] = React.useState({})\n\n\tconst { isOpen, onOpen, onClose } = useDisclosure()\n\n\tconst streamRef = useRef()\n\tconst imageBMP = useRef([])\n\tconst offScreenCanvasLighten = useRef()\n\tconst offScreenCanvasDifference = useRef()\n\tconst offScreenCanvasFirestore = useRef()\n\n\t// Initialise offscreen canvases\n\tuseEffect(() => {\n\t\t// @ts-ignore\n\t\toffScreenCanvasLighten.current = new OffscreenCanvas(0, 100)\n\t\t// @ts-ignore\n\t\toffScreenCanvasDifference.current = new OffscreenCanvas(0, 100)\n\t\t// @ts-ignore\n\t\toffScreenCanvasFirestore.current = new OffscreenCanvas(0, 100)\n\t}, [])\n\n\t// onBitmap(\n\t// \tbitmap,\n\t// \tframeCount - 6,\n\t// \tnew Date(),\n\t// \tgroup,\n\t// \tlightenCanvas,\n\t// \tdifferenceCanvas\n\t// )\n\t// Recieve a sequence of images, return possible streak 4s lighten image with exif data\n\tconst dingSound = new Audio(sound)\n\tconsole.log(\"render\")\n\tuseEffect(() => {\n\t\tif (\"serviceWorker\" in navigator) {\n\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\tconsole.log(`A service worker is active: ${registration.active}`)\n\t\t\t\tsetServiceWorkerActive(true)\n\t\t\t\tconsole.log(navigator.serviceWorker)\n\t\t\t\tnavigator.serviceWorker.addEventListener(\"message\", (event) => {\n\t\t\t\t\tconsole.log(\"RECIEVED MESSAGE FROM WORKER\")\n\t\t\t\t\tconst { date, longestObject, jpeg } = event.data\n\t\t\t\t\tconsole.log({ date, longestObject, jpeg })\n\t\t\t\t\tdingSound.play()\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\timageBMP.current.push({\n\t\t\t\t\t\tdate,\n\t\t\t\t\t\tlongestObject,\n\t\t\t\t\t\tjpeg,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\tconsole.error(\"Service workers are not supported.\")\n\t\t}\n\t}, [])\n\n\tasync function startRecording(\n\t\t// @ts-ignore\n\t\t// @ts-ignore\n\t\te,\n\t\tisAndroid = false,\n\t\tiso = 1000,\n\t\ttest = false\n\t) {\n\t\tsetIsRecording(true)\n\t\tsetDebugMessage(\"\")\n\t\tconst constraints = {\n\t\t\taudio: false,\n\t\t\tvideo: {\n\t\t\t\tfacingMode: \"environment\",\n\t\t\t\theight: 8000,\n\t\t\t\twidth: 8000,\n\t\t\t},\n\t\t}\n\t\ttry {\n\t\t\tconst readyServiceWorker = await navigator.serviceWorker.ready\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(constraints)\n\t\t\t// @ts-ignore\n\t\t\tstreamRef.current = stream\n\t\t\thandleSuccess(isAndroid, iso, test)\n\t\t} catch (e) {\n\t\t\tsetIsRecording(false)\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\tasync function handleSuccess(isAndroid = false, iso = 1000, test = false) {\n\t\t// @ts-ignore\n\t\tsetFramesCaptured(0)\n\n\t\timageBMP.current = []\n\t\tconsole.log(\"handleSuccess\")\n\t\tconst stream = streamRef.current\n\t\tconst video = document.querySelector(\"#video-preview\")\n\n\t\t// @ts-ignore\n\t\tvideo.srcObject = stream\n\n\t\t// @ts-ignore\n\t\tconst [track] = stream.getVideoTracks()\n\t\tdocument.createElement(\"canvas\")\n\n\t\tconst capabilities = track.getCapabilities()\n\t\tconst settings = track.getSettings()\n\n\t\tconsole.log(\"Capabilities: \", capabilities)\n\t\tconsole.log(\"Settings: \", settings)\n\t\t// Basic settings for all camera\n\n\t\tif (test || !capabilities.iso) {\n\t\t\tawait track.applyConstraints({\n\t\t\t\tadvanced: [\n\t\t\t\t\t{\n\t\t\t\t\t\tframeRate: Math.max(1, capabilities.frameRate.min),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t})\n\t\t} else if (\n\t\t\t!test &&\n\t\t\tisAndroid &&\n\t\t\tcapabilities.focusMode &&\n\t\t\tcapabilities.focusDistance &&\n\t\t\tcapabilities.zoom &&\n\t\t\tcapabilities.whiteBalanceMode &&\n\t\t\tcapabilities.exposureMode &&\n\t\t\tcapabilities.iso &&\n\t\t\tcapabilities.colorTemperature\n\t\t) {\n\t\t\tawait track.applyConstraints({\n\t\t\t\tadvanced: [\n\t\t\t\t\t{\n\t\t\t\t\t\texposureMode: \"manual\",\n\t\t\t\t\t\twhiteBalanceMode: \"manual\",\n\t\t\t\t\t\tfocusMode: \"manual\",\n\t\t\t\t\t\tcolorTemperature: Math.max(3000, capabilities.colorTemperature.min),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t})\n\t\t\tawait track.applyConstraints({\n\t\t\t\tadvanced: [\n\t\t\t\t\t{\n\t\t\t\t\t\texposureTime: Math.min(10000, capabilities.exposureTime.max),\n\t\t\t\t\t\tzoom: capabilities.zoom.min,\n\t\t\t\t\t\tfocusDistance: capabilities.focusDistance.max,\n\t\t\t\t\t\tiso: Math.min(iso, capabilities.iso.max),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t})\n\t\t} else {\n\t\t\tsetDebugMessage(\n\t\t\t\t\"Sorry your device does not support the correct capture settings\"\n\t\t\t)\n\t\t\tconsole.log(\n\t\t\t\t\"Sorry your device does not support the correct capture settings\"\n\t\t\t)\n\t\t\tstopStreamedVideo()\n\t\t}\n\n\t\tsetTimeout(() => console.log(\"Settings: \", track.getSettings()), 10000)\n\t\tconsole.log(track)\n\t\t// @ts-ignore\n\t\t// eslint-disable-next-line\n\t\tconst readable = new MediaStreamTrackProcessor(track).readable\n\n\t\t// vars to control our read loop\n\t\tlet last = 0\n\t\tlet frameCount = 0\n\t\tlet group = new Date().toString()\n\t\tconst queuingStrategy = new CountQueuingStrategy({ highWaterMark: 1 })\n\n\t\t// @ts-ignore\n\t\tlet lightenContext\n\t\t// @ts-ignore\n\t\tlet differenceContext\n\t\t// @ts-ignore\n\t\tlet firestoreContext\n\n\t\tconst sw = await navigator.serviceWorker.ready\n\t\tconst serviceWorker = sw.active\n\t\tconst writableStream = new WritableStream(\n\t\t\t{\n\t\t\t\twrite: async (frame) => {\n\t\t\t\t\tframeCount++\n\t\t\t\t\tconst START_FRAME = 5\n\n\t\t\t\t\tif (frameCount === 5 && serviceWorker) {\n\t\t\t\t\t\tconst bitmapRef = await createImageBitmap(frame)\n\t\t\t\t\t\tconst diffWidth = bitmapRef.width / 3\n\t\t\t\t\t\tconst diffHeight = bitmapRef.height / 3\n\t\t\t\t\t\tconsole.log(serviceWorker)\n\t\t\t\t\t\tconsole.log({\n\t\t\t\t\t\t\twidth: bitmapRef.width,\n\t\t\t\t\t\t\theight: bitmapRef.height,\n\t\t\t\t\t\t\tdiffWidth,\n\t\t\t\t\t\t\tdiffHeight,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tserviceWorker.postMessage(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\twidth: bitmapRef.width,\n\t\t\t\t\t\t\t\theight: bitmapRef.height,\n\t\t\t\t\t\t\t\tdiffWidth,\n\t\t\t\t\t\t\t\tdiffHeight,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[bitmapRef]\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\t// offScreenCanvasLighten.current.width = bitmapRef.width\n\t\t\t\t\t\t// offScreenCanvasLighten.current.height = bitmapRef.height\n\n\t\t\t\t\t\t// offScreenCanvasDifference.current.width = diffWidth\n\t\t\t\t\t\t// offScreenCanvasDifference.current.height = diffHeight\n\n\t\t\t\t\t\t// offScreenCanvasFirestore.current.width = bitmapRef.width\n\t\t\t\t\t\t// offScreenCanvasFirestore.current.height = bitmapRef.height\n\n\t\t\t\t\t\t// lightenContext = offScreenCanvasLighten.current.getContext(\"2d\", {\n\t\t\t\t\t\t// \twillReadFrequently: true,\n\t\t\t\t\t\t// })\n\t\t\t\t\t\t// lightenContext.globalCompositeOperation = \"lighten\"\n\n\t\t\t\t\t\t// differenceContext = offScreenCanvasDifference.current.getContext(\n\t\t\t\t\t\t// \t\"2d\",\n\t\t\t\t\t\t// \t{ willReadFrequently: true }\n\t\t\t\t\t\t// )\n\t\t\t\t\t\t// differenceContext.globalCompositeOperation = \"difference\"\n\n\t\t\t\t\t\t// firestoreContext = offScreenCanvasFirestore.current.getContext(\"2d\")\n\t\t\t\t\t}\n\n\t\t\t\t\t// Startup frames\n\t\t\t\t\tif (\n\t\t\t\t\t\tframeCount > START_FRAME &&\n\t\t\t\t\t\tframe.timestamp > last &&\n\t\t\t\t\t\tserviceWorker\n\t\t\t\t\t) {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t// let startAlgo = Date.now()\n\t\t\t\t\t\t// const lightenCanvas = offScreenCanvasLighten.current\n\t\t\t\t\t\t// const differenceCanvas = offScreenCanvasDifference.current\n\t\t\t\t\t\tconst bitmap = await createImageBitmap(frame)\n\t\t\t\t\t\tconsole.log(serviceWorker)\n\t\t\t\t\t\tconsole.log({\n\t\t\t\t\t\t\tbitmap,\n\t\t\t\t\t\t\tgroup,\n\t\t\t\t\t\t\tnumber: frameCount - START_FRAME - 1,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tserviceWorker.postMessage(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbitmap,\n\t\t\t\t\t\t\t\tgroup,\n\t\t\t\t\t\t\t\tnumber: frameCount - START_FRAME - 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[bitmap]\n\t\t\t\t\t\t)\n\t\t\t\t\t\t// onBitmap(\n\t\t\t\t\t\t// \tbitmap,\n\t\t\t\t\t\t// \tframeCount - 6,\n\t\t\t\t\t\t// \tnew Date(),\n\t\t\t\t\t\t// \tgroup,\n\t\t\t\t\t\t// \tlightenContext,\n\t\t\t\t\t\t// \tdifferenceContext\n\t\t\t\t\t\t// )\n\t\t\t\t\t}\n\t\t\t\t\tframe.close()\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tsetPhotosSaved(imageBMP.current.length)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tsetFramesCaptured(frameCount - START_FRAME)\n\n\t\t\t\t\t// \t// } else {\n\t\t\t\t\t// \t// \timageBMP.current.push(bitmap)\n\t\t\t\t\t// \t// \tconsole.log(`${last} pushed image`)\n\t\t\t\t\t// \t// }\n\n\t\t\t\t\t// console.log(`Time taken: ${Date.now() - startAlgo}`)\n\t\t\t\t\t// browser only seems to let you have 3 frames open\n\t\t\t\t\t// setTimeout(() => frame.close(), 500)\n\t\t\t\t},\n\t\t\t\tclose: () => console.log(\"stream closed\"),\n\t\t\t\tabort: () => console.log(\"stream aborted\"),\n\t\t\t},\n\t\t\tqueuingStrategy\n\t\t)\n\t\tawait readable.pipeTo(writableStream)\n\t}\n\n\tasync function stopStreamedVideo() {\n\t\tconst videoPreview = document.querySelector(\"#video-preview\")\n\t\t// @ts-ignore\n\t\tvideoPreview.srcObject = null\n\t\tconst stream = streamRef.current\n\n\t\t// @ts-ignore\n\t\tconst videoTracks = stream.getVideoTracks()\n\t\tconsole.log(\"stopping video\")\n\t\tvideoTracks.forEach((track) => {\n\t\t\ttrack.stop()\n\t\t})\n\t\tsetIsRecording(false)\n\t\tonOpen()\n\t\tsleep(1000)\n\t\tsetIsFinished(true)\n\t}\n\n\tconst options = Object.values(TIMER_VALUES)\n\n\tconst { getRootProps, getRadioProps } = useRadioGroup({\n\t\tname: \"timer\",\n\t\tdefaultValue: selectedTimer,\n\t\tonChange: (t) => setSelectedTimer(t),\n\t})\n\n\tconst group = getRootProps()\n\n\t// @ts-ignore\n\t// @ts-ignore\n\tasync function lighterImageStackTest() {\n\t\tconst images = [\n\t\t\timage1,\n\t\t\timage2,\n\t\t\timage3,\n\t\t\t// image4,\n\t\t\t// image5,\n\t\t\t// image6,\n\t\t\t// image7,\n\t\t\t// image8,\n\t\t\t// image9,\n\t\t]\n\n\t\tconst canvas = document.getElementById(\"debug\")\n\n\t\tconst imgs = await Promise.all(images.map(loadImage))\n\t\tconst bmps = await Promise.all(imgs.map((a) => createImageBitmap(a)))\n\t\t// @ts-ignore\n\t\tcanvas.width = bmps[0].width\n\t\t// @ts-ignore\n\t\tcanvas.height = bmps[0].height\n\t\tbmps.map((x) => {\n\t\t\t// @ts-ignore\n\t\t\tconst ctx = canvas.getContext(\"2d\")\n\t\t\tctx.globalCompositeOperation = \"lighten\"\n\t\t\tconsole.log(ctx)\n\t\t\tconsole.log(x)\n\t\t\tctx.drawImage(x, 0, 0)\n\t\t})\n\t\tconsole.log(\"Done\")\n\n\t\t// \tconst imageEl = new Image()\n\n\t\t// \t// Wait for the sprite sheet to load\n\t\t// \timageEl.onload = async () => {\n\t\t// \t\tconst bitmap = await createImageBitmap(imageEl)\n\n\t\t// \t}\n\t\t// \timageEl.src = image\n\t\t// })\n\t}\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tselectedTimer === TIMER_VALUES.image_limit &&\n\t\t\tframesCaptured === numberOfImages * 4\n\t\t) {\n\t\t\tstopStreamedVideo()\n\t\t\tif (hasAlarm) {\n\t\t\t\tdingSound.play()\n\t\t\t}\n\t\t}\n\t}, [framesCaptured])\n\n\t// @ts-ignore\n\t// @ts-ignore\n\tlet imageUrls = [image1, image2]\n\tclass ImagePreview extends Component {\n\t\tcomponentDidMount() {\n\t\t\tvar canvas = document.getElementById(\n\t\t\t\t`suggested-images-${this.props.index}`\n\t\t\t)\n\t\t\t// @ts-ignore\n\t\t\tvar context = canvas.getContext(\"2d\")\n\t\t\tconst { longestObject, jpegUrl } = this.props\n\n\t\t\tif (jpegUrl && longestObject) {\n\t\t\t\tvar img = new Image()\n\t\t\t\timg.src = jpegUrl\n\t\t\t\tcontext.drawImage(\n\t\t\t\t\timg,\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\timg.width - 300,\n\t\t\t\t\t\tMath.max(0, longestObject.jstart * 3 - 100)\n\t\t\t\t\t),\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\timg.height - 292,\n\t\t\t\t\t\tMath.max(0, longestObject.istart * 3 - 100)\n\t\t\t\t\t),\n\t\t\t\t\t300,\n\t\t\t\t\t292,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t300,\n\t\t\t\t\t292\n\t\t\t\t)\n\t\t\t}\n\t\t\t// load image from data url\n\t\t\t// var imageObj = new Image()\n\t\t\t// imageObj.onload = function () {\n\t\t\t// \tcontext.drawImage(this, 0, 0, 350, 450)\n\t\t\t// }\n\t\t\t// console.log(imageObj)\n\t\t\t// imageObj.src = this.props.url\n\t\t}\n\n\t\tshouldComponentUpdate(nextProps) {\n\t\t\treturn this.props.url !== nextProps.url\n\t\t}\n\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<canvas height=\"296px\" id={`suggested-images-${this.props.index}`} />\n\t\t\t)\n\t\t}\n\t}\n\n\tconst handleSelectedImage = (e, i) => {\n\t\tsetCheckedItems({ ...checkedItems, [i]: e.target.checked })\n\t}\n\n\t// @ts-ignore\n\tasync function testCompareImages() {\n\t\tconst images = [\n\t\t\timage1,\n\t\t\timage2,\n\t\t\timage3,\n\t\t\timage4,\n\t\t\t// image5,\n\t\t\t// image6,\n\t\t\t// image7,\n\t\t\t// image8,\n\t\t\t// image9,\n\t\t]\n\n\t\tconst canvas = document.getElementById(\"debug\")\n\t\t// @ts-ignore\n\t\tconst ctx = canvas.getContext(\"2d\")\n\n\t\t// setup\n\t\tconst img = await loadImage(images[0])\n\t\tconst bitmapRef = await createImageBitmap(img)\n\n\t\tconst diffWidth = bitmapRef.width / DOWNSAMPLE\n\t\tconst diffHeight = bitmapRef.height / DOWNSAMPLE\n\n\t\t// @ts-ignore\n\t\toffScreenCanvasLighten.current.width = bitmapRef.width\n\t\t// @ts-ignore\n\t\toffScreenCanvasLighten.current.height = bitmapRef.height\n\n\t\t// @ts-ignore\n\t\toffScreenCanvasDifference.current.width = diffWidth\n\t\t// @ts-ignore\n\t\toffScreenCanvasDifference.current.height = diffHeight\n\n\t\t// @ts-ignore\n\t\toffScreenCanvasFirestore.current.width = bitmapRef.width\n\t\t// @ts-ignore\n\t\toffScreenCanvasFirestore.current.height = bitmapRef.height\n\n\t\t// @ts-ignore\n\t\tconst lightenContext = offScreenCanvasLighten.current.getContext(\"2d\", {\n\t\t\twillReadFrequently: true,\n\t\t})\n\t\tlightenContext.globalCompositeOperation = \"lighten\"\n\n\t\t// @ts-ignore\n\t\tconst differenceContext = offScreenCanvasDifference.current.getContext(\n\t\t\t\"2d\",\n\t\t\t{ willReadFrequently: true }\n\t\t)\n\t\tdifferenceContext.globalCompositeOperation = \"difference\"\n\n\t\t// @ts-ignore\n\t\tconst firestoreContext = offScreenCanvasFirestore.current.getContext(\"2d\")\n\t\timageBMP.current = []\n\t\t// Process images\n\t\tPromise.all(images.map(loadImage))\n\t\t\t.then((imgs) => Promise.all(imgs.map((a) => createImageBitmap(a))))\n\t\t\t.then(async (x) => {\n\t\t\t\tconst startAlgo = Date.now()\n\n\t\t\t\t// @ts-ignore\n\t\t\t\tx.map((bitmap, i) => {\n\t\t\t\t\t// return onBitmap(\n\t\t\t\t\t// \tbitmap,\n\t\t\t\t\t// \ti,\n\t\t\t\t\t// \tnew Date(),\n\t\t\t\t\t// \tstartAlgo,\n\t\t\t\t\t// \tlightenContext,\n\t\t\t\t\t// \tdifferenceContext\n\t\t\t\t\t// )\n\t\t\t\t})\n\n\t\t\t\tawait sleep(1000)\n\t\t\t\tconsole.log(imageBMP.current)\n\t\t\t\tif (imageBMP.current.length > 0) {\n\t\t\t\t\tconsole.log(imageBMP.current)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconst imgSrc = imageBMP.current[0].jpeg\n\n\t\t\t\t\tvar img = document.getElementById(\"debugImg\")\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\timg.width = x[0].width\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\timg.height = x[0].height\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\timg.src = imgSrc\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tctx.drawImage(imageBMP.current[0].difference, 0, 0)\n\t\t\t\t}\n\n\t\t\t\tconst endAlgo = Date.now()\n\t\t\t\tconsole.log({ time: endAlgo - startAlgo })\n\t\t\t})\n\t}\n\n\tasync function testLineAlgorithm() {\n\t\tconst startAlgo = Date.now()\n\t\tconst imageA = await loadImage(image1)\n\t\tconsole.log(\"LINE IS ~52px (/3 = ~17.3\")\n\t\tconst canvas = document.getElementById(\"debug\")\n\t\t// @ts-ignore\n\t\tconst ctx = canvas.getContext(\"2d\", {\n\t\t\twillReadFrequently: true,\n\t\t})\n\t\tlet width = imageA.width / 3\n\t\tlet height = imageA.height / 3\n\t\t// @ts-ignore\n\t\tcanvas.width = width\n\t\t// @ts-ignore\n\t\tcanvas.height = height\n\n\t\tlet imageData\n\t\tctx.drawImage(imageA, 0, 0, width, height)\n\t\timageData = ctx.getImageData(0, 0, width, height)\n\t\tconst { longestObject } = lineAlgorithm(imageData, true)\n\t\tconsole.log(longestObject)\n\t\tconst bitmap = await createImageBitmap(imageA)\n\n\t\tconsole.log(`Time taken: ${Date.now() - startAlgo}`)\n\t\tonOpen()\n\t}\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<header className=\"App-header\">\n\t\t\t\t<Modal\n\t\t\t\t\tisOpen={isOpen}\n\t\t\t\t\tscrollBehavior=\"inside\"\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tonClose()\n\t\t\t\t\t\tvar canvas = document.getElementById(\"download\")\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tvar context = canvas.getContext(\"2d\")\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height)\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tcanvas.width = 0\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tcanvas.height = 0\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ModalOverlay />\n\t\t\t\t\t<ModalContent>\n\t\t\t\t\t\t<ModalHeader>{`Suggested Photos ${\n\t\t\t\t\t\t\timageBMP.current.length\n\t\t\t\t\t\t} / ${Math.floor((framesCaptured || 1) / 4)}`}</ModalHeader>\n\t\t\t\t\t\t<ModalCloseButton />\n\t\t\t\t\t\t<ModalBody>\n\t\t\t\t\t\t\t<Stack spacing={5} id=\"suggestedFrames\" width=\"100%\">\n\t\t\t\t\t\t\t\t{imageBMP.current.map(({ jpeg, longestObject }, i) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Flex key={`checkbox-${i}`}>\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultChecked\n\t\t\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\t\t\tisChecked={checkedItems[i] === false ? false : true}\n\t\t\t\t\t\t\t\t\t\t\t\theight=\"300px\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => handleSelectedImage(e, i)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"300px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius=\"4px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tborder={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckedItems[i] === false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"4px solid grey\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"4px solid #3182ce\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ImagePreview\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"296px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjpegUrl={jpeg}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlongestObject={longestObject}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</ModalBody>\n\t\t\t\t\t\t<ModalFooter>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tonClose()\n\t\t\t\t\t\t\t\t\tvar canvas = document.getElementById(\"download\")\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tvar context = canvas.getContext(\"2d\")\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height)\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tcanvas.width = 0\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tcanvas.height = 0\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmr={3}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\t\t\tisDisabled={\n\t\t\t\t\t\t\t\t\timageBMP.current.length === 0 ||\n\t\t\t\t\t\t\t\t\t!imageBMP.current.find(\n\t\t\t\t\t\t\t\t\t\t(_, i) =>\n\t\t\t\t\t\t\t\t\t\t\tcheckedItems[i] === undefined || checkedItems[i] === true\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tvar canvas = document.getElementById(\"download\")\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tvar context = canvas.getContext(\"2d\")\n\t\t\t\t\t\t\t\t\timageBMP.current.map(({ bitmap, date }, i) => {\n\t\t\t\t\t\t\t\t\t\tif (checkedItems[i] == null || checkedItems[i] === true) {\n\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\tcanvas.width = bitmap.width\n\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\tcanvas.height = bitmap.height\n\t\t\t\t\t\t\t\t\t\t\tcontext.drawImage(bitmap, 0, 0)\n\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\tconst jpegData = canvas.toDataURL(\"image/jpeg\")\n\n\t\t\t\t\t\t\t\t\t\t\tvar zeroth = {}\n\t\t\t\t\t\t\t\t\t\t\tvar exif = {}\n\t\t\t\t\t\t\t\t\t\t\tvar gps = {}\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(new Date())\n\t\t\t\t\t\t\t\t\t\t\texif[piexif.ExifIFD.DateTimeOriginal] = format(\n\t\t\t\t\t\t\t\t\t\t\t\tnew Date(date),\n\t\t\t\t\t\t\t\t\t\t\t\t\"yyyy:MM:dd HH:mm:SS\"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\texif[piexif.ExifIFD.ExposureTime] = 4\n\t\t\t\t\t\t\t\t\t\t\texif[36880] = \"+08:00\"\n\t\t\t\t\t\t\t\t\t\t\tvar lat = -32.05\n\t\t\t\t\t\t\t\t\t\t\tvar lng = 115.9\n\t\t\t\t\t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLatitudeRef] = lat < 0 ? \"S\" : \"N\"\n\t\t\t\t\t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLatitude] =\n\t\t\t\t\t\t\t\t\t\t\t\tpiexif.GPSHelper.degToDmsRational(lat)\n\t\t\t\t\t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLongitudeRef] = lng < 0 ? \"W\" : \"E\"\n\t\t\t\t\t\t\t\t\t\t\tgps[piexif.GPSIFD.GPSLongitude] =\n\t\t\t\t\t\t\t\t\t\t\t\tpiexif.GPSHelper.degToDmsRational(lng)\n\t\t\t\t\t\t\t\t\t\t\tvar exifObj = { \"0th\": zeroth, Exif: exif, GPS: gps }\n\t\t\t\t\t\t\t\t\t\t\tvar exifbytes = piexif.dump(exifObj)\n\n\t\t\t\t\t\t\t\t\t\t\tvar newJpeg = piexif.insert(exifbytes, jpegData)\n\t\t\t\t\t\t\t\t\t\t\tvar anchor = document.createElement(\"a\")\n\t\t\t\t\t\t\t\t\t\t\tanchor.href = newJpeg\n\t\t\t\t\t\t\t\t\t\t\tanchor.download = `${new Date(date)\n\t\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\t\t\t.replaceAll(\" \", \"_\")}.jpg`\n\t\t\t\t\t\t\t\t\t\t\tanchor.click()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ModalFooter>\n\t\t\t\t\t</ModalContent>\n\t\t\t\t</Modal>\n\t\t\t\t<Flex align=\"center\" width=\"100%\">\n\t\t\t\t\t<img src={logo} className=\"App-logo\" alt=\"logo\" />\n\t\t\t\t\t<Heading fontSize=\"4xl\" colorScheme=\"blue\">\n\t\t\t\t\t\tSSA 228.20\n\t\t\t\t\t</Heading>\n\t\t\t\t</Flex>\n\t\t\t\t<Text color=\"InfoText\" fontSize=\"sm\">\n\t\t\t\t\t{debugMessage}\n\t\t\t\t</Text>\n\t\t\t\t{/* <Button\n\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst imageA = new Image()\n\t\t\t\t\t\tconst imageB = new Image()\n\n\t\t\t\t\t\tlet imageABitmap\n\t\t\t\t\t\tlet imageBBitmap\n\n\t\t\t\t\t\t// Wait for the sprite sheet to load\n\t\t\t\t\t\timageA.onload = async () => {\n\t\t\t\t\t\t\tconst bitmap = await createImageBitmap(imageA)\n\t\t\t\t\t\t\timageABitmap = bitmap\n\t\t\t\t\t\t\tconsole.log({ bitmap })\n\t\t\t\t\t\t\tif (imageABitmap && imageBBitmap) {\n\t\t\t\t\t\t\t\tlet res = compareImages(imageABitmap, imageBBitmap, true)\n\t\t\t\t\t\t\t\tif (res.result) {\n\t\t\t\t\t\t\t\t\tsetDebugMessage(`Passed image comparison test ${res.score}`)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDebugMessage(\"Failed image comparison test\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\timageA.src = image1\n\n\t\t\t\t\t\timageB.onload = async () => {\n\t\t\t\t\t\t\tconst bitmap = await createImageBitmap(imageB)\n\t\t\t\t\t\t\timageBBitmap = bitmap\n\t\t\t\t\t\t\tconsole.log({ bitmap })\n\t\t\t\t\t\t\tif (imageABitmap && imageBBitmap) {\n\t\t\t\t\t\t\t\tlet res = compareImages(imageABitmap, imageBBitmap, true)\n\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\tsetDebugMessage(\"Passed image comparison test\")\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDebugMessage(\"Failed image comparison test\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\timageB.src = image2\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tTest Compare Images\n\t\t\t\t</Button> */}\n\t\t\t\t<Box\n\t\t\t\t\tborderWidth=\"1px\"\n\t\t\t\t\tborderRadius=\"lg\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\tminHeight={Math.min(480 / 2, VIEW_WIDTH / 2)}\n\t\t\t\t>\n\t\t\t\t\t<video id=\"video-preview\" autoPlay playsInline></video>\n\t\t\t\t\t<audio />\n\t\t\t\t\t{isRecording ? (\n\t\t\t\t\t\t<></>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Text colorScheme=\"blue\">Image preview here</Text>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t\t<HStack {...group} p=\"4px\">\n\t\t\t\t\t{options.map((value) => {\n\t\t\t\t\t\tconst radio = getRadioProps({ value })\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<RadioCard key={value} {...radio}>\n\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t</RadioCard>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</HStack>\n\t\t\t\t{selectedTimer === TIMER_VALUES.duration && (\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tmy=\"8px\"\n\t\t\t\t\t\tstep={5}\n\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\tdefaultValue={duration}\n\t\t\t\t\t\tmin={10}\n\t\t\t\t\t\tmax={1000}\n\t\t\t\t\t\tw=\"100%\"\n\t\t\t\t\t\tcolor=\"blackAlpha.600\"\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tonChange={(e) => setDuration(e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<NumberInputField />\n\t\t\t\t\t\t<NumberInputStepper>\n\t\t\t\t\t\t\t<NumberIncrementStepper />\n\t\t\t\t\t\t\t<NumberDecrementStepper />\n\t\t\t\t\t\t</NumberInputStepper>\n\t\t\t\t\t</NumberInput>\n\t\t\t\t)}\n\t\t\t\t{selectedTimer === TIMER_VALUES.image_limit && (\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tmy=\"8px\"\n\t\t\t\t\t\tstep={5}\n\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\tdefaultValue={numberOfImages}\n\t\t\t\t\t\tmin={5}\n\t\t\t\t\t\tmax={1000}\n\t\t\t\t\t\tw=\"100%\"\n\t\t\t\t\t\tcolor=\"blackAlpha.600\"\n\t\t\t\t\t\tonChange={(e) => setNumberOfImages(Number(e))}\n\t\t\t\t\t>\n\t\t\t\t\t\t<NumberInputField />\n\t\t\t\t\t\t<NumberInputStepper>\n\t\t\t\t\t\t\t<NumberIncrementStepper />\n\t\t\t\t\t\t\t<NumberDecrementStepper />\n\t\t\t\t\t\t</NumberInputStepper>\n\t\t\t\t\t</NumberInput>\n\t\t\t\t)}\n\t\t\t\t{selectedTimer !== TIMER_VALUES.until_stopped && (\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tdisplay=\"flex\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\tcolor=\"#2D3748\"\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tonChange={({ target }) => setHasAlarm(target.value)}\n\t\t\t\t\t\tmy=\"8px\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormLabel htmlFor=\"alarm\" mb=\"0\">\n\t\t\t\t\t\t\tAlarm when finished\n\t\t\t\t\t\t</FormLabel>\n\t\t\t\t\t\t<Switch id=\"alarm\" defaultChecked isDisabled />\n\t\t\t\t\t</FormControl>\n\t\t\t\t)}\n\t\t\t\t<FormControl display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t<FormLabel\n\t\t\t\t\t\thtmlFor=\"countdown\"\n\t\t\t\t\t\tmb=\"0\"\n\t\t\t\t\t\tcolor=\"#2D3748\"\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tonChange={({ target }) => setHasCountdown(target.value)}\n\t\t\t\t\t\tmy=\"8px\"\n\t\t\t\t\t>\n\t\t\t\t\t\t5 second timer before start\n\t\t\t\t\t</FormLabel>\n\t\t\t\t\t<Switch id=\"countdown\" defaultChecked isDisabled />\n\t\t\t\t</FormControl>\n\n\t\t\t\t{isRecording ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\tisDisabled={!isRecording}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tsetIsFinished(false)\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tstopStreamedVideo(e)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tStop Recording\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Flex direction=\"column\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\tisDisabled={isRecording || !serviceWorkerActive}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tstartRecording(e, true, 10000)\n\t\t\t\t\t\t\t\tsetIsFinished(false)\n\t\t\t\t\t\t\t\tif (selectedTimer === TIMER_VALUES.duration) {\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tdingSound.play()\n\t\t\t\t\t\t\t\t\t\tstopStreamedVideo()\n\t\t\t\t\t\t\t\t\t}, (duration + 5) * 1000)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tStart Recording (Android Max)\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\tisDisabled={isRecording || !serviceWorkerActive}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tstartRecording(e, true, 1600)\n\t\t\t\t\t\t\t\tsetIsFinished(false)\n\t\t\t\t\t\t\t\tif (selectedTimer === TIMER_VALUES.duration) {\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tdingSound.play()\n\t\t\t\t\t\t\t\t\t\tstopStreamedVideo()\n\t\t\t\t\t\t\t\t\t}, (duration + 5) * 1000)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tStart Recording (Android 1600)\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\tisDisabled={isRecording || !serviceWorkerActive}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tstartRecording(e, true, 100)\n\t\t\t\t\t\t\t\tsetIsFinished(false)\n\t\t\t\t\t\t\t\tif (selectedTimer === TIMER_VALUES.duration) {\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tdingSound.play()\n\t\t\t\t\t\t\t\t\t\tstopStreamedVideo()\n\t\t\t\t\t\t\t\t\t}, (duration + 5) * 1000)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tStart Recording (Android 100)\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\t\t\tml=\"5px\"\n\t\t\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\tisDisabled={isRecording || !serviceWorkerActive}\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\ttestLineAlgorithm()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTest line Detection\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Flex>\n\t\t\t\t)}\n\t\t\t\t{/* <Button\n\t\t\t\t\tmt=\"5px\"\n\t\t\t\t\tcolorScheme=\"blue\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t// lighterImageStackTest()\n\t\t\t\t\t\ttestCompareImages()\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tTest compare Images\n\t\t\t\t</Button> */}\n\t\t\t\t{!serviceWorkerActive && <Text fontSize=\"sm\">{`Starting up...`}</Text>}\n\t\t\t\t{framesCaptured !== null && (\n\t\t\t\t\t<Text fontSize=\"sm\">{`Photos taken: ${framesCaptured / 4}`}</Text>\n\t\t\t\t)}\n\t\t\t\t{photosSaved !== null && (\n\t\t\t\t\t<Text fontSize=\"sm\">{`Photos saved: ${photosSaved}`}</Text>\n\t\t\t\t)}\n\t\t\t\t{isFinished && (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tfontSize=\"sm\"\n\t\t\t\t\t\tcolorScheme=\"red\"\n\t\t\t\t\t>{`Finished Recording Successfully`}</Text>\n\t\t\t\t)}\n\t\t\t\t<canvas id=\"download\" height=\"0px\"></canvas>\n\t\t\t\t{/* <canvas id=\"worker\" height=\"0px\"></canvas>\n\t\t\t\n\t\t\t\t<canvas id=\"debug\" height=\"800px\" width=\"600px\"></canvas>\n\t\t\t\t<img id=\"debugImg\" height=\"4032px\" width=\"3024px\" />\n\n\t\t\t\t<Flex justify=\"center\" id=\"capturedFrames\" w=\"100%\">\n\t\t\t\t\t<canvas id=\"debug2\" height=\"800px\" width=\"600px\"></canvas>\n\t\t\t\t</Flex>\n\t\t\t\t<Flex direction=\"column\" id=\"capturedFrames\" w=\"480px\"></Flex> */}\n\t\t\t</header>\n\t\t</div>\n\t)\n}\n\nexport { App, lineAlgorithm }\n","/* eslint-disable */\n\n// This service worker can be customized!\n// See https://developers.google.com/web/tools/workbox/modules\n// for the list of available Workbox modules, or add any other\n// code you'd like.\n// You can also remove this file if you'd prefer not to use a\n// service worker, and the Workbox build step will be skipped.\nimport { initializeApp } from \"firebase/app\"\nimport { getStorage, ref, uploadString } from \"firebase/storage\"\n\nimport { clientsClaim } from \"workbox-core\"\nimport { ExpirationPlugin } from \"workbox-expiration\"\nimport { precacheAndRoute, createHandlerBoundToURL } from \"workbox-precaching\"\nimport { registerRoute } from \"workbox-routing\"\nimport { StaleWhileRevalidate } from \"workbox-strategies\"\nimport { format } from \"date-fns\"\n\nimport piexif from \"./piexifjs\"\n\n// @ts-ignore\nimport XML from \"xhr-shim\"\nimport { lineAlgorithm } from \"./App\"\n\n// @ts-ignore\nglobal[\"XMLHttpRequest\"] = XML\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyBYAQRyqjZ-vjXT1FikWjmVNDpHe4tiyJs\",\n\n\tauthDomain: \"space-exposure-d0379.firebaseapp.com\",\n\n\tprojectId: \"space-exposure-d0379\",\n\n\tstorageBucket: \"space-exposure-d0379.appspot.com\",\n\n\tmessagingSenderId: \"963000608298\",\n\n\tappId: \"1:963000608298:web:985c5a76757cdd41f9c553\",\n}\n\n// Initialize Firebase\ninitializeApp(firebaseConfig)\n\nconst storageRef = getStorage()\n\nclientsClaim()\n\n// Precache all of the assets generated by your build process.\n// Their URLs are injected into the manifest variable below.\n// This variable must be present somewhere in your service worker file,\n// even if you decide not to use precaching. See https://cra.link/PWA\n// @ts-ignore\nprecacheAndRoute(self.__WB_MANIFEST)\n\n// Set up App Shell-style routing, so that all navigation requests\n// are fulfilled with your index.html shell. Learn more at\n// https://developers.google.com/web/fundamentals/architecture/app-shell\nconst fileExtensionRegexp = new RegExp(\"/[^/?]+\\\\.[^/]+$\")\nregisterRoute(\n\t// Return false to exempt requests from being fulfilled by index.html.\n\t({ request, url }) => {\n\t\t// If this isn't a navigation, skip.\n\t\tif (request.mode !== \"navigate\") {\n\t\t\treturn false\n\t\t} // If this is a URL that starts with /_, skip.\n\n\t\tif (url.pathname.startsWith(\"/_\")) {\n\t\t\treturn false\n\t\t} // If this looks like a URL for a resource, because it contains // a file extension, skip.\n\n\t\tif (url.pathname.match(fileExtensionRegexp)) {\n\t\t\treturn false\n\t\t} // Return true to signal that we want to use the handler.\n\n\t\treturn true\n\t},\n\tcreateHandlerBoundToURL(process.env.PUBLIC_URL + \"/index.html\")\n)\n\n// An example runtime caching route for requests that aren't handled by the\n// precache, in this case same-origin .png requests like those from in public/\nregisterRoute(\n\t// Add in any other file extensions or routing criteria as needed.\n\t({ url }) =>\n\t\turl.origin === self.location.origin && url.pathname.endsWith(\".png\"), // Customize this strategy as needed, e.g., by changing to CacheFirst.\n\tnew StaleWhileRevalidate({\n\t\tcacheName: \"images\",\n\t\tplugins: [\n\t\t\t// Ensure that once this runtime cache reaches a maximum size the\n\t\t\t// least-recently used images are removed.\n\t\t\tnew ExpirationPlugin({ maxEntries: 50 }),\n\t\t],\n\t})\n)\n\n// This allows the web app to trigger skipWaiting via\n// registration.waiting.postMessage({type: 'SKIP_WAITING'})\nself.addEventListener(\"message\", (event) => {\n\tif (event.data && event.data.type === \"SKIP_WAITING\") {\n\t\t// @ts-ignore\n\t\tself.skipWaiting()\n\t}\n})\n\n// Any other custom service worker logic can go here.\nlet canvasA = null\nlet canvasB = null\nlet lightenContext\nlet differenceContext\n\nlet count = 0\n\nself.addEventListener(\"message\", async (event) => {\n\tconsole.log(`service worker recieved ${JSON.stringify(event.data)}`)\n\n\tif (event.data.diffWidth) {\n\t\tconsole.log(\"setting contexts\")\n\t\tconst { diffWidth, diffHeight, width, height } = event.data\n\t\tcanvasA = new OffscreenCanvas(width, height)\n\t\tcanvasB = new OffscreenCanvas(Math.floor(diffWidth), Math.floor(diffHeight))\n\n\t\tconsole.log({ diffWidth, diffHeight, width, height })\n\n\t\tlightenContext = canvasA.getContext(\"2d\", { willReadFrequently: true })\n\t\t//@ts-ignore\n\t\tlightenContext.globalCompositeOperation = \"lighten\"\n\n\t\tdifferenceContext = canvasB.getContext(\"2d\", { willReadFrequently: true })\n\t\t//@ts-ignore\n\t\tdifferenceContext.globalCompositeOperation = \"difference\"\n\t\tconsole.log(lightenContext, differenceContext)\n\t}\n\n\tif (event.data.bitmap && event.data.group && event.data.number) {\n\t\tconsole.log(\"processing bitmap\")\n\t\tconsole.log(event.data.bitmap)\n\t\tconsole.log(\"PROCESSING EVENT\")\n\n\t\tconst date = new Date().toString()\n\t\tconst { bitmap, group, number } = event.data\n\n\t\tconst downWidth = Math.floor(bitmap.width / 3)\n\t\tconst downHeight = Math.floor(bitmap.height / 3)\n\t\tconsole.log({ differenceContext, lightenContext })\n\n\t\t// If frames 0-3, just build up lighten and difference image\n\t\tif (number % 3 !== 0) {\n\t\t\tconsole.log(`drawing frame ${number}`)\n\t\t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n\t\t\tlightenContext.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n\t\t\tbitmap.close()\n\t\t}\n\t\t// Do streak detection, save image if has streak, reset canvases\n\t\telse if (number !== 0) {\n\t\t\tconsole.log(`drawing frame ${number} and checking for streak`)\n\t\t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n\t\t\tlightenContext.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n\t\t\tconsole.log({ event })\n\t\t\tconst imageData = differenceContext.getImageData(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tdownWidth,\n\t\t\t\tdownHeight\n\t\t\t)\n\t\t\tconst { longestObject } = lineAlgorithm(imageData)\n\t\t\tconsole.log({ longestObject })\n\t\t\t// Streak found, create final image\n\t\t\tif (longestObject.size > 10 && longestObject.size < 500) {\n\t\t\t\tvar zeroth = {}\n\t\t\t\tlet exif = {}\n\t\t\t\tlet gps = {}\n\t\t\t\texif[piexif.ExifIFD.DateTimeOriginal] = format(\n\t\t\t\t\tnew Date(date),\n\t\t\t\t\t\"yyyy:MM:dd HH:mm:SS\"\n\t\t\t\t)\n\t\t\t\texif[piexif.ExifIFD.ExposureTime] = 4\n\t\t\t\texif[36880] = \"+08:00\"\n\t\t\t\tvar lat = -32.05\n\t\t\t\tvar lng = 115.9\n\t\t\t\tgps[piexif.GPSIFD.GPSLatitudeRef] = lat < 0 ? \"S\" : \"N\"\n\t\t\t\tgps[piexif.GPSIFD.GPSLatitude] = piexif.GPSHelper.degToDmsRational(lat)\n\t\t\t\tgps[piexif.GPSIFD.GPSLongitudeRef] = lng < 0 ? \"W\" : \"E\"\n\t\t\t\tgps[piexif.GPSIFD.GPSLongitude] = piexif.GPSHelper.degToDmsRational(lng)\n\t\t\t\tvar exifObj = { \"0th\": zeroth, Exif: exif, GPS: gps }\n\t\t\t\tvar exifbytes = piexif.dump(exifObj)\n\n\t\t\t\tconst blob = await canvasA.convertToBlob({\n\t\t\t\t\ttype: \"image/jpeg\",\n\t\t\t\t\tquality: 0.95,\n\t\t\t\t})\n\n\t\t\t\t// reset canvases\n\t\t\t\tdifferenceContext.clearRect(0, 0, downWidth, downHeight)\n\t\t\t\tlightenContext.clearRect(0, 0, bitmap.width, bitmap.height)\n\t\t\t\tbitmap.close()\n\n\t\t\t\tvar reader = new FileReader()\n\t\t\t\treader.onload = function (e) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar jpegData = piexif.insert(exifbytes, e.target.result)\n\t\t\t\t\tconsole.log(\"pushing jpeg\")\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.source.postMessage({\n\t\t\t\t\t\tjpeg: jpegData,\n\t\t\t\t\t\tdate,\n\t\t\t\t\t\tlongestObject,\n\t\t\t\t\t})\n\t\t\t\t\tvar imagesRef = ref(\n\t\t\t\t\t\tstorageRef,\n\t\t\t\t\t\t`${group}/${new Date(date).toString()}`\n\t\t\t\t\t)\n\t\t\t\t\tuploadString(imagesRef, jpegData, \"data_url\")\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`uploaded to firebase ${group}/${new Date(date).toString()}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treader.readAsDataURL(blob)\n\t\t\t}\n\t\t}\n\t\t// First frame, no streak logic\n\t\telse if (number === 0) {\n\t\t\tdifferenceContext.drawImage(bitmap, 0, 0, downWidth, downHeight)\n\t\t\tlightenContext.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)\n\t\t\tbitmap.close()\n\t\t}\n\t}\n})\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { addRoute } from './addRoute.js';\nimport { precache } from './precache.js';\nimport './_version.js';\n/**\n * This method will add entries to the precache list and add a route to\n * respond to fetch events.\n *\n * This is a convenience method that will call\n * {@link workbox-precaching.precache} and\n * {@link workbox-precaching.addRoute} in a single call.\n *\n * @param {Array<Object|string>} entries Array of entries to precache.\n * @param {Object} [options] See the\n * {@link workbox-precaching.PrecacheRoute} options.\n *\n * @memberof workbox-precaching\n */\nfunction precacheAndRoute(entries, options) {\n    precache(entries);\n    addRoute(options);\n}\nexport { precacheAndRoute };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport './_version.js';\n/**\n * Claim any currently available clients once the service worker\n * becomes active. This is normally used in conjunction with `skipWaiting()`.\n *\n * @memberof workbox-core\n */\nfunction clientsClaim() {\n    self.addEventListener('activate', () => self.clients.claim());\n}\nexport { clientsClaim };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { getOrCreatePrecacheController } from './utils/getOrCreatePrecacheController.js';\nimport './_version.js';\n/**\n * Adds items to the precache list, removing any duplicates and\n * stores the files in the\n * {@link workbox-core.cacheNames|\"precache cache\"} when the service\n * worker installs.\n *\n * This method can be called multiple times.\n *\n * Please note: This method **will not** serve any of the cached files for you.\n * It only precaches files. To respond to a network request you call\n * {@link workbox-precaching.addRoute}.\n *\n * If you have a single array of files to precache, you can just call\n * {@link workbox-precaching.precacheAndRoute}.\n *\n * @param {Array<Object|string>} [entries=[]] Array of entries to precache.\n *\n * @memberof workbox-precaching\n */\nfunction precache(entries) {\n    const precacheController = getOrCreatePrecacheController();\n    precacheController.precache(entries);\n}\nexport { precache };\n","/*\n  Copyright 2019 Google LLC\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { registerRoute } from 'workbox-routing/registerRoute.js';\nimport { getOrCreatePrecacheController } from './utils/getOrCreatePrecacheController.js';\nimport { PrecacheRoute } from './PrecacheRoute.js';\nimport './_version.js';\n/**\n * Add a `fetch` listener to the service worker that will\n * respond to\n * [network requests]{@link https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers#Custom_responses_to_requests}\n * with precached assets.\n *\n * Requests for assets that aren't precached, the `FetchEvent` will not be\n * responded to, allowing the event to fall through to other `fetch` event\n * listeners.\n *\n * @param {Object} [options] See the {@link workbox-precaching.PrecacheRoute}\n * options.\n *\n * @memberof workbox-precaching\n */\nfunction addRoute(options) {\n    const precacheController = getOrCreatePrecacheController();\n    const precacheRoute = new PrecacheRoute(precacheController, options);\n    registerRoute(precacheRoute);\n}\nexport { addRoute };\n","/*\n  Copyright 2019 Google LLC\n\n  Use of this source code is governed by an MIT-style\n  license that can be found in the LICENSE file or at\n  https://opensource.org/licenses/MIT.\n*/\nimport { getOrCreatePrecacheController } from './utils/getOrCreatePrecacheController.js';\nimport './_version.js';\n/**\n * Helper function that calls\n * {@link PrecacheController#createHandlerBoundToURL} on the default\n * {@link PrecacheController} instance.\n *\n * If you are creating your own {@link PrecacheController}, then call the\n * {@link PrecacheController#createHandlerBoundToURL} on that instance,\n * instead of using this function.\n *\n * @param {string} url The precached URL which will be used to lookup the\n * `Response`.\n * @param {boolean} [fallbackToNetwork=true] Whether to attempt to get the\n * response from the network if there's a precache miss.\n * @return {workbox-routing~handlerCallback}\n *\n * @memberof workbox-precaching\n */\nfunction createHandlerBoundToURL(url) {\n    const precacheController = getOrCreatePrecacheController();\n    return precacheController.createHandlerBoundToURL(url);\n}\nexport { createHandlerBoundToURL };\n"]}